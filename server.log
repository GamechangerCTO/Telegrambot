
> telegram-bot-management-system@1.0.0 dev
> next dev

  ▲ Next.js 14.2.5
  - Local:        http://localhost:3000
  - Environments: .env.local

 ✓ Starting...
 ✓ Ready in 2.2s
 ○ Compiling /api/unified-content ...
 ✓ Compiled /api/unified-content in 1228ms (363 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: undefined,
  target_channels_type: 'undefined',
  target_channels_isArray: false,
  body_keys: []
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 1 channels for language 'am':
  - AfircaSportCenter (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 51 items
✅ The Guardian Football: 51 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 240, Unique: 228
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 228 news items
✅ Fetched 228 news items in 3387ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች።

ይህ የወቅቱ ፈተና ወደ ወቅቱ ወደ ወቅቱ ማለት ነው። ቁርጥ ወደ ምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ የሚኖረው ዝርዝር ይህንን የወቅቱ የሥርዓት ክርክር ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753895556396.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1548632 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753895556396.png',
  id: 'b159e4b2-f652-4036-a3b0-c245528be5f9',
  fullPath: 'generated-images/football_image_1753895556396.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895556396.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 29955ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች።

ይህ የወቅቱ ፈተና ወደ ወቅቱ ወደ ወቅቱ ማለት ነው። ቁርጥ ወደ ምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ የሚኖረው ዝርዝር ይህንን የወቅቱ የሥርዓት ክርክር 
🧹 Cleaning HTML for Telegram: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች።

ይህ ...
✅ HTML cleaned for Telegram: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች። ይህ የ...
🧹 After HTML cleaning: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች። ይህ የወቅቱ ፈተና ወደ ወቅቱ ወደ ወቅቱ ማለት ነው። ቁርጥ ወደ ምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ የሚኖረው ዝርዝር ይህንን የወቅቱ የሥርዓት ክርክር በ
🧹 Cleaning HTML for Telegram: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች። ይህ የ...
✅ HTML cleaned for Telegram: አንቀጽ: ቁርጥ እና አዳዲስ የወቅቱ ትንበያ ቃለ ምልክት አለች፣ በምዕራብ አውሮፓ ውድድር 2025 ውስጥ እንግሊዝ ድል እንዲሰጥ እንደ ትምህርት አለች። ይህ የ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895556396.png
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895556396.png
🧹 HTML validation complete. Clean text length: 289
📊 Image downloaded successfully: 1548632 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
 ✓ Compiled /api/smart-push/trigger in 221ms (365 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753895561138',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 538ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
 POST /api/unified-content?action=send_now&type=news&language=am 200 in 35430ms
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: undefined,
  target_channels_type: 'undefined',
  target_channels_isArray: false,
  body_keys: []
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 1 channels for language 'am':
  - AfircaSportCenter (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ The Guardian Football: 51 items
✅ The Guardian Football: 51 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
📰 Total items: 240, Unique: 228
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 228 news items
✅ Fetched 228 news items in 317ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት

ይህን የተለየ የፈተና ስርዓት ይኖርበታል የሚሉት ክሎይ ከሌሊ በእንግሊዝ ወቅታዊ አውሮፓ አሸናፊነት ዝርዝር ላይ ገንዘብ እንዲል ተናገረ።

ክሎይ ከሌሊ ዳግመ የጠላት ቡድን ስፔንን በፈተና አሸናፊ ማድረ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753895610436.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1591608 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753895610436.png',
  id: '20d0bd1b-3f8c-4a84-8107-a8155628c57f',
  fullPath: 'generated-images/football_image_1753895610436.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895610436.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 24811ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት

ይህን የተለየ የፈተና ስርዓት ይኖርበታል የሚሉት ክሎይ ከሌሊ በእንግሊዝ ወቅታዊ አውሮፓ አሸናፊነት ዝርዝር ላይ ገንዘብ እንዲል ተናገረ።

ክሎይ ከሌሊ ዳግመ የጠላት ቡድን ስፔንን በፈተና አሸናፊ ማድረ
🧹 Cleaning HTML for Telegram: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት

ይህን የተለየ የፈተና ስርዓት ይኖርበታል የ...
✅ HTML cleaned for Telegram: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት ይህን የተለየ የፈተና ስርዓት ይኖርበታል የሚ...
🧹 After HTML cleaning: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት ይህን የተለየ የፈተና ስርዓት ይኖርበታል የሚሉት ክሎይ ከሌሊ በእንግሊዝ ወቅታዊ አውሮፓ አሸናፊነት ዝርዝር ላይ ገንዘብ እንዲል ተናገረ። ክሎይ ከሌሊ ዳግመ የጠላት ቡድን ስፔንን በፈተና አሸናፊ ማድረግ 
🧹 Cleaning HTML for Telegram: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት ይህን የተለየ የፈተና ስርዓት ይኖርበታል የሚ...
✅ HTML cleaned for Telegram: ርዕሰ ጉዳይ: ክሎይ ከሌሊ የተለየ የፈተና አይነት መነሻ ተመልክቷል የአውሮፓ 2025 አሸናፊነት ዝርዝር ለመግኘት ይህን የተለየ የፈተና ስርዓት ይኖርበታል የሚ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895610436.png
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895610436.png
🧹 HTML validation complete. Clean text length: 286
📊 Image downloaded successfully: 1591608 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753895614697',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 112ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
 POST /api/unified-content?action=send_now&type=news&language=am 200 in 27877ms
 ✓ Compiled in 546ms (365 modules)
 ✓ Compiled in 222ms (365 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: undefined,
  target_channels_type: 'undefined',
  target_channels_isArray: false,
  body_keys: []
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 1 channels for language 'am':
  - AfircaSportCenter (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 51 items
✅ The Guardian Football: 51 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 240, Unique: 228
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 228 news items
✅ Fetched 228 news items in 2732ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለው ገለጸ።

ኬሊ ነው በሊዮነስ የሚታወቀው ተንሳፋፊ የገንዘብ መሪ የቆሞት ከሆነ እና ወደ ስፔን በፈተና ማቅረብ ሳይረዳ ላይ እንደ ወዲያው ሂደት ብለው የሚለው...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753895688255.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1587469 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753895688255.png',
  id: '1fc5146b-0aee-4741-a3e6-7f67a51b25d6',
  fullPath: 'generated-images/football_image_1753895688255.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895688255.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 26703ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለው ገለጸ።

ኬሊ ነው በሊዮነስ የሚታወቀው ተንሳፋፊ የገንዘብ መሪ የቆሞት ከሆነ እና ወደ ስፔን በፈተና ማቅረብ ሳይረዳ ላይ እንደ ወዲያው ሂደት ብለው የሚለው
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለው ገለጸ። ኬሊ ነው በሊዮነስ የሚታወቀው ተንሳፋፊ የገንዘብ መሪ የቆሞት ከሆነ እና ወደ ስፔን በፈተና ማቅረብ ሳይረዳ ላይ እንደ ወዲያው ሂደት ብለው የሚለው 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለየ ፈተና ዘዴዋ መረጃ አጋራች የሆነውን ወደ ዩሮ 2025 ድል ገብስ አስቀድሞ እንደ ሚያስታውስ እንደ ውድድር መሠረቱ ይቀጥል እንዳለ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895688255.png
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895688255.png
🧹 HTML validation complete. Clean text length: 420
📊 Image downloaded successfully: 1587469 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753895692299',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 130ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
 POST /api/unified-content?action=send_now&type=news&language=am 200 in 30061ms
 ✓ Compiled in 243ms (324 modules)
 ✓ Compiled in 2.5s (201 modules)
 ✓ Compiled in 302ms (201 modules)
 ○ Compiling / ...
 ✓ Compiled / in 8.4s (737 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 GET / 200 in 9201ms
 ✓ Compiled in 810ms (338 modules)
 ○ Compiling /automation ...
 ✓ Compiled /automation in 1178ms (759 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 GET /automation 200 in 1560ms
 ○ Compiling /dashboard/channels/add ...
 ✓ Compiled /dashboard/channels/add in 1361ms (791 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 GET /dashboard/channels/add 200 in 1678ms
 ○ Compiling /api/dashboard/stats ...
 ✓ Compiled /api/dashboard/stats in 1470ms (549 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
📊 Dashboard Stats API - Fetching bot manager statistics...
Error fetching content logs: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_logs" does not exist'
}
Error fetching coupon events: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.coupon_events" does not exist'
}
✅ Dashboard stats calculated successfully
 GET /api/dashboard/stats 200 in 3760ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 1453ms (935 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 GET /dashboard 200 in 1913ms
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 2.2s (376 modules)
 ✓ Compiled in 668ms (390 modules)
 ✓ Compiled in 574ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 2.9s (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 4.1s (390 modules)
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
 ✓ Compiled in 1840ms (390 modules)
 ✓ Compiled in 841ms (390 modules)
 ✓ Compiled in 772ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/handle-externals.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/handle-externals.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 1667ms (708 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 HEAD /logo.png 404 in 2013ms
 HEAD /logo.png 404 in 19ms
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/handle-externals.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/handle-externals.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 HEAD /logo.png 404 in 20ms
 HEAD /test.txt 404 in 23ms
 ✓ Compiled / in 396ms (382 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 HEAD / 200 in 846ms
 HEAD /logo.png 404 in 24ms
 ✓ Compiled in 2.2s (390 modules)
 ✓ Compiled in 532ms (390 modules)
 ✓ Compiled in 345ms (390 modules)
 ✓ Compiled in 350ms (390 modules)
 ✓ Compiled in 520ms (390 modules)
 ✓ Compiled in 483ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 2.2s (390 modules)
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/handle-externals.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/handle-externals.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
 ✓ Compiled in 1237ms (390 modules)
 ✓ Compiled in 319ms (390 modules)
 ✓ Compiled in 258ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1527ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1809ms (390 modules)
 ✓ Compiled in 825ms (390 modules)
 ✓ Compiled in 830ms (390 modules)
 ✓ Compiled in 629ms (390 modules)
 ✓ Compiled in 1106ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 4.7s (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1418ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1348ms (390 modules)
 ✓ Compiled in 656ms (390 modules)
 ✓ Compiled in 537ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1668ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1712ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
 ✓ Compiled in 1303ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1490ms (390 modules)
 ✓ Compiled in 319ms (390 modules)
 ✓ Compiled in 310ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1778ms (390 modules)
 ✓ Compiled in 405ms (390 modules)
 ✓ Compiled in 914ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/flight-client-entry-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/flight-client-entry-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1268ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/entries.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/next-types-plugin/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack-config.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 2s (390 modules)
 ✓ Compiled in 325ms (390 modules)
 ✓ Compiled in 273ms (390 modules)
 ✓ Compiled in 276ms (390 modules)
 ✓ Compiled in 418ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 1711ms (390 modules)
 ✓ Compiled in 500ms (390 modules)
 ✓ Compiled in 339ms (390 modules)
 ✓ Compiled in 584ms (390 modules)
 ✓ Compiled in 2s (390 modules)
 ✓ Compiled in 621ms (390 modules)
 ✓ Compiled in 334ms (390 modules)
 ✓ Compiled in 491ms (390 modules)
 ✓ Compiled in 474ms (390 modules)
 ✓ Compiled in 715ms (390 modules)
 ✓ Compiled in 811ms (390 modules)
 ✓ Compiled in 557ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 2.2s (390 modules)
 ✓ Compiled in 526ms (390 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, lstat '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content'
<w> [webpack.cache.PackFileCacheStrategy/webpack.FileSystemInfo] Resolving '../../../../.next/server/app/api/unified-content/route' in /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server for build dependencies doesn't lead to expected result '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js', but to 'Error: Can't resolve '../../../../.next/server/app/api/unified-content/route' in '/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server'' instead. Resolving dependencies are ignored for this path.
<w>  at resolve commonjs file ../../../../.next/server/app/api/unified-content/route (expected /Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/server/app/api/unified-content/route.js)
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/require.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/load-components.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/utils.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-app-loader.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/bundle5.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/webpack/webpack.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/plugins/define-env-plugin.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/swc/index.js
<w>  at file dependencies /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at file /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
<w>  at resolve commonjs /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/build/webpack/loaders/next-barrel-loader.js
 ✓ Compiled in 2.7s (390 modules)
 ✓ Compiled in 725ms (390 modules)
 ✓ Compiled in 570ms (390 modules)
 ○ Compiling /api/smart-push/trigger ...
 ✓ Compiled /api/smart-push/trigger in 2s (324 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753916080175',
  channel_ids: 1
}
 POST /api/smart-push/trigger 200 in 2668ms
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 1820ms (1009 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 POST /api/smart-push/trigger 404 in 2199ms
 ✓ Compiled in 719ms (392 modules)
 ○ Compiling /api/automation/auto-scheduler ...
 ✓ Compiled /api/automation/auto-scheduler in 1656ms (364 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 419ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ቺሎይ ኬሊ የግንዛቤ እና የውድድር ዝምነት አንድ የእንግሊዝ እኩል አድርገው ለአውሮፕ ዋልይ መድረክ መሰጠት የወጣው ጥቅም ተገለጸ። 

ኬሊ እንደ የእንግሊዝ ተወካይ በስፔን በመደበኛ ወይም በመቀመጥ ግንባር የተያያዘ ዋልይ በማድረግ ወደ 3-1 እንዲሆን የማሳያ ስርዐት ለማስተዋል አስቀድሞ ወጥታ የዝምነት ቦታ ተቃጣ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753926979445.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1666401 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753926979445.png',
  id: '2f0fe4bc-d156-4c99-afb8-7f8bbd374ef3',
  fullPath: 'generated-images/football_image_1753926979445.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753926979445.png
 POST /api/automation/auto-scheduler 200 in 322550ms
⚠️ URL test failed (might be temporary): TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at async AIImageGenerator.uploadToSupabase (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:83:38)
    at async AIImageGenerator.generateImage (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:170:45)
    at async OptimizedNewsContentGenerator.handleNewsImageOptimized (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:352:36)
    at async Promise.all (index 0)
    at async OptimizedNewsContentGenerator.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:50:49)
    at async ContentRouter.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:172:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:43:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: Error: read ECONNRESET
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)
      at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
✅ News generation completed in 429019ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
😴 Bot sleeping hours: 5:00
🚫 SPAM PREVENTION: Blocked sending to AfircaSportCenter: Bot sleeping hours (00:00-06:00), current: 5:00
🛡️ SPAM PREVENTION: All channels blocked by rate limiting
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T02:03:05.027Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 28,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቺሎይ ኬሊ የግንዛቤ እና የውድድር ዝምነት አንድ የእንግሊዝ እኩል አድርገው ለአውሮፕ ዋልይ መድረክ መሰጠት የወጣው ጥቅም ተገለጸ። \n' +
        '\n' +
        'ኬሊ እንደ የእንግሊዝ ተወካይ በስፔን በመደበኛ ወይም በመቀመጥ ግንባር የተያያዘ ዋልይ በማድረግ ወደ 3-1 እንዲሆን የማሳያ ስርዐት ለማስተዋል አስቀድሞ ወጥታ የዝምነት ቦታ ተቃጣሪ ይወጣል። ይህ ውድድር 1-1 ወደ ማስታወቂያ እና ቀጣይ ጊዜ ላይ ተገኝቷል። \n' +
        '\n' +
        'ኬሊ የተገለጸው የግንዛቤ ዘዴ እንደሚገነዘብ የወይዘን መርምር አስታውስ የሚገኘው ሁለት አንድ ነው። ሁሉም ወይዘን ለጠንካራ ውድድር ይህ የወይዘን መርምር ይቀዳል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753926979445.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: {
    success: false,
    channels: 0,
    results: [],
    error: 'All channels blocked by spam prevention (rate limits exceeded)'
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
 ✓ Compiled /api/smart-push/trigger in 221ms (324 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753927390953',
  channel_ids: 1
}
 POST /api/smart-push/trigger 200 in 708ms
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T02:03:15.615Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T02:03:16.641Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
😴 Bot sleeping hours: 5:00
🚫 SPAM PREVENTION: Blocked sending to AfircaSportCenter: Bot sleeping hours (00:00-06:00), current: 5:00
🛡️ SPAM PREVENTION: All channels blocked by rate limiting
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T02:03:18.772Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753927397637',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: {
    success: false,
    channels: 0,
    results: [],
    error: 'All channels blocked by spam prevention (rate limits exceeded)'
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ Error fetching channel details: {
  message: 'TypeError: fetch failed',
  details: 'TypeError: fetch failed\n' +
    '    at node:internal/deps/undici/undici:12502:13\n' +
    '    at async ChannelResolver.getChannelDetails (webpack-internal:///(rsc)/./src/lib/content/api-modules/channel-resolver.ts:153:43)\n' +
    '    at async ChannelResolver.resolveTargetChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/channel-resolver.ts:142:34)\n' +
    '    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:96:35)\n' +
    '    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)\n' +
    '    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)\n' +
    '    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)\n' +
    '    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)\n' +
    '    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038\n' +
    '    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)\n' +
    '    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)\n' +
    '    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)\n' +
    '    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)\n' +
    '    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)\n' +
    '    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)\n' +
    '    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)\n' +
    '    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)\n' +
    '    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)\n' +
    '    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)',
  hint: '',
  code: ''
}
🎯 Content Router: Generating daily_summary content for am
📋 Using daily summary generator for am
🗓️ Early morning (5:00): Using previous day's matches: 2025-07-30
📅 Generating daily summary in am
📅 Generating daily summary for 2025-07-30
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for 2025-07-30
📅 Getting matches for date: 2025-07-31
🎯 Getting fixtures for date: 2025-07-31
📅 API-Football v3: Getting fixtures for date 2025-07-31
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-31
✅ Found 112 fixtures for 2025-07-31 from API-Football v3
📅 Found 112 matches for 2025-07-31
🔮 Found 112 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-30
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
😴 Bot sleeping hours: 5:00
🚫 SPAM PREVENTION: Blocked sending to AfircaSportCenter: Bot sleeping hours (00:00-06:00), current: 5:00
🛡️ SPAM PREVENTION: All channels blocked by rate limiting
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T02:14:13.657Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 26,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753928053570_amfxfrpss',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/30/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/30/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Hartford Athletic vs New Mexico United\n' +
        '• U.N.A.M. - Pumas vs Orlando City SC\n' +
        '• St. Catharines Wolves vs Scrosoppi\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: {
    success: false,
    channels: 0,
    results: [],
    error: 'All channels blocked by spam prevention (rate limits exceeded)'
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 825ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ቁርጥ እና አድናቆት በተመለከተ ቡድን ይወዳድር! በዓለም የሴቶች እግር ኳስ ውድድር በምርጥ ዋና የተወካዩ ግልፅ ወግ ትንቢት አድርገዋል። እንግሊዝ እንደ ገና ወደ አውሮፓ አሸናፊ የሚያስቀርበው የክብር መርምር ወደ ወደፊት ተሸክሞ ተመልሷል። በስፔን ላይ በነበር በሰነዱ የተወዳደሩ ግጥም ሁለት ወቅት ይወዳድር ወቅት...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 339332ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
😴 Bot sleeping hours: 5:00
🚫 SPAM PREVENTION: Blocked sending to AfircaSportCenter: Bot sleeping hours (00:00-06:00), current: 5:00
🛡️ SPAM PREVENTION: All channels blocked by rate limiting
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T02:19:54.428Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 22,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁርጥ እና አድናቆት በተመለከተ ቡድን ይወዳድር! በዓለም የሴቶች እግር ኳስ ውድድር በምርጥ ዋና የተወካዩ ግልፅ ወግ ትንቢት አድርገዋል። እንግሊዝ እንደ ገና ወደ አውሮፓ አሸናፊ የሚያስቀርበው የክብር መርምር ወደ ወደፊት ተሸክሞ ተመልሷል። በስፔን ላይ በነበር በሰነዱ የተወዳደሩ ግጥም ሁለት ወቅት ይወዳድር ወቅት የቆሞበት ከ 1-1 በኋላ በሰበር ቁልፍ 3-1 አሽከርክ እንደ ተሸከም ተወዳደር ወቅት እንዳይወዳድር እንደሚያስተዋወቅ ይህ ነው።\n' +
        '\n' +
        'አዳዲስ የመደብ ዝርዝር በእንግሊዝ የአንድ ግለሰብ በፀሐይ የነበረው ወንበር ይህ በመሆኑ በዓለም ላይ የዋጋ ይቀርባል። የእንግሊዝ ቡድን በባለሙያ ገነን ወገን ይህ የአስተዳደር ዕውቀት እንዲቀርባል እንደገና ተመልሷል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: {
    success: false,
    channels: 0,
    results: [],
    error: 'All channels blocked by spam prevention (rate limits exceeded)'
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T02:20:03.608Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
 ○ Compiling /api/automation/auto-scheduler ...
 ✓ Compiled /api/automation/auto-scheduler in 1313ms (364 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 2782ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 325909ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 329115ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 3.3s (1049 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 POST /api/automation/auto-scheduler 404 in 3787ms
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 631ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
📺 Found 2 active channels with bots
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ይሰጣል። ክለን እንግዳ በላይ ወቅት ግንፃችን የተሸነፈ ውድድር ላይ ለማድረግ ተወዳድሪ በቀን ወደ ሚሆኑት አስተያየት ይወዳድራል።

ክለይ እንግሊዝ ወንድሞች ወ...
✅ Using AI result for am
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 334485ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 333307ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 334348ms
 POST /api/automation/auto-scheduler 200 in 335317ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ይሰጣል። ክለን እንግዳ በላይ ወቅት ግንፃችን የተሸነፈ ውድድር ላይ ለማድረግ ተወዳድሪ በቀን ወደ ሚሆኑት አስተያየት ይወዳድራል።

ክለይ እንግሊዝ ወንድሞች ወ
🧹 Cleaning HTML for Telegram: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ...
✅ HTML cleaned for Telegram: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ...
🧹 After HTML cleaning: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ይሰጣል። ክለን እንግዳ በላይ ወቅት ግንፃችን የተሸነፈ ውድድር ላይ ለማድረግ ተወዳድሪ በቀን ወደ ሚሆኑት አስተያየት ይወዳድራል። ክለይ እንግሊዝ ወንድሞች ወደ
🧹 Cleaning HTML for Telegram: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ...
✅ HTML cleaned for Telegram: ⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ Message sent successfully to @africansportdata
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ Successfully sent to AfircaSportCenter
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 536ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 975ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
 ○ Compiling /api/smart-push/trigger ...
 ✓ Compiled /api/smart-push/trigger in 820ms (366 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753931728735',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 1318ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:09:44.834Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 33,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:15:35.997Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:15:36.953Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753931739568',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 103ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:15:38.727Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 41,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753931737918',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል።

ኬሊ እንደ ምርጫ አስቀድሞ ሊዮነስ በስፔን በፈተና ድል ተወላጅ ነበር፣ የተሳበ ወጣት በተወዳዳሪ ውድድር 1-1 ሆኖ የቀጣ ማቀዳውን ማንነት በነበር አቀባይ ድምፅ ማስታ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ሰጥታል።

ቻሎይ ከሊ የማህበረሰብ ተወዳዳሪ አድርጎ በስፔን በወቅቱ 1-1 እንደሆነ ተወልዳ የወይዘር በማቅረብ የእንግሊዝን አሻሻት አድርጎ ተሰርያት እንደ ተፈ...
✅ Using AI result for am
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 366
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 339165ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 339190ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 340401ms
 POST /api/automation/auto-scheduler 200 in 340504ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል።

ኬሊ እንደ ምርጫ አስቀድሞ ሊዮነስ በስፔን በፈተና ድል ተወላጅ ነበር፣ የተሳበ ወጣት በተወዳዳሪ ውድድር 1-1 ሆኖ የቀጣ ማቀዳውን ማንነት በነበር አቀባይ ድምፅ ማስታ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል።

ኬሊ እን...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል። ኬሊ እንደ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል። ኬሊ እንደ ምርጫ አስቀድሞ ሊዮነስ በስፔን በፈተና ድል ተወላጅ ነበር፣ የተሳበ ወጣት በተወዳዳሪ ውድድር 1-1 ሆኖ የቀጣ ማቀዳውን ማንነት በነበር አቀባይ ድምፅ ማስታወ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል። ኬሊ እንደ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል። ኬሊ እንደ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753932068523',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 154ms
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ሰጥታል።

ቻሎይ ከሊ የማህበረሰብ ተወዳዳሪ አድርጎ በስፔን በወቅቱ 1-1 እንደሆነ ተወልዳ የወይዘር በማቅረብ የእንግሊዝን አሻሻት አድርጎ ተሰርያት እንደ ተፈ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ...
🧹 After HTML cleaning: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ሰጥታል። ቻሎይ ከሊ የማህበረሰብ ተወዳዳሪ አድርጎ በስፔን በወቅቱ 1-1 እንደሆነ ተወልዳ የወይዘር በማቅረብ የእንግሊዝን አሻሻት አድርጎ ተሰርያት እንደ ተፈፅ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753932070068',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 117ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:15:25.176Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 22,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753932070296',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 121ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:15:25.244Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 23,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በእንጉር ክለብ የተነሱት በላይ ውድድር ወቅት የተነሱት በዚህ ዓመት እንግሊዝ ወንድሞች ወቅታቸው ወቅታቸው በአየር ወደ ስፖርት ግንዛቤ ተወዳዳሪ አስተያየት ይሰጣል። ክለን እንግዳ በላይ ወቅት ግንፃችን የተሸነፈ ውድድር ላይ ለማድረግ ተወዳድሪ በቀን ወደ ሚሆኑት አስተያየት ይወዳድራል።\n' +
        '\n' +
        'ክለይ እንግሊዝ ወንድሞች ወደ አርስት ውድድር ወደ ስፖርት ላይ በኃይል ወደ ገንዘብ ይወዳድራል። ክለይ ከስፖርት ውድድር ወደ አንድ ወቅታቸው አንዱን ተሸነፈ ውድድር አይወዳድር። አስተያየት ወደ ዋጋ ለማንበብ እንዲህ ይሁን ወደ አየር ወደ ዝማኔ ይወዳድራል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No matches found for channel preferences
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:21:16.834Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:21:17.032Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:21:17.824Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:21:18.020Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753932080553',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 110ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:21:19.683Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 25,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753932078838',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753932080701',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 102ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:21:19.837Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 29,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753932079007',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 428
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 450
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753932407542',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753932407592',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 220ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:21:06.652Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 30,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የተለያዩ የፈተና ዘዴዎች ምንጭ ነው ብለው ለተወዳዳሪ ወጣት ገዳይ ወደ 2025 የአውሮፓ ደረጃ ድል እንዳደረገ አስተያየት አድርገዋል።\n' +
        '\n' +
        'ኬሊ እንደ ምርጫ አስቀድሞ ሊዮነስ በስፔን በፈተና ድል ተወላጅ ነበር፣ የተሳበ ወጣት በተወዳዳሪ ውድድር 1-1 ሆኖ የቀጣ ማቀዳውን ማንነት በነበር አቀባይ ድምፅ ማስታወቅያ ወዲያውኑ 3-1 በውድድር ተወዳዳሪ አነሳይ አርጋውም አውቅ። \n' +
        '\n' +
        'ክሎይ ኬሊ ይህ የነበረ የፈተና ዘዴ በምስሌ ወጣት እንደተረጋገጠ በዚህ ዓይነት ቀዳይ ዕድል ነበር እንደሚል ገለጸ። \n' +
        '\n' +
        'የእንግሊዝ ወንድሞች በዚህ ውድድር ድል ወደ 2025 የአውሮፓ ውድድር ግንባር ገብስ እንደተወሰነ ተለዋዋጭ ወጣት የእንግሊዝ ወጣት ተወዳዳሪ ነው። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 194ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:21:06.678Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 22,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቻሎይ ከሊ ለአዳዲስ የእርምጃ ዘዴዋ መግለጫ በማቅረብ በምርጥ የአውሮፓ እንግሊዝ ድርጅት ውስጥ ወደ ወይዘር ወይዘር እንደገና ወቅታዊ እግር ኳስ አስተያየት ሰጥታል።\n' +
        '\n' +
        'ቻሎይ ከሊ የማህበረሰብ ተወዳዳሪ አድርጎ በስፔን በወቅቱ 1-1 እንደሆነ ተወልዳ የወይዘር በማቅረብ የእንግሊዝን አሻሻት አድርጎ ተሰርያት እንደ ተፈፅሞ 3-1 ውድድር ፈትሽ ያቀይማል። \n' +
        '\n' +
        'አዳዲስ የእርምጃው ሂደት ምን እንደሚያስታውስ ተነግሯል። እንግዲህ ይህ የእርምጃ ዘዴ የአሁኑ ወቅት ዕድልን ይወጣበታል። \n' +
        '\n' +
        'ምንም እንኳን በዚህ ውድድር ከዚያ ወዲያ ላይ ወይዘር ይህ የእርምጃ ዘዴ በማህበረሰብ የገና ዝንብ ቅርጸ ቀረጺ ይወጣበታል። \n' +
        '\n' +
        'ምንም እንኳን በዚህ ውድድር ወይዘር ይህ የእርምጃ ዘዴ ለእድል ይቅር ይወጣበታል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:26:53.784Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:26:54.066Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:26:54.767Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:26:55.044Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753932417413',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 99ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:26:56.565Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 19,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753932415744',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message sent successfully to @africansportdata
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753932417832',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 172ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:26:56.852Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753932416031',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933088364',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 188ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:38:06.815Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 43,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753933086785_qp4g10pj0',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 542ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ።

ኬሊ ወደ ውድድሩ ወንጌል ተወዳዳሪዎች ይታወቃሉ እና ይህ የእንግሊዝ ዳንስ በስፔን ላይ በግብዣ መመርዝ ገንዘብ ያሳያል፣ በውድድሩ መጨረሻ 1-1 ከሆነ ግን በፈረንጅ ቀይ ውድድር ው...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753933105697.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1227666 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ Upload successful! Data: {
  path: 'football_image_1753933105697.png',
  id: '080aece2-dc88-49ce-a3a3-d9af25a0069a',
  fullPath: 'generated-images/football_image_1753933105697.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753933105697.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753933105697.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933108103',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 150ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:38:27.183Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753933107182_thnns8tm0',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753933105697.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 333853ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 314367ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ።

ኬሊ ወደ ውድድሩ ወንጌል ተወዳዳሪዎች ይታወቃሉ እና ይህ የእንግሊዝ ዳንስ በስፔን ላይ በግብዣ መመርዝ ገንዘብ ያሳያል፣ በውድድሩ መጨረሻ 1-1 ከሆነ ግን በፈረንጅ ቀይ ውድድር ው
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ።

ኬሊ ወደ ውድድሩ ወን...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ። ኬሊ ወደ ውድድሩ ወንጌ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ። ኬሊ ወደ ውድድሩ ወንጌል ተወዳዳሪዎች ይታወቃሉ እና ይህ የእንግሊዝ ዳንስ በስፔን ላይ በግብዣ መመርዝ ገንዘብ ያሳያል፣ በውድድሩ መጨረሻ 1-1 ከሆነ ግን በፈረንጅ ቀይ ውድድር ውስ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ። ኬሊ ወደ ውድድሩ ወንጌ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ። ኬሊ ወደ ውድድሩ ወንጌ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933424399',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933424471',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 190ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:43:42.672Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 41,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753933422670_0s39qfq95',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933424546',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 201ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:43:42.882Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 16,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753933422882_qanwp87cm',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 176ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:43:42.714Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 32,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753933422708_ic0vgb5x5',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 872ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 1355ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 1551ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደገና እንደ አንደኛ ተወዳዳሪ አወርዋል። 

በዚህ ላይ የወንጌል እንግሊዝ ወንድሞች ከስፔን ጋር በማዕበል በመቀስቀስ በ3-1 ውስጥ ወደ ተወዳዳሪ ጊዜ በውድድር ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎይ የእንግሊዝ ሴቶች ቡድን ምርጥ የሆነ አዋጁን በተመለከተ የወጣብ ጥቅም አውርዳት አድርጎ የመዋጣት ውድድር ይታወቃል።

ኬሊ የጋር ዋጋ ይዞ እንግሊዝ ከስፔን ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የውድድር ወደ ውስጥ አመለካከት ያስታወቃል።

ኬሊ የተለመደው የተጨዋታ ቅድሚያ መንገድ አስታወቃለች፣ ምንም የሚያሳይ ውድድር ወይም የተለየ ቅድሚያ ይህን ይፈልጋ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753933447004.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1688148 bytes
🔍 Checking bucket access...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 402
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336512ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336651ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336564ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔌 Database connection test: FAILED
🔌 DB Error: TypeError: fetch failed
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደገና እንደ አንደኛ ተወዳዳሪ አወርዋል። 

በዚህ ላይ የወንጌል እንግሊዝ ወንድሞች ከስፔን ጋር በማዕበል በመቀስቀስ በ3-1 ውስጥ ወደ ተወዳዳሪ ጊዜ በውድድር 
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደ...
🧹 After HTML cleaning: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደገና እንደ አንደኛ ተወዳዳሪ አወርዋል። በዚህ ላይ የወንጌል እንግሊዝ ወንድሞች ከስፔን ጋር በማዕበል በመቀስቀስ በ3-1 ውስጥ ወደ ተወዳዳሪ ጊዜ በውድድር ወር
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የውድድር ወደ ውስጥ አመለካከት ያስታወቃል።

ኬሊ የተለመደው የተጨዋታ ቅድሚያ መንገድ አስታወቃለች፣ ምንም የሚያሳይ ውድድር ወይም የተለየ ቅድሚያ ይህን ይፈልጋ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የውድድር ወደ ውስጥ አመለካከት ያስታወቃል። ኬሊ የተለመደው የተጨዋታ ቅድሚያ መንገድ አስታወቃለች፣ ምንም የሚያሳይ ውድድር ወይም የተለየ ቅድሚያ ይህን ይፈልጋሉ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎይ የእንግሊዝ ሴቶች ቡድን ምርጥ የሆነ አዋጁን በተመለከተ የወጣብ ጥቅም አውርዳት አድርጎ የመዋጣት ውድድር ይታወቃል።

ኬሊ የጋር ዋጋ ይዞ እንግሊዝ ከስፔን 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎይ የእንግሊዝ ሴቶች ቡድን ምርጥ የሆነ አዋጁን በተመለከተ የወጣብ ጥቅም አውርዳት አድርጎ የመዋጣት ውድድር ይታወቃል። ኬሊ የጋር ዋጋ ይዞ እንግሊዝ ከስፔን በ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 231701 bytes
✅ Upload successful! Data: {
  path: 'football_image_1753933447004.png',
  id: '1737667d-a81a-4d69-b5c7-485de62011ab',
  fullPath: 'generated-images/football_image_1753933447004.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753933447004.png
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753933447004.png
🧹 HTML validation complete. Clean text length: 388
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933764025',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 230ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:43:42.642Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 25,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የሚል የግብዣ ቅድሚያ ዘዴ የተለየውን ዝርዝር አጋለጣ፣ እንግሊዝ ወደ ውድድር የአውሮፓ ምርጥ እንደገና መግባት ከጋለበሉ።\n' +
        '\n' +
        'ኬሊ ወደ ውድድሩ ወንጌል ተወዳዳሪዎች ይታወቃሉ እና ይህ የእንግሊዝ ዳንስ በስፔን ላይ በግብዣ መመርዝ ገንዘብ ያሳያል፣ በውድድሩ መጨረሻ 1-1 ከሆነ ግን በፈረንጅ ቀይ ውድድር ውስጥ 3-1 ያለውን ውጤት ለመያዝ አስቀድሞ እንደ አስተዳደር የታወቀ ግብዣ ተወዳዳሪ ይሆን እና እንደ ዋና ወንጌል ወደ ውድድሩ ይገባል።\n' +
        '\n' +
        'ለዚህ የመጀመሪያ እንደ ምርጥ ነኝ፣ ይህ በሚስት ድርጅት የእንግሊዝ ዳንስ በዚህ ዕድል ውስጥ አስተዳደር ይሆናል ተብሏል ይህ ተዋጊም ውድድር ይሆኗል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📊 Image downloaded successfully: 1688148 bytes
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ Message sent successfully to @africansportdata
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
🗑️ Deleted football_image_1753933447004.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753933766697',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 149ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:43:42.905Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 44,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753933447004.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753933447004.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:49:31.641Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:49:33.346Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753933786021.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1589062 bytes
🔍 Checking bucket access...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753933786054.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1617779 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 451
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753933786021.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753933786021.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753933786021.png
🧹 HTML validation complete. Clean text length: 450
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753933786054.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753933786054.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753933786054.png
🧹 HTML validation complete. Clean text length: 424
📊 Image downloaded successfully: 1589062 bytes
📊 Image downloaded successfully: 1617779 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Successfully sent to AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753934102593',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message sent successfully to @africansportdata
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 230ms
✅ Successfully sent to AfircaSportCenter
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:49:21.458Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 25,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የወጣብ የተወሰነ እንቅስቃሴ እንዴት እንደተደረገ ገለጸ። አዳዲስ የአውሮፓ ውድድር ውስጥ እንግሊዝ ለእንደገና ውድድር ድምፅ ማሰናከል ሲደርስ ክሎይ የእንግሊዝ ሴቶች ቡድን ምርጥ የሆነ አዋጁን በተመለከተ የወጣብ ጥቅም አውርዳት አድርጎ የመዋጣት ውድድር ይታወቃል።\n' +
        '\n' +
        'ኬሊ የጋር ዋጋ ይዞ እንግሊዝ ከስፔን በፈለም ወደ 3-1 በመስመር ላይ ማቅረብ ይችላል በማለት የፖይንት ቁጥር ወጣብ በመሥረት ሲሆን የማጀት እና በወቅታዊ ጊዜ 1-1 በአባል ሆኖ ወደ ገባ። \n' +
        '\n' +
        'ኬሊ ይህን የእንግሊዝ ሴቶች ቡድን እንደ ተሳካ ፈታሽ ድምፅ እንደሚያደርግ ይናገራል። በአባል ስለተቀለለው ዝግጅት የማቀመጥ ድርሻ የድምፅ ዝርዝር ይወዳደር። \n' +
        '\n' +
        'ምንም ይሆን የእንግሊዝ ሴቶች ቡድን እንደ እንዲሁ ውድድር ዘመናው ውድድር የተሳካ ሆኖ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message recorded successfully
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message recorded successfully
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🗑️ Deleted football_image_1753933786021.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753933786021.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753934103200',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🗑️ Deleted football_image_1753933786054.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753933786054.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753934103282',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 139ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:49:21.519Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ እንደ ተለመደ የፈርጅ ስርዓት የተለየ ቅድሚያ መንገድ አስታወቃለች፣ ይህም እንግሊዝ እንደገና ወደ ውድድር እንደሚያበረታታ ተደርጎ እንደተደረገ የውድድር ወደ ውስጥ አመለካከት ያስታወቃል።\n' +
        '\n' +
        'ኬሊ የተለመደው የተጨዋታ ቅድሚያ መንገድ አስታወቃለች፣ ምንም የሚያሳይ ውድድር ወይም የተለየ ቅድሚያ ይህን ይፈልጋሉ ይላል። እንግሊዝ በስፔን በምዕራብ የተሰጡትን የፈርጅ ውድድር በበርበሬ ወደ አስገዳጅ ስርዓት ወደ ምርጥ ውስጥ ወደ ተወሰነ እንደ ተደረገ ይወዳል።\n' +
        '\n' +
        'በጨዋታ ውስጥ የምዕራብ ወደ ወቅታዊ ገዳይ የምዕራብ ወይም በውድድር ላይ እንደተሰጡት የእንግሊዝ ግምት እንደምን ይህ ውድድር ይወዳል። ዝርዝር ያዳርጉት፣ እንግሊዝ 3-1 በአጭር ውድድር ውስጥ ምርጥ ውድድር ይወዳል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753933786021.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753933786021.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 133ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T03:49:21.496Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቻሎይ ኬሊ የተለመደ የመዋቅር ዘዴ ለማስታወቅ በተለይ የአውሮፓ ማህበረሰብ ውድድር እንደ ምርጥ ተካውን ያሳያል። ኬሊ እንግሊዝን እንደ ወንጌል ወደዚያ እንደገና እንደ አንደኛ ተወዳዳሪ አወርዋል። \n' +
        '\n' +
        'በዚህ ላይ የወንጌል እንግሊዝ ወንድሞች ከስፔን ጋር በማዕበል በመቀስቀስ በ3-1 ውስጥ ወደ ተወዳዳሪ ጊዜ በውድድር ወርድ ወደ አስቀድሞ አመለካከት ማስታወቅ ተቀባይነት አድርገዋል። እንግሊዝ ወንድሞች ይህን ውድድር ለተጠቃሚ ወንድም ያሳይ የሚገኝ ውድድር አለበት። \n' +
        '\n' +
        'ኬሊ የአውሮፓ ሆርብ የመሪ ምንም ዋነኛ ወይም ዋነኛ ዝምድና ማስታወቅ የደምብ ቦታ ይችላል። የዚህ ውድድር ዜና ወቅታዊ የወቅታዊ ድምፅን ይህ የዚህ ውድድር ዝምድና ይኖርበታል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753933786054.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753933786054.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:55:09.246Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:55:10.044Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T03:55:10.050Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 2194ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች። 

ይህ የስምምነት ወቅት ውስጥ ክሊዮ ወደ ወይዘር ስፖርት የሚለው የተወሰነ ግብይ በተሞላ ይፈጥራል። ክሊዮ የተለየ የግብይ ስልት ገልጿል፣ ወደ ግብይው ተወስ...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 276200ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች። 

ይህ የስምምነት ወቅት ውስጥ ክሊዮ ወደ ወይዘር ስፖርት የሚለው የተወሰነ ግብይ በተሞላ ይፈጥራል። ክሊዮ የተለየ የግብይ ስልት ገልጿል፣ ወደ ግብይው ተወስ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች።...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች።...
🧹 After HTML cleaning: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች። ይህ የስምምነት ወቅት ውስጥ ክሊዮ ወደ ወይዘር ስፖርት የሚለው የተወሰነ ግብይ በተሞላ ይፈጥራል። ክሊዮ የተለየ የግብይ ስልት ገልጿል፣ ወደ ግብይው ተወስዷል
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች።...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች።...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 459
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 320908ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 321510ms
 POST /api/automation/auto-scheduler 200 in 600881ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📊 Image downloaded successfully: 231701 bytes
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753935047770',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 164ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:05:22.335Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 22,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ከሊ በዩሮ 2025 ውድድር ውስጥ ወድጅ ያሳየ የተለየ ግብይ ስልት ምን እንደሚሆን ገልጿል። እርሷ እንግሊዝን እንደ ገና ወደ የአውሮፓ በር አዳረገች። \n' +
        '\n' +
        'ይህ የስምምነት ወቅት ውስጥ ክሊዮ ወደ ወይዘር ስፖርት የሚለው የተወሰነ ግብይ በተሞላ ይፈጥራል። ክሊዮ የተለየ የግብይ ስልት ገልጿል፣ ወደ ግብይው ተወስዷል ፣ መልካም ወገን ከስፖይን ተወዳጅ ወደ ውጭ ወዳድረው በ 3-1 ወይንን ወደ ውሽህ እንደሚሆን ወቅት በደረጃ አስተዳደር ወደ ውሽት ወደ ወርድ ወደ ወይዘር ይገኙ። \n' +
        '\n' +
        'በዚህ ውስጥ የታላቅ አውራጃ የምንም ወይዘር ወደ ግብይ ተወዳጅ ክሊዮ ወደ ክልል ወደ ወርግ ቀጥሎ አድርጋለች። በዚህ መደብ ተገናኝቷል፣ የተወሰነ ግብይ እና ወይዘር ወይዘር ለወይዘር ወደ ወይዘር ወየውርት ይታወቃል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 9309ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 9910ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 9079ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
⚠️ No matches found for channel preferences
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:11:03.434Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:11:04.405Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753935067212',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 599ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:11:06.218Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753935065392',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753935071055.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1742779 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 345092ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 344053ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 345230ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ API-Football v3 fixtures by date error: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runNextTicks (node:internal/process/task_queues:64:3)
    at process.processImmediate (node:internal/timers:449:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
    at async APIFootballAPI.makeRequest (webpack-internal:///(rsc)/./src/lib/content/football-intelligence/api/api-football-api.ts:34:26)
    at async APIFootballAPI.getFixturesByDate (webpack-internal:///(rsc)/./src/lib/content/football-intelligence/api/api-football-api.ts:355:26)
    at async FootballAPIManager.getFixturesByDate (webpack-internal:///(rsc)/./src/lib/content/football-intelligence/api/football-api-manager.ts:193:33)
    at async UnifiedFootballService.getMatchesByDate (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:1361:30)
    at async DailyWeeklySummaryGenerator.getTodaysMatches (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:692:33)
    at async DailyWeeklySummaryGenerator.generateDailySummary (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:48:31)
    at async DailyWeeklySummaryGenerator.generateSummary (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:34:24)
    at async ContentRouter.generateDailySummaryContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:418:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:53:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: ConnectTimeoutError: Connect Timeout Error
      at onConnectTimeout (node:internal/deps/undici/undici:6635:28)
      at node:internal/deps/undici/undici:6587:50
      at Immediate._onImmediate (node:internal/deps/undici/undici:6619:13)
      at process.processImmediate (node:internal/timers:478:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17) {
    code: 'UND_ERR_CONNECT_TIMEOUT'
  }
}
❌ No fixtures found for date 2025-07-30
📅 No matches found for 2025-07-30
📅 No matches found for 2025-07-30
❌ No matches found for daily summary
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ⚠️ No daily_summary content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:16:32.531Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No daily_summary content could be generated at this time.',
  processing_info: {
    data_source: 'Daily Summary Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
 POST /api/automation/auto-scheduler 200 in 346602ms
 POST /api/automation/auto-scheduler 200 in 344948ms
 POST /api/automation/auto-scheduler 200 in 346628ms
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: Error: write EPIPE
      at WriteWrap.onWriteComplete [as oncomplete] (node:internal/stream_base_commons:95:16)
      at WriteWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -32,
    code: 'EPIPE',
    syscall: 'write'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753935071055.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753935071055.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753935071055.png
🧹 HTML validation complete. Clean text length: 388
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 1742779 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 824ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Message sent successfully to @africansportdata
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
🗑️ Deleted football_image_1753935071055.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753935071055.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753935396888',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 140ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:10:45.728Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753935071055.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753935071055.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:16:42.936Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:16:43.929Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753935406596',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 108ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:16:45.753Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753935404904',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🤖 AI Result for am: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እንደሆነ እና እንደ ምስሌ ተወልደ ወደ እንግሊዝ መምጣት የተደረገው ድል የተመነጨ ነው።

ኬሊ የሚለው ወንድም እንደ አንዱ የአለም ተቀባይ የሆኑት በላይ ወደ ስ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸነፈች። 

ኬሊ በላይኖሴዝ አውርድ በስፔን ላይ ወቅታዊ ወቅታዊ ይደርሳል እና ከተመረጠ የምርጫ እንደዚህ የሚያሳስባት እንደተባለ እንዲሁ ይጠቀማል። እንግሊዝ ከ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ምርጥ ተጫዋች ተወዳዳሪ ሆነች በእንግሊዝ እና ስፔን መዋቅር ውስጥ አስቀድሞ ገንዘብ በማድረግ ለግምባር ወይንም ጊዜ ወስነዋል። 

ኬሊ በዚህ ውድድር ሁለተኛ ምር...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ሂደት ተመልሷል እና በፍትሕ ውድድር ወቅት በስፔን በዝቅ የሆነ ውድድር ወቅት የእንግሊዝ ቡድን ወደ ዩሮ ውድድር ወደ ታላቅ ድምፅ ሂደት አድርጎ ወገን አገኙ። ...
✅ Using AI result for am
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753935416570.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1707067 bytes
🔍 Checking bucket access...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 337018ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 335803ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 335514ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 335294ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔌 Database connection test: FAILED
🔌 DB Error: TypeError: fetch failed
 POST /api/automation/auto-scheduler 200 in 338209ms
 POST /api/automation/auto-scheduler 200 in 338167ms
 POST /api/automation/auto-scheduler 200 in 338309ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እንደሆነ እና እንደ ምስሌ ተወልደ ወደ እንግሊዝ መምጣት የተደረገው ድል የተመነጨ ነው።

ኬሊ የሚለው ወንድም እንደ አንዱ የአለም ተቀባይ የሆኑት በላይ ወደ ስ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እንደሆነ እና እንደ ምስሌ ተወልደ ወደ እንግሊዝ መምጣት የተደረገው ድል የተመነጨ ነው። ኬሊ የሚለው ወንድም እንደ አንዱ የአለም ተቀባይ የሆኑት በላይ ወደ ስፔ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ሂደት ተመልሷል እና በፍትሕ ውድድር ወቅት በስፔን በዝቅ የሆነ ውድድር ወቅት የእንግሊዝ ቡድን ወደ ዩሮ ውድድር ወደ ታላቅ ድምፅ ሂደት አድርጎ ወገን አገኙ። 
🧹 Cleaning HTML for Telegram: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ...
✅ HTML cleaned for Telegram: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ...
🧹 After HTML cleaning: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ሂደት ተመልሷል እና በፍትሕ ውድድር ወቅት በስፔን በዝቅ የሆነ ውድድር ወቅት የእንግሊዝ ቡድን ወደ ዩሮ ውድድር ወደ ታላቅ ድምፅ ሂደት አድርጎ ወገን አገኙ። 
🧹 Cleaning HTML for Telegram: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ...
✅ HTML cleaned for Telegram: ⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸነፈች። 

ኬሊ በላይኖሴዝ አውርድ በስፔን ላይ ወቅታዊ ወቅታዊ ይደርሳል እና ከተመረጠ የምርጫ እንደዚህ የሚያሳስባት እንደተባለ እንዲሁ ይጠቀማል። እንግሊዝ ከ
🧹 Cleaning HTML for Telegram: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸ...
✅ HTML cleaned for Telegram: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸ...
🧹 After HTML cleaning: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸነፈች። ኬሊ በላይኖሴዝ አውርድ በስፔን ላይ ወቅታዊ ወቅታዊ ይደርሳል እና ከተመረጠ የምርጫ እንደዚህ የሚያሳስባት እንደተባለ እንዲሁ ይጠቀማል። እንግሊዝ ከራሳ
🧹 Cleaning HTML for Telegram: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸ...
✅ HTML cleaned for Telegram: ⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ምርጥ ተጫዋች ተወዳዳሪ ሆነች በእንግሊዝ እና ስፔን መዋቅር ውስጥ አስቀድሞ ገንዘብ በማድረግ ለግምባር ወይንም ጊዜ ወስነዋል። 

ኬሊ በዚህ ውድድር ሁለተኛ ምር
🧹 Cleaning HTML for Telegram: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ም...
✅ HTML cleaned for Telegram: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ም...
🧹 After HTML cleaning: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ምርጥ ተጫዋች ተወዳዳሪ ሆነች በእንግሊዝ እና ስፔን መዋቅር ውስጥ አስቀድሞ ገንዘብ በማድረግ ለግምባር ወይንም ጊዜ ወስነዋል። ኬሊ በዚህ ውድድር ሁለተኛ ምርጥ 
🧹 Cleaning HTML for Telegram: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ም...
✅ HTML cleaned for Telegram: ⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ም...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Upload successful! Data: {
  path: 'football_image_1753935416570.png',
  id: '4e13aa8e-08cf-4f8d-8bfc-f19bde83d2b3',
  fullPath: 'generated-images/football_image_1753935416570.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753935416570.png
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753935416570.png
🧹 HTML validation complete. Clean text length: 388
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ Successfully sent to AfircaSportCenter
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
📊 Image downloaded successfully: 1707067 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
🗑️ Deleted football_image_1753935416570.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753935733658',
  channel_ids: 1
}
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753935735752',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎫 Evaluating smart coupon for news in am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 4941ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 527ms
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 531ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:16:32.160Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 26,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:16:32.193Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 41,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753935416570.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753935416570.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 5264ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 5501ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753935738477',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 118ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:16:32.115Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 44,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:22:24.207Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:22:24.265Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:22:24.501Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:22:25.191Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:22:25.251Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:22:25.486Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Message sent successfully to @africansportdata
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Successfully sent to AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753935747813',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 109ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:26.980Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 39,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753935746165',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753935747930',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753935748000',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 101ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:27.094Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 17,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753935746256',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 106ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:27.292Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753935746466',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🤖 AI Result for am: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ ኬሊ በእንግሊዝ ወንድሞች የተደረገው ድምፅ ላይ የእርሷን የእግር ኳስ ዝምን ዝምና እና ወደ ኢንዱስትሪ አስተዋይ አላቸዋል።

ኬሊ እንደ መሪ ተጫዋች በፍርድ ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማቅረብ ይችላል። በመሆኑም በክርክር ጊዜው የተወሰኑት የአንደኛ ወቅት ውድድር ወርድ 1-1 ሆኖ የተጠናቀቀ ነበር። 

ክሎ ኬሊ የቀድሞውን የማርያስ አምላክ የሚያ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት ወዲያ ወይዘር ወይዘር ወቀ የአይነት ማለት አይነት ወይዘር ይገባል።

የእንግሊዝ የሴቶች እግር ኳስ ቡድን ከስፔን በመውደቅ ወቅታዊ ውድድር ከሚካሄድ 1-1 ው...
✅ Using AI result for am
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753935754993.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1546446 bytes
🔍 Checking bucket access...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753935755419.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1688168 bytes
🔍 Checking bucket access...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753935755443.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1588959 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 457
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 342062ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 342341ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 342394ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 343752ms
 POST /api/automation/auto-scheduler 200 in 343809ms
 POST /api/automation/auto-scheduler 200 in 343762ms
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753935754993.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753935754993.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753935754993.png
🧹 HTML validation complete. Clean text length: 450
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753935755419.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753935755419.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753935755419.png
🧹 HTML validation complete. Clean text length: 418
✅ Upload successful! Data: {
  path: 'football_image_1753935755443.png',
  id: '21a81d9a-83f6-48c5-8b24-0317c1bef9b0',
  fullPath: 'generated-images/football_image_1753935755443.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753935755443.png
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 1546446 bytes
📊 Image downloaded successfully: 1688168 bytes
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753935755443.png
🧹 HTML validation complete. Clean text length: 385
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት ወዲያ ወይዘር ወይዘር ወቀ የአይነት ማለት አይነት ወይዘር ይገባል።

የእንግሊዝ የሴቶች እግር ኳስ ቡድን ከስፔን በመውደቅ ወቅታዊ ውድድር ከሚካሄድ 1-1 ው
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት ወዲያ ወይዘር ወይዘር ወቀ የአይነት ማለት አይነት ወይዘር ይገባል። የእንግሊዝ የሴቶች እግር ኳስ ቡድን ከስፔን በመውደቅ ወቅታዊ ውድድር ከሚካሄድ 1-1 ውስ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማቅረብ ይችላል። በመሆኑም በክርክር ጊዜው የተወሰኑት የአንደኛ ወቅት ውድድር ወርድ 1-1 ሆኖ የተጠናቀቀ ነበር። 

ክሎ ኬሊ የቀድሞውን የማርያስ አምላክ የሚያ
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማ...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማ...
🧹 After HTML cleaning: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማቅረብ ይችላል። በመሆኑም በክርክር ጊዜው የተወሰኑት የአንደኛ ወቅት ውድድር ወርድ 1-1 ሆኖ የተጠናቀቀ ነበር። ክሎ ኬሊ የቀድሞውን የማርያስ አምላክ የሚያሳይ
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማ...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ ኬሊ በእንግሊዝ ወንድሞች የተደረገው ድምፅ ላይ የእርሷን የእግር ኳስ ዝምን ዝምና እና ወደ ኢንዱስትሪ አስተዋይ አላቸዋል።

ኬሊ እንደ መሪ ተጫዋች በፍርድ 
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ...
🧹 After HTML cleaning: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ ኬሊ በእንግሊዝ ወንድሞች የተደረገው ድምፅ ላይ የእርሷን የእግር ኳስ ዝምን ዝምና እና ወደ ኢንዱስትሪ አስተዋይ አላቸዋል። ኬሊ እንደ መሪ ተጫዋች በፍርድ ጊ
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 1588959 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936077888',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 122ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:10.446Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 26,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በታላቅ ድርጅት የእንግሊዝ እግር ኳስ ቡድን በዩሮ 2025 ውድድር ድል አድርጎ የወደደችው ክሎይ ኬሊ የዋነኛ ፍትሕ ዕውቀት አጋለጣ። ኬሊ ወደ ታላቅ ድምፅ ሂደት ተመልሷል እና በፍትሕ ውድድር ወቅት በስፔን በዝቅ የሆነ ውድድር ወቅት የእንግሊዝ ቡድን ወደ ዩሮ ውድድር ወደ ታላቅ ድምፅ ሂደት አድርጎ ወገን አገኙ። \n' +
        '\n' +
        'በዚህ ውድድር እንግሊዝ እና ስፔን በመወዳደር የወደዱት ውድድር በአንድ እና አንድ ወቅት እንደተገናኘ ተመልሷል። ኬሊ ወደ ታላቅ ድምፅ ሂደት ተመልሷል በዚህ ውድድር ውስጥ በተሳትፎ የተቀበለ ወቅት በውስጥ ወደ 3-1 ውድድር ወደ ማስታወቂያ አስቀድመዋል። በኬሊ ዙሪያ ያለው ዕውቀት ማወቅ ገና አለባቸው ይቀርባል። \n' +
        '\n' +
        'ወደ ፊት የኬሊ ወቅት የታላቅ ምርጥ ፍትሕ ወይም ዕውቀት እንደተለወጠ ይቀርባል። \n' +
        '\n' +
        '#እግርኳስ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🗑️ Deleted football_image_1753935755419.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753935755419.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936078146',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message sent successfully to @africansportdata
🗑️ Deleted football_image_1753935754993.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753935754993.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936078286',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 332ms
⚠️ No matches found for channel preferences
✅ Successfully sent to AfircaSportCenter
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:10.348Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 39,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ በዩሮ 2025 አውራጃ ድርጅት ድል የተደረገውን የተለየ የፈርስት ዘይዜ ስርዓት አስተውሏል። ኬሊ ገና እንደዚህ ያለው የድል ምርጥ ዘይዜ ሂደት እንደሆነ እና እንደ ምስሌ ተወልደ ወደ እንግሊዝ መምጣት የተደረገው ድል የተመነጨ ነው።\n' +
        '\n' +
        'ኬሊ የሚለው ወንድም እንደ አንዱ የአለም ተቀባይ የሆኑት በላይ ወደ ስፔን ተቃወም በወደይ ወይንን የቀረበ ድርጅት እንደ እንግሊዝ ተወልደ ተቀባይ የቀረበ የገንዘብ እግር የወቅታዊ ስለአይነት ይወድዳሉ።\n' +
        '\n' +
        'ከዚያ በተመለከተ የቀረበ ዽይዜ ወደ 3-1 ውጤት በየይዜ ዝርዝር የተወሰነበት ይሁን ወይንን በውስጥ ነው። ይህ ድል በላይ ወደ አንዱ የአለምን የቀንድ የውድድር ዝርዝር ይወዳድራሉ።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753935755419.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753935755419.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 375ms
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:10.396Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 29,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቅርጸ ጽሁፍ የተለየ በመሆኑ ለዩሮ 2025 ድል የሚያስቀምጥ በአንደኛ የተመረጡ ቅዱስ ወቅት ትንቢት እንደሚደርስ አስታውቃለሁ። ቆሎ ኬሊ የእንግሊዝ እንደ ምርጥ ተጫዋች ተወዳዳሪ ሆነች በእንግሊዝ እና ስፔን መዋቅር ውስጥ አስቀድሞ ገንዘብ በማድረግ ለግምባር ወይንም ጊዜ ወስነዋል። \n' +
        '\n' +
        'ኬሊ በዚህ ውድድር ሁለተኛ ምርጥ ተጫዋች እንደሆነ በፈተና ትዕይንት ስለተወሰኑ መስክ ላይ አድርጌ ለማድረግ በተወዳዳሪ አገናኝ አስደሳች ወይም በስናማማ ማሳሰብ ዝግጁ ነበር። ይህ የታተበ የመገናኛ አስቀድሞ እንዲሆን በመጀመሪያ ደረጃ ግን በላይ ተጨማሪ ወይም በመጀመሪያ ደረጃ ይህ የመሠረተ ዕውቀት ወይም የማስታወቅያ የሚሆን በምርጥ ተጫዋች ይህ የተለይው ነበር። \n' +
        '\n' +
        'በተጨማሪ የዚህ ውድድር ውስጥ እንደፈለገ የሚያስቀምጥ ዜና የሚ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753935754993.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753935754993.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message recorded successfully
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🗑️ Deleted football_image_1753935755443.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936079401',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 124ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:22:10.376Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁልፍ ተጫዋች ክሎክ ኬሊ በአሜሪካ ውስጥ የተለየ የዋለው አይነት የወቅታዊ ተግባር ምን እንደሚሆን አስታወቃለች። እንግሊዝ እንደገና ወደ አውሮፕ ውድድር አሸነፈች። \n' +
        '\n' +
        'ኬሊ በላይኖሴዝ አውርድ በስፔን ላይ ወቅታዊ ወቅታዊ ይደርሳል እና ከተመረጠ የምርጫ እንደዚህ የሚያሳስባት እንደተባለ እንዲሁ ይጠቀማል። እንግሊዝ ከራሳቸው አሸነፈች 3-1 ውስጥ ወቅታዊ እና አላቃው የሚሆን ይዘው ይቀያየሩ መሆን ቀርበዋል። \n' +
        '\n' +
        'ኬሊ በዚህ የዋለው ተግባር አማካይ መልኩን ለተመረጠ ምርጥ ይዘው ይወዳድሩ። እንግሊዝ ወደ ውስጥ ይህ የሚከብደው እና ይበልጥ ማህበረሰብ ሆነባቸው አምባይ ጋር ይቀያየር።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753935755443.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753935755443.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:05.221Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:05.303Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:05.327Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:05.713Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:06.289Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:06.503Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:28:06.672Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Successfully sent to AfircaSportCenter
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753936088872',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 106ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:28:08.070Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753936087260',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Message sent successfully to @africansportdata
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753936089114',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 109ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:28:08.480Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 23,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753936087670',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753936089393',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 98ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:28:08.579Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753936087777',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753936097904.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1620303 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 446
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 440
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753936097904.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753936097904.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753936097904.png
🧹 HTML validation complete. Clean text length: 465
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 1620303 bytes
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936415440',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 260ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:33:33.718Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 27,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753936413703_7wke2892j',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936416234',
  channel_ids: 1
}
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936416244',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎫 Evaluating smart coupon for news in am
🗑️ Deleted football_image_1753936097904.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753936097904.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 179ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:27:54.730Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በእንግሊዝ የሴቶች እግር ኳስ ቡድን በስፔን ላይ ወደ 3-1 የተጠናቀቀ ውድድር ማስታወሻ በማድረግ ሁለት ጊዜ የአውሮፓ ውድድር ወረዳ ድርጅት ወደ ውድድር ማቅረብ ይችላል። በመሆኑም በክርክር ጊዜው የተወሰኑት የአንደኛ ወቅት ውድድር ወርድ 1-1 ሆኖ የተጠናቀቀ ነበር። \n' +
        '\n' +
        'ክሎ ኬሊ የቀድሞውን የማርያስ አምላክ የሚያሳይ በሆነ የእግር ኳስ መሰረት እንደነበረ መለያየት አድርጎ ይወዳድራል። እንዲሁም በእንግሊዝ ቡድን የአምላክ ድምፅ ይህ ነው የእሱ የማስታወሻ ውድድር ወደ ዋነኛ ውድድር ይችላል። ክሎ ኬሊ የዚህ ጉዳይ ምንም ይወዳድራል። \n' +
        '\n' +
        'ይህ የእሱ የወዳጅ ቴክንክ ሁሉ በሚገኘው የማስታወሻ ውድድር በመላዕክት ውስጥ ይወዳድራል። ክርክር ወደ ውድድር የሚታይ አቅም ይወዳድራል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 219ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:27:55.041Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 34,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በእንግሊዝ እግር ኳስ የተደረገው ዋነኛ የወንድሞች ውድድር ወደ አውሮፓ ማህበረሰብ ወደ 2025 ዓ.ም ዝማኔ እንደገና ወደ ምርጥ ውድድር ይወጣባቸዋል። ችሎይ ኬሊ በእንግሊዝ ወንድሞች የተደረገው ድምፅ ላይ የእርሷን የእግር ኳስ ዝምን ዝምና እና ወደ ኢንዱስትሪ አስተዋይ አላቸዋል።\n' +
        '\n' +
        'ኬሊ እንደ መሪ ተጫዋች በፍርድ ጊዜ ወደ ስፔን በነበረ ውድድር በደረጃ 3-1 ወደ አዳራሽ ውድድር ተሰየር። ወደ ምርጥ ውድድር ወደ ተከታታይ ወደ 1-1 ወንድሞች በወቅታዊ ውድድር ወዲያው ይገናኝ።\n' +
        '\n' +
        'ኬሊ የሚለው የተደረገው የፍርድ አይነት ዝምና ይህ ስለ ምን ይሁን ወይም የተለየ መልኩ ይታወቃል። ይህ ይገናኝ ወደ ምርጥ ውድድር ወደ ዋነኛ ውድድር ወደ 2025 ዓ.ም ዝማኔ ይሁን።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936416413',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 153ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:27:55.106Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለአዲስ የግብይ ቅድሚያ ስለተለመደው የመስታወቂያ ቅድሚያ መንገድ መግለጫ ሰጣት። ኬሊ ወደ ውስጥ ወደ እንግሊዝ ወደ ውድድር ዳግመ የወይዘር ማለት ወዲያ ወይዘር ወይዘር ወቀ የአይነት ማለት አይነት ወይዘር ይገባል።\n' +
        '\n' +
        'የእንግሊዝ የሴቶች እግር ኳስ ቡድን ከስፔን በመውደቅ ወቅታዊ ውድድር ከሚካሄድ 1-1 ውስጥ አለቃ በተወሰነ ምትግማው 3-1 አድረጉ እንዲወድድ የገንዘብ ማለት ይችላል። \n' +
        '\n' +
        'ኬሊ ይህ ውስጥ የታቀደው የፈተና ወይዘር ማለት እንዲህ ይህ የውድድር ስለሆነ የዚህ ውድድር የተደረገ እንዲህ ይህ ወይዘር አይነት ወይዘር ይችላል። ማለት ትምህርቱ ይህ ነው። \n' +
        '\n' +
        'ይህ የእንግሊዝ ሴቶች እግር ኳስ የሚያስተላለፍ መረጃ ናቸው። እነዚህ የመጣል ውድድር የተደረገ ማለት ይችላል። \n' +
        '\n' +
        'ምንጭ: Talksport #እግርኳስዜና #ስፖርት #ዝ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753936097904.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753936097904.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 5020ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:33:43.076Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:33:43.206Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:33:43.763Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:33:44.057Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:33:44.228Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:33:44.749Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753936427094',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753936427148',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Message sent successfully to @africansportdata
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 129ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:33:46.230Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753936425105',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 111ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:33:46.313Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 33,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753936425214',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753936427479',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 116ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:33:46.794Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753936425965',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን አግለጽ። 

ኬሊ ድል ተወዳዳሪ እንደተመለሰ ለሊዮነስ በስፔን ወደ ድል በመለስ የተወዳዳሪ የአስፈላጊ ፈርቅ ወደ ተወዳዳሪ ወደ 3-1 ወደ ውጤት መውጣት ተችሏል...
✅ Using AI result for am
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 337916ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን አግለጽ። 

ኬሊ ድል ተወዳዳሪ እንደተመለሰ ለሊዮነስ በስፔን ወደ ድል በመለስ የተወዳዳሪ የአስፈላጊ ፈርቅ ወደ ተወዳዳሪ ወደ 3-1 ወደ ውጤት መውጣት ተችሏል
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን አግለጽ። ኬሊ ድል ተወዳዳሪ እንደተመለሰ ለሊዮነስ በስፔን ወደ ድል በመለስ የተወዳዳሪ የአስፈላጊ ፈርቅ ወደ ተወዳዳሪ ወደ 3-1 ወደ ውጤት መውጣት ተችሏል። 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936755479',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936755530',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753936755605',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 206ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:39:13.951Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 26,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753936753950_bnfogsqh3',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 191ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:39:13.929Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753936753926_z2jn351ii',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 140ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:39:13.939Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 16,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753936753936_jtrbnqhv7',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 885ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 1244ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 1590ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚያሸነፍ ወንድም ይመለከታል። 

ቆሎይ ከሆነ ግን ወደ ውስጡ የተለየ ፈተና ወደ ውስጡ ሆኖ የሚለው ምርጫ ተቆጣጠረ። ይህ የተነሳው ፈተና በማዕከላዊ ጊዜ እና በ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው። 

በዚህ አይነቱ የድርጅቱ ስለ ማህበረ ሰብ እና ለማህበረ ሰብ ትምህርት የተለያዩ ምክር ያደርጉ አይነት ነን። የእንግሊዝ አስተዳደር የአስፈላጊ ትምህርት ተገ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምርጥ እንደ ሆነ ማስታወሻ ሲያደርግ የሚያደርግ የግዴታ መርምር እንደሆነ አስታወሳቸው ላይ ወደ ሄደ።

ኬሊ እንደ ዳንኪ ቡድን በስፔን ላይ በፍላጎት በተላለፈ ጨዋ...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 367
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 333816ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 334054ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 334050ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው። 

በዚህ አይነቱ የድርጅቱ ስለ ማህበረ ሰብ እና ለማህበረ ሰብ ትምህርት የተለያዩ ምክር ያደርጉ አይነት ነን። የእንግሊዝ አስተዳደር የአስፈላጊ ትምህርት ተገ
🧹 Cleaning HTML for Telegram: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው።...
✅ HTML cleaned for Telegram: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው።...
🧹 After HTML cleaning: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው። በዚህ አይነቱ የድርጅቱ ስለ ማህበረ ሰብ እና ለማህበረ ሰብ ትምህርት የተለያዩ ምክር ያደርጉ አይነት ነን። የእንግሊዝ አስተዳደር የአስፈላጊ ትምህርት ተገንዝ
🧹 Cleaning HTML for Telegram: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው።...
✅ HTML cleaned for Telegram: ⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው።...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚያሸነፍ ወንድም ይመለከታል። 

ቆሎይ ከሆነ ግን ወደ ውስጡ የተለየ ፈተና ወደ ውስጡ ሆኖ የሚለው ምርጫ ተቆጣጠረ። ይህ የተነሳው ፈተና በማዕከላዊ ጊዜ እና በ
🧹 Cleaning HTML for Telegram: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚ...
✅ HTML cleaned for Telegram: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚ...
🧹 After HTML cleaning: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚያሸነፍ ወንድም ይመለከታል። ቆሎይ ከሆነ ግን ወደ ውስጡ የተለየ ፈተና ወደ ውስጡ ሆኖ የሚለው ምርጫ ተቆጣጠረ። ይህ የተነሳው ፈተና በማዕከላዊ ጊዜ እና በተጨ
🧹 Cleaning HTML for Telegram: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚ...
✅ HTML cleaned for Telegram: ⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምርጥ እንደ ሆነ ማስታወሻ ሲያደርግ የሚያደርግ የግዴታ መርምር እንደሆነ አስታወሳቸው ላይ ወደ ሄደ።

ኬሊ እንደ ዳንኪ ቡድን በስፔን ላይ በፍላጎት በተላለፈ ጨዋ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምር...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምር...
🧹 After HTML cleaning: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምርጥ እንደ ሆነ ማስታወሻ ሲያደርግ የሚያደርግ የግዴታ መርምር እንደሆነ አስታወሳቸው ላይ ወደ ሄደ። ኬሊ እንደ ዳንኪ ቡድን በስፔን ላይ በፍላጎት በተላለፈ ጨዋታ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምር...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምር...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937092241',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 218ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:39:13.885Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 29,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል መንገድ የተሰማራውን የፈርቅ ዘዴ አግለጽ። ክሎይ ኬሊ እንግሊዝ ወደ የአውሮፓ ዋርስ ድል እንደተመለሰ የተለየ የፈርቅ ዘዴዋን አግለጽ። \n' +
        '\n' +
        'ኬሊ ድል ተወዳዳሪ እንደተመለሰ ለሊዮነስ በስፔን ወደ ድል በመለስ የተወዳዳሪ የአስፈላጊ ፈርቅ ወደ ተወዳዳሪ ወደ 3-1 ወደ ውጤት መውጣት ተችሏል። ይህ ውድድር ወቅታዊ እና እኩል እንደ 1-1 ተወዳዳሪ ማበርከት ከአስፈላጊ ወቅት በኋላ ነው። \n' +
        '\n' +
        'ክሎይ ኬሊ የዚህ ዕድል በሚመለክት የፈርቅ ዘዴ ነገር ይወዳድሩ እና የታወቀ ተወዳዳሪ እንደ ተመለሰ ነው። ይህ የእርስዎን ድል ይጠብቁ። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:44:59.118Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753937104229.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1182504 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753937104229.png',
  id: '06444d8e-0924-4506-bc95-9a09041c7a78',
  fullPath: 'generated-images/football_image_1753937104229.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937104229.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937104229.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937106733',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 118ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:45:05.824Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 34,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753937105824_u9tc1cvtx',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937104229.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753937107815.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1218128 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753937107815.png',
  id: '6848ab9a-dcd4-43cf-8bb4-6e0aa9b9dc87',
  fullPath: 'generated-images/football_image_1753937107815.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937107815.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937107815.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937109877',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 114ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:45:09.156Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 18,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753937109156_g0u3lmxz0',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937107815.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 3334ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 429ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753937113857.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1654578 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753937114834.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1546170 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753937113857.png',
  id: 'ac1356d1-4bc9-4c6f-9f13-a78502fb2dd8',
  fullPath: 'generated-images/football_image_1753937113857.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937113857.png
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937113857.png
🧹 HTML validation complete. Clean text length: 432
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 448
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 327109ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 324050ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753937114834.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753937114834.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753937114834.png
🧹 HTML validation complete. Clean text length: 436
📊 Image downloaded successfully: 1546170 bytes
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Message sent successfully to @africansportdata
📊 Image downloaded successfully: 1654578 bytes
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937436644',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message sent successfully to @africansportdata
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 151ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:44:49.984Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 39,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ትንቢት ከእንግሊዝ እና ከአውሮፓ ማህበረሰብ በደስታ የተሞላ ወቅት አድርጎ ወንድሞች እና እንደአምላክ በሚያመለክታቸው ወገን የሚያስታውሱ ታሪክ ወቅታዊ ነው። \n' +
        '\n' +
        'በዚህ አይነቱ የድርጅቱ ስለ ማህበረ ሰብ እና ለማህበረ ሰብ ትምህርት የተለያዩ ምክር ያደርጉ አይነት ነን። የእንግሊዝ አስተዳደር የአስፈላጊ ትምህርት ተገንዝባበት እና ትምህርት ከእንግሊዝ ማህበረሰብ ወደ ማህበረሰብ ይህ ይሆናል። \n' +
        '\n' +
        'እንደዚህም ወደ ተለዋዋጭ ይዘው አዲስ ምርጥ ወገን የሚሞላ ወንድሞች እና ወቅት ወይም አንድ ወገን የሚሞላ ይኖራል። \n' +
        '\n' +
        'በማለት የእንግሊዝ እና የሱስታ አስተዳደር ለመሆን ማህበረሰብ ወይም ከማህበረሰቡ ተለዋዋጭ ወገን ይሁን ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወይም ወ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message recorded successfully
⚠️ No matches found for channel preferences
✅ Message sent successfully to @africansportdata
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Successfully sent to AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
✅ Message recorded successfully
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🗑️ Deleted football_image_1753937114834.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753937114834.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937437584',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 180ms
🗑️ Deleted football_image_1753937113857.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:44:49.995Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቻሎይ ኬሊ የእንግሊዝ ዳንኪ ቡድን ወደ አውሮፓዊ ምርጥ እንደገና ወደ ምርጥ ወደኋላ የሚያወጣ የግል ግዴታ ዝርዝር አጋርዋል። ኬሊ የዚህ ድርጅት የወቅቱ ምርጥ እንደ ሆነ ማስታወሻ ሲያደርግ የሚያደርግ የግዴታ መርምር እንደሆነ አስታወሳቸው ላይ ወደ ሄደ።\n' +
        '\n' +
        'ኬሊ እንደ ዳንኪ ቡድን በስፔን ላይ በፍላጎት በተላለፈ ጨዋታ በአስተያየት ወደ አውሮፓዊ አሸናፊ ሆነ፣ የምርጥ የእንግሊዝ ዳንኪ ቡድን ወደ ውስጥ ይሰማል። በዚህ ወቅት እንደሆነ የዘገይ የግዴታ ምርጥ ይዘብሻቸው 3-1 ወደ ምርጥ ቡድን ለአስተያየት ይወውው።\n' +
        '\n' +
        'ይህ ጨዋታ በተለምዱ ጊዜ 1-1 በመጨረሻ ወደ እንግሊዝ ዳንኪ በደረጃ ይሰማል። ኬሊ የዚህ ዝንባሌ የሚያስታወስ ይዘብሻቸው ወደ ቡድን ይወውው።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753937114834.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753937114834.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937437770',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 348ms
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:44:49.963Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 30,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በአውሮፓ ግምገማ 2025 ውስጥ የእንግሊዝ ቡድን የወይኗ የተለየ ፈተና እንዴት ወደ ስኬት ገባች በተባለው ተወዳዳሪው ተጋደል በአውሮፓ ግምገማ እንደገና የሚያሸነፍ ወንድም ይመለከታል። \n' +
        '\n' +
        'ቆሎይ ከሆነ ግን ወደ ውስጡ የተለየ ፈተና ወደ ውስጡ ሆኖ የሚለው ምርጫ ተቆጣጠረ። ይህ የተነሳው ፈተና በማዕከላዊ ጊዜ እና በተጨማሪ ጊዜ በማቋረጥ አቀባይ ነበር። \n' +
        '\n' +
        'እንደ ወደ ስፖርት ጋዜጣ የተላከው ታዋቂው ተጋደል አዝማሪ ተወዳዳሪው ወደ አስተዳደር ወይንም ወይን በእንግሊዝ መሆን ለአለም አቀፍ ዝና ይመለከታል። \n' +
        '\n' +
        'በማጠቃለያ የዚህ ዓለም ጉዞ የተወዳዳሪው በመጀመሪያ ላይ የገባው ጊዜ ወደ ወደ ተጠቃሚ ወይን ወይን ያም በተነሱት ውስጥ ወይን ይህ ወይን ይታወቃል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753937113857.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753937113857.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No matches found for channel preferences
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:50:43.314Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:50:44.696Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:50:45.261Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937774089',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753937774159',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 203ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:50:34.230Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 28,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 181ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T04:50:34.189Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:56:21.151Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T04:56:21.317Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ Error editing daily content with AI: APIConnectionTimeoutError: Request timed out.
    at OpenAI.makeRequest (webpack-internal:///(rsc)/./node_modules/openai/core.mjs:361:23)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runNextTicks (node:internal/process/task_queues:64:3)
    at listOnTimeout (node:internal/timers:540:9)
    at process.processTimers (node:internal/timers:514:7)
    at async DailyWeeklySummaryGenerator.aiEditDailyContent (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:1079:30)
    at async DailyWeeklySummaryGenerator.generateDailyContent (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:363:33)
    at async DailyWeeklySummaryGenerator.generateDailySummary (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:71:46)
    at async DailyWeeklySummaryGenerator.generateSummary (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:34:24)
    at async ContentRouter.generateDailySummaryContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:418:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:53:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  status: undefined,
  headers: undefined,
  request_id: undefined,
  error: undefined,
  code: undefined,
  param: undefined,
  type: undefined
}
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938113102',
  channel_ids: 1
}
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938113140',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎫 Evaluating smart coupon for news in am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938113204',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 261ms
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 305ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:01:51.382Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753938111382_s878m7468',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:01:51.251Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 39,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753938111217_20xl4a77c',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 243ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:01:51.395Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753938111395_2yjvglf5t',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 949ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 1299ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 1326ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 2109ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753938128143.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1161351 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753938128143.png',
  id: 'f4782048-f6ab-4da6-9ed2-04741a2fead4',
  fullPath: 'generated-images/football_image_1753938128143.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753938128143.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753938128143.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938130403',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 113ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:02:09.463Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 42,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753938129463_mtdz1w9qk',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753938128143.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግሊዝን ወደ የአውሮፓ ድምፅ እንደ ተዋዋለ ያስተዋወቃል።

ኬሊ ወደ ዚህ በምግባር ዉስጥ ያለውን ወንጌል እንደ አንቀጽ እንደተቀበለ በዚህ ውድድር አስቀድሞ በፈት...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እንደ ተመለሰ ወንድም ተስፋ ያደረገች። 

ክሎይ ኬሊ እንደ ተማሪ ምርጥ ምርጥ ተወዳዳሪዎች በስፔን ላይ በወርዳዊ ግጥም ውስጥ እንደ ወደፊቱ ወደ 3-1 የሚያስተ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እንደ የወንዶች ይከውን አስቀድሞ ከእንግሊዝ ወንድሞች ወደ ዩሮፕ ተወዳዳሪ ድምፅ ሆኖ ወደ እንግሊዝ ምርጥ ውድድር በመከታተል የማለት ቅድሚያ መዋቅር በሙሉ ይዞ ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን በአንድ ወቅት ውድድር በወደቀ ወቅት ወይም በከፍተኛ ጊዜ የተወዳዳሪ ውድድር ከወቅታዊ ተግባር ጋር እንዲያወጣ የተሰጠውን ቦታ ይገኛል።

የዚህ ውድድር ውስጥ ኬ...
✅ Using AI result for am
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 277056ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 277134ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 276776ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 277158ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 260140ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን በአንድ ወቅት ውድድር በወደቀ ወቅት ወይም በከፍተኛ ጊዜ የተወዳዳሪ ውድድር ከወቅታዊ ተግባር ጋር እንዲያወጣ የተሰጠውን ቦታ ይገኛል።

የዚህ ውድድር ውስጥ ኬ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን በአንድ ወቅት ውድድር በወደቀ ወቅት ወይም በከፍተኛ ጊዜ የተወዳዳሪ ውድድር ከወቅታዊ ተግባር ጋር እንዲያወጣ የተሰጠውን ቦታ ይገኛል። የዚህ ውድድር ውስጥ ኬሊ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግሊዝን ወደ የአውሮፓ ድምፅ እንደ ተዋዋለ ያስተዋወቃል።

ኬሊ ወደ ዚህ በምግባር ዉስጥ ያለውን ወንጌል እንደ አንቀጽ እንደተቀበለ በዚህ ውድድር አስቀድሞ በፈት
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግሊዝን ወደ የአውሮፓ ድምፅ እንደ ተዋዋለ ያስተዋወቃል። ኬሊ ወደ ዚህ በምግባር ዉስጥ ያለውን ወንጌል እንደ አንቀጽ እንደተቀበለ በዚህ ውድድር አስቀድሞ በፈትሽ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እንደ ተመለሰ ወንድም ተስፋ ያደረገች። 

ክሎይ ኬሊ እንደ ተማሪ ምርጥ ምርጥ ተወዳዳሪዎች በስፔን ላይ በወርዳዊ ግጥም ውስጥ እንደ ወደፊቱ ወደ 3-1 የሚያስተ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እንደ ተመለሰ ወንድም ተስፋ ያደረገች። ክሎይ ኬሊ እንደ ተማሪ ምርጥ ምርጥ ተወዳዳሪዎች በስፔን ላይ በወርዳዊ ግጥም ውስጥ እንደ ወደፊቱ ወደ 3-1 የሚያስተዳደ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እንደ የወንዶች ይከውን አስቀድሞ ከእንግሊዝ ወንድሞች ወደ ዩሮፕ ተወዳዳሪ ድምፅ ሆኖ ወደ እንግሊዝ ምርጥ ውድድር በመከታተል የማለት ቅድሚያ መዋቅር በሙሉ ይዞ 
🧹 Cleaning HTML for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እ...
✅ HTML cleaned for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እ...
🧹 After HTML cleaning: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እንደ የወንዶች ይከውን አስቀድሞ ከእንግሊዝ ወንድሞች ወደ ዩሮፕ ተወዳዳሪ ድምፅ ሆኖ ወደ እንግሊዝ ምርጥ ውድድር በመከታተል የማለት ቅድሚያ መዋቅር በሙሉ ይዞ 
🧹 Cleaning HTML for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እ...
✅ HTML cleaned for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 226 news items in 0ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 455
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 369
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 456
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 443
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 325030ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 325927ms
 POST /api/automation/auto-scheduler 200 in 605141ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📊 Image downloaded successfully: 231701 bytes
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938720604',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 213ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:06:30.825Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 43,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የአስተያየት እና የተለየ ግዛት ስለተመረጡት የፈተና ዘዴ መረጃ አጋር አድርጋለች። ክሎይ ኬሊ እንግሊዝን እንደ አዳዲስ አስተዋጽኦ ወደ አውሮፕ እንደ ተመለሰ ወንድም ተስፋ ያደረገች። \n' +
        '\n' +
        'ክሎይ ኬሊ እንደ ተማሪ ምርጥ ምርጥ ተወዳዳሪዎች በስፔን ላይ በወርዳዊ ግጥም ውስጥ እንደ ወደፊቱ ወደ 3-1 የሚያስተዳደር ቀድሞ የቀረበ እና በወርዳዊ ምንጭ ውስጥ ወደ አውሮፕ በተቀረበ የምርጥ ምርጥ ጆሮዋን አድርጋለች። \n' +
        '\n' +
        'የጨዋታው ውሳኔ እንደ 1-1 አበል ወደ ዋዜም ወደ ሁለት አመታት የተመለከተ ውሳኔ የተወሰነ እና ወደ ላይ የዘርግት ወደ 3-1 የተወሰነ ውሳኔ ይኖረዋል። \n' +
        '\n' +
        'ይህ የእንግሊዝ እንኳን ወደ አውሮፕ ዋዜም የተለየ የተመረጡት ተወዳዳሪዎች አስተዋቄ ነው። ክሎይ ኬሊ በቀድሞ ቀን ወደ ዋዜም ወደ ወንዝ ወደ ዋዜም',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 5194ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 238, Unique: 226
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 226 news items
✅ Fetched 226 news items in 5448ms
🏆 Scoring 226 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No matches found for channel preferences
✅ Message sent successfully to @africansportdata
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938725870',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938725941',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 108ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:06:30.809Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በዩሮ 2025 ውድድር ውስጥ እንግሊዝ ወንድሞች ወደ ምርጥ ውድድር ይወርዳሉ፣ ክሎይ ከሌባ የተነሱትን የቅድሚያ መርጃዎች አስቀድሞ ይህን ያረጋግጣል። እሷ እንደ የወንዶች ይከውን አስቀድሞ ከእንግሊዝ ወንድሞች ወደ ዩሮፕ ተወዳዳሪ ድምፅ ሆኖ ወደ እንግሊዝ ምርጥ ውድድር በመከታተል የማለት ቅድሚያ መዋቅር በሙሉ ይዞ ወደ ተወዳዳሪ ይገባል። \n' +
        '\n' +
        'ክሎይ እንደ ምርጥ የውድድር ተወዳዳሪ ወይንም እንደ ኢንግሊዝ ወንዶች እንደ አስተዳደር የተነሱትን የቅድሚያ መርጃ ይታወቃል። አዲስ የዲስታንስ ውድድር ውስጥ ከሠላም ወደ 3-1 የተወዳዳሪ ውድድር ይህን ያደርጋል። \n' +
        '\n' +
        'በዚህ ሁኔታ ክሎይ ወደ አንዱ ወደ ማንበብ ይወርዳሉ፣ አሁን ሁሉም ወደ እርሷ ይገኛሉ። እንደ ተወዳዳሪ ይወርዳሉ። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938725999',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 107ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:06:30.791Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ በአውሮፓ ውድድር 2025 ውድድር ውስጥ የተወዳዳሪ የተጫዋቾች ስታዊ የግብዣ መልክ እንዴት እንደሚሰራ ያስታውቃል። ኬሊ እንግሊዝ ወጣቶች በስፔን በአንድ ወቅት ውድድር በወደቀ ወቅት ወይም በከፍተኛ ጊዜ የተወዳዳሪ ውድድር ከወቅታዊ ተግባር ጋር እንዲያወጣ የተሰጠውን ቦታ ይገኛል።\n' +
        '\n' +
        'የዚህ ውድድር ውስጥ ኬሊ በአንድ እግር ተሳታፊዎች እንደምታወቅ የተወዳዳሪነት ወይም የመደባይ ውድድር ላይ የተሳሳተ ወይም የተወዳዳሪ ውድድር ይወስዳል። ኬሊ በዚህ ውድድር በመረጃ 3-1 ውድድር ማለት በሚል ቦታ ተወዳዳሪነት እንዳለ ይገኛል።\n' +
        '\n' +
        'የዚህ ውድድር ታሪክ አለው። ኬሊ ግን በዚህ ውድድር የተሰጠውን በወይም የተወዳዳሪ ቡድን በአንድ ዓለም የተወሰነ ወይም የተወዳዳሪ ቡድን ያነቃቃል።\n' +
        '\n' +
        'ምንጭ: #እግርኳስዜና #ስፖርት #ዝ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753938726087',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 111ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:06:30.742Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 16,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለአዲስ የተለመደ ፈትሽ አስተያየት ሰጥታ የኢየርዮ 2025 ድል ዝርዝር ገንዘብ ማብራሪያ አድርጋለች። ኬሊ በዚህ እንደ ወንጌል እንደተቀበለ እንግሊዝን ወደ የአውሮፓ ድምፅ እንደ ተዋዋለ ያስተዋወቃል።\n' +
        '\n' +
        'ኬሊ ወደ ዚህ በምግባር ዉስጥ ያለውን ወንጌል እንደ አንቀጽ እንደተቀበለ በዚህ ውድድር አስቀድሞ በፈትሽ እንደ ሞላላ ሶስት በአንዱ የውድድር ውስጥ በዋለ ወደ ኢየርዮ ድል ወይዘዋ ተወዳድራለች።\n' +
        '\n' +
        'ይህ ውድድር ከመደበኛ እና በወቅቱ ጊዜ 1-1 ከተወዳድር በኃላፊ ይወዳድራል። ገንዘብ ይህ ውድድር ሞላ እንደ መርጣ የሚወድድ አስቀድሞ ቀረበ።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 102ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:06:30.838Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 34,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:12:11.657Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:12:12.050Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:12:12.110Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:12:12.287Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:12:12.327Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:12:13.310Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753938735956',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 108ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:12:15.131Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753938734306',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እንግሊዝ እረፍት ቆሞ እንደገና ይሁን በማለት በስፔን በነቃሪ ውድድር ወደ 3-1 ውድድር አለፈ።

እነዚህ ውድድሮች ከ1-1 ወዲያ በማቅረብ መጨረሻ ላይ ሲወድድ እ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊያ ከፍተኛ ድርድር እንደተደረገባት ወደ ምርጥ የሆነው ውድድር ውስጥ አንድ እንደ ድምፅ ቃል አድርገዋል።

ከቀድሞ ውድድር እንደሚታወቀው በምርጥ ውድድር ውስጥ ...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336014ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336155ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 337301ms
 POST /api/automation/auto-scheduler 200 in 337327ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እንግሊዝ እረፍት ቆሞ እንደገና ይሁን በማለት በስፔን በነቃሪ ውድድር ወደ 3-1 ውድድር አለፈ።

እነዚህ ውድድሮች ከ1-1 ወዲያ በማቅረብ መጨረሻ ላይ ሲወድድ እ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እን...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እን...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እንግሊዝ እረፍት ቆሞ እንደገና ይሁን በማለት በስፔን በነቃሪ ውድድር ወደ 3-1 ውድድር አለፈ። እነዚህ ውድድሮች ከ1-1 ወዲያ በማቅረብ መጨረሻ ላይ ሲወድድ እን
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እን...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እን...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊያ ከፍተኛ ድርድር እንደተደረገባት ወደ ምርጥ የሆነው ውድድር ውስጥ አንድ እንደ ድምፅ ቃል አድርገዋል።

ከቀድሞ ውድድር እንደሚታወቀው በምርጥ ውድድር ውስጥ 
🧹 Cleaning HTML for Telegram: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊ...
✅ HTML cleaned for Telegram: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊ...
🧹 After HTML cleaning: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊያ ከፍተኛ ድርድር እንደተደረገባት ወደ ምርጥ የሆነው ውድድር ውስጥ አንድ እንደ ድምፅ ቃል አድርገዋል። ከቀድሞ ውድድር እንደሚታወቀው በምርጥ ውድድር ውስጥ ገ
🧹 Cleaning HTML for Telegram: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊ...
✅ HTML cleaned for Telegram: ⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753939057741',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 351ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:11:58.249Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 18,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 743ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 1143ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:17:45.169Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:17:46.174Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753939068811',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 111ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:17:47.972Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 28,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753939067146',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🤖 AI Result for am: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚለው እንዳለ የተወዳዳሪ የግምት ቀዳሚ እንዲያስተዋወቅ ይፈቅደዋል።

ካሊ ሁለተኛ እንደ ታላቅ ታዋቂ ተወዳዳሪ ተገናኝቷል፡፡ የዋለውን ድምፅ በማድረግ በስፔን ተ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰቡ ስለ እርሷ ተወዳዳሪ እንደሆነች የሚያመለክተው ነገር ነው። ኬሊ እንደ ወንጌል መሥራት ይችላል እና አዳዲስ የመጨረሻ ሂደት ይታወቃል።

በእንግሊዝ ቡድን እን...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753939080058.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1587555 bytes
🔍 Checking bucket access...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753939080331.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1535733 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 447
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 342511ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 344051ms
 POST /api/automation/auto-scheduler 200 in 344092ms
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753939080331.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753939080331.png
✅ News generation completed in 342896ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753939080058.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753939080058.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753939080058.png
🧹 HTML validation complete. Clean text length: 407
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 1587555 bytes
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📊 Image downloaded successfully: 231701 bytes
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰቡ ስለ እርሷ ተወዳዳሪ እንደሆነች የሚያመለክተው ነገር ነው። ኬሊ እንደ ወንጌል መሥራት ይችላል እና አዳዲስ የመጨረሻ ሂደት ይታወቃል።

በእንግሊዝ ቡድን እን
🧹 Cleaning HTML for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰ...
✅ HTML cleaned for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰ...
🧹 After HTML cleaning: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰቡ ስለ እርሷ ተወዳዳሪ እንደሆነች የሚያመለክተው ነገር ነው። ኬሊ እንደ ወንጌል መሥራት ይችላል እና አዳዲስ የመጨረሻ ሂደት ይታወቃል። በእንግሊዝ ቡድን እንደ
🧹 Cleaning HTML for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰ...
✅ HTML cleaned for Telegram: ⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰ...
📷 Found existing image in content item: http://localhost:3000/generated-images/football_image_1753939080331.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753939080331.png
🧹 HTML validation complete. Clean text length: 454
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚለው እንዳለ የተወዳዳሪ የግምት ቀዳሚ እንዲያስተዋወቅ ይፈቅደዋል።

ካሊ ሁለተኛ እንደ ታላቅ ታዋቂ ተወዳዳሪ ተገናኝቷል፡፡ የዋለውን ድምፅ በማድረግ በስፔን ተ
🧹 Cleaning HTML for Telegram: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚ...
✅ HTML cleaned for Telegram: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚ...
🧹 After HTML cleaning: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚለው እንዳለ የተወዳዳሪ የግምት ቀዳሚ እንዲያስተዋወቅ ይፈቅደዋል። ካሊ ሁለተኛ እንደ ታላቅ ታዋቂ ተወዳዳሪ ተገናኝቷል፡፡ የዋለውን ድምፅ በማድረግ በስፔን ተወ
🧹 Cleaning HTML for Telegram: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚ...
✅ HTML cleaned for Telegram: ⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📊 Image downloaded successfully: 1535733 bytes
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753939402261',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 122ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:17:35.718Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 25,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁርጥ ክለይ የወርሃዊ ውድድር ክፍለ ጊዜ ውስጥ የአሜሪካ የወንድ እግር ኳስ በዚህ ዓለም እንደ ተወካይ እንዳለ ለወርሃዊ ውድድር ገጽታ እንደገና የአውስትራሊያ ከፍተኛ ድርድር እንደተደረገባት ወደ ምርጥ የሆነው ውድድር ውስጥ አንድ እንደ ድምፅ ቃል አድርገዋል።\n' +
        '\n' +
        'ከቀድሞ ውድድር እንደሚታወቀው በምርጥ ውድድር ውስጥ ገነነ ብሎ ተወካይ የሆነችው ቁርጥ ክለይ እንደ እንግሊዝ ወቅታዊ ውድድር ወስክ አምስት በሚሊዮን የማህበረሰብ አለቃ ሆነች። በሚታወቀው ውድድር ውስጥ መከላከያ ይደርሳል። በመላው ደረጃ ውስጥ በሆነው ውድድር ውስጥ ወደ ሦስት እንደ አምስት ድምፅ ይወርዳል።\n' +
        '\n' +
        'ቁርጥ ክለይ በተቃራኒ የአሡሊያ ወደ እንግሊዝ ወቅታዊ እንደሆነው የመሠረተ ገበሬ ወደ ተለያዩ ውድድሮች ይወዳድራል። እንግሊዝ በስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message recorded successfully
✅ Message sent successfully to @africansportdata
⚠️ No matches found for channel preferences
✅ Successfully sent to AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753939402900',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 122ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:23:20.403Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 28,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በዩሮ 2025 ውድድር ውስጥ የእንግሊዝ ቡድን ወላጅ የሆነችው ክሎይ ኬሊ የእርሷን የወርቅ እና የማይታወቀው የፈተና መልእክት አስተዋይነት አጋለጥ። ማህበረሰቡ ስለ እርሷ ተወዳዳሪ እንደሆነች የሚያመለክተው ነገር ነው። ኬሊ እንደ ወንጌል መሥራት ይችላል እና አዳዲስ የመጨረሻ ሂደት ይታወቃል።\n' +
        '\n' +
        'በእንግሊዝ ቡድን እንደ ዋነኛ ተወዳዳሪ ተገኝታችን እንደ ምርጥ አሳየች በስፔን ቡድን በፈተና ውስጥ 3-1 የሚሉትን ውለድን ወደ ዋነኛ ተወዳዳሪ ወይዘሪ አስተዋይ ይወዳድር። ይህ ውድድር በተመጣጣኝ ሁኔታ የተወሰነ 1-1 ውል ያለው ከሁለት ወቅት ውስጥ ተገኝታቸው አስቀድሞ ይሄደዋል።\n' +
        '\n' +
        'እንደ ወንጌል መሥራት ይችላል ይላል ይህ የገባ ወቅት በሚታወቀው ውለድ ሁሉን ይወዳድር። ኬሊ ይህን እንዳይታወቅ ያበረክባል።\n' +
        '\n' +
        '#ምንም ይታወ',
      language: 'am',
      imageUrl: 'http://localhost:3000/generated-images/football_image_1753939080331.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🗑️ Deleted football_image_1753939080058.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753939080058.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753939403132',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 513ms
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:17:35.765Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 42,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የመለኪያ አይነት የእግር ኳስ ስርዓት ገለጻ አድርጋለች፣ ይህም እንግሊዝ ወደ የአውሮፓ ክብረ ወደ 2025 አይነት ድረስ ይወስዳል። ኬሊ ወደ እንግሊዝ እረፍት ቆሞ እንደገና ይሁን በማለት በስፔን በነቃሪ ውድድር ወደ 3-1 ውድድር አለፈ።\n' +
        '\n' +
        'እነዚህ ውድድሮች ከ1-1 ወዲያ በማቅረብ መጨረሻ ላይ ሲወድድ እንግሊዝ ወደ ታላቅ ምርጫ ይወዳዳሉ። ኬሊ የእግር ኳስ የመለኪያ አይነት የሚሆን ስርዓት አግኝታለች እና ይህ በውድድሩ ወቅት የወደደ ደረጃ እንደ አስተዳደር ያድርገናል።\n' +
        '\n' +
        'እንደ ደቂቀ መዓልት አደረጉ እና የብለጥ ዉሳኔ ይወዳዳል፣ እንዲህ ማለት የገደደ ወይም ለቅቻ ያለው ወይም ማህበረሰብ ይሆናል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753939080058.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753939080058.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 2095ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 2457ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at listOnTimeout (node:internal/timers:540:9)
    at process.processTimers (node:internal/timers:514:7)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:23:30.771Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:23:30.773Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:23:30.780Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:23:31.763Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:23:31.793Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:23:31.816Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🤖 AI Result for am: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር የተወካዩ ወይዘር የተነሳ ይህ ይገባል። በተጨማሪም እንግሊዝ ወዳጅ ግንቦት በሙዚቃ ውስጥ በደረሰ ቁዳን ተመለከቱ።

እንግሊዝ በቅርብ ጊዜ በዋነኛ የውድድር ጨዋ...
✅ Using AI result for am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🤖 AI Result for am: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየች፣ የፈተናውን መልክ በተመለከተ የተወከሰ ዕድል አድርጋለች። 

የአርባ ቀን በመጀመሪያ መዋቅር እና በተጨማሪ ሰዓት ውስጥ ሁለት በሁለት እንደተመለከተ የሚያስ...
✅ Using AI result for am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753939414453',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753939414528',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 109ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:23:33.565Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753939412744',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753939414573',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 106ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:23:33.601Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 43,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753939412786',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 101ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:23:33.612Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753939412784',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753939425255.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1598306 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 342120ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 342226ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 343328ms
 POST /api/automation/auto-scheduler 200 in 343228ms
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753939425255.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753939425255.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753939425255.png
🧹 HTML validation complete. Clean text length: 442
📊 Image downloaded successfully: 1598306 bytes
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየች፣ የፈተናውን መልክ በተመለከተ የተወከሰ ዕድል አድርጋለች። 

የአርባ ቀን በመጀመሪያ መዋቅር እና በተጨማሪ ሰዓት ውስጥ ሁለት በሁለት እንደተመለከተ የሚያስ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየ...
🧹 After HTML cleaning: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየች፣ የፈተናውን መልክ በተመለከተ የተወከሰ ዕድል አድርጋለች። የአርባ ቀን በመጀመሪያ መዋቅር እና በተጨማሪ ሰዓት ውስጥ ሁለት በሁለት እንደተመለከተ የሚያስታወ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር የተወካዩ ወይዘር የተነሳ ይህ ይገባል። በተጨማሪም እንግሊዝ ወዳጅ ግንቦት በሙዚቃ ውስጥ በደረሰ ቁዳን ተመለከቱ።

እንግሊዝ በቅርብ ጊዜ በዋነኛ የውድድር ጨዋ
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር ...
🧹 After HTML cleaning: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር የተወካዩ ወይዘር የተነሳ ይህ ይገባል። በተጨማሪም እንግሊዝ ወዳጅ ግንቦት በሙዚቃ ውስጥ በደረሰ ቁዳን ተመለከቱ። እንግሊዝ በቅርብ ጊዜ በዋነኛ የውድድር ጨዋታ
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753939745549',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 216ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:29:03.909Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753939743898_1jy7qlp0e',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 416ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🗑️ Deleted football_image_1753939425255.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753939425255.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753939746652',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 145ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:23:20.033Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 22,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በብሉይ የውድድር ፍትሕ እንደ ተመለከተ ማህበረሰቡ የእንግሊዝ እንቅስቃሴ ተወዳድር በማድረግ ተወግዷል፡፡ በዚህ ጊዜ በግምት የእንግሊዝ ፈጣሪው ቆሮ ካሊ የሚለው እንዳለ የተወዳዳሪ የግምት ቀዳሚ እንዲያስተዋወቅ ይፈቅደዋል።\n' +
        '\n' +
        'ካሊ ሁለተኛ እንደ ታላቅ ታዋቂ ተወዳዳሪ ተገናኝቷል፡፡ የዋለውን ድምፅ በማድረግ በስፔን ተወዳዳሪዎች ውስጥ የሚገኙትን የተነሳውን ፕላም ተወዳድሮ ይቀርባል፡፡ ይህ ውድድር በአንድ በየሚከተለው ጉዞ ላይ እንደተመለከተ ድምፅ ከፍ ይላቸዋል፡፡ የሁለተኛ የውድድር ዘመን በቀጥታ ይህን ውድድር ይህ የማይረዳ ይቀርባል።\n' +
        '\n' +
        'በዚህ ላይ እንደ ተመለከተ እንደ አለቃ ይወዳድሩ ይሁን ወይም ተመለከተ በነገር ይህን የመግባባት በቀድመ ወይም ማየት ይቻላል፡፡\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753939425255.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753939425255.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:29:13.716Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:29:14.726Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753939757400',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 109ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:29:16.590Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 35,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753939755750',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🤖 AI Result for am: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋል። ኬሊ እንደ ተቀዳዳ እና የሚያምር ታሪክ አድርጎ በወንድሞች ላይ እንደ አምባሳል ተወላጅ ሆኖ በስፔን በወቅቱ የሚወክለውን እና የውስጥ ሰዓት እንደ ተወሰኑ ...
✅ Using AI result for am
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 444
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 420
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336634ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋል። ኬሊ እንደ ተቀዳዳ እና የሚያምር ታሪክ አድርጎ በወንድሞች ላይ እንደ አምባሳል ተወላጅ ሆኖ በስፔን በወቅቱ የሚወክለውን እና የውስጥ ሰዓት እንደ ተወሰኑ 
🧹 Cleaning HTML for Telegram: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋ...
✅ HTML cleaned for Telegram: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋ...
🧹 After HTML cleaning: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋል። ኬሊ እንደ ተቀዳዳ እና የሚያምር ታሪክ አድርጎ በወንድሞች ላይ እንደ አምባሳል ተወላጅ ሆኖ በስፔን በወቅቱ የሚወክለውን እና የውስጥ ሰዓት እንደ ተወሰኑ 
🧹 Cleaning HTML for Telegram: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋ...
✅ HTML cleaned for Telegram: ⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Successfully sent to AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940084451',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 170ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:34:42.656Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753940082654_0eiqjnybu',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940084721',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 155ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:29:03.888Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ቀሊ በዩሮ 2025 ውድድር ውስጥ የሚታወቀው የፈተና እንደሚሆን የተመለከተ መረጃ አጋር። ክሎይ ቀሊ እንግሊዝን በግምባር ውድድር እንደ ተወዳዳሪ አሳየች፣ የፈተናውን መልክ በተመለከተ የተወከሰ ዕድል አድርጋለች። \n' +
        '\n' +
        'የአርባ ቀን በመጀመሪያ መዋቅር እና በተጨማሪ ሰዓት ውስጥ ሁለት በሁለት እንደተመለከተ የሚያስታወቀውን የቡድን ግጥም የእንግሊዝ እንደ ምርጥ ወንጌል የተወዳድረው ስፖርት ውድድር ወቅት ሆኖ እንደሚፈጸመው በምርጥ ዕድል እንደ ወንጌል አድርጋለች። \n' +
        '\n' +
        'በዚህ መሠረት የአርባ እና አንድ ወቅት ተጠናቀቁ በሙሉ ወድቀቅ በውድድር ጨዋታ አድርጋለች። ክሎይ ቀሊ የምርጥ ተወዳዳሪ የሆነውን የፈተና ዝርዝር እንደሚያሳይ ግን የዚህ ዓይነት እንደ ተፈጥሯ ይመለከታል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940084810',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 221ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:29:03.800Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 18,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁምፊ ኦፕር ባለው የውድድር ጨዋታ አንፃር በተነሳ አምሳይ "ቅድሚያ ወይዘር" የተባለው መሳሪያ የተወዳዳሪ ወቅታዊ የተወካዩ ተመልከት እንደዚህ ይህ ውድድር የተወካዩ ወይዘር የተነሳ ይህ ይገባል። በተጨማሪም እንግሊዝ ወዳጅ ግንቦት በሙዚቃ ውስጥ በደረሰ ቁዳን ተመለከቱ።\n' +
        '\n' +
        'እንግሊዝ በቅርብ ጊዜ በዋነኛ የውድድር ጨዋታ በስፔን ቅድሚያ ወይዘር በጨዋታ የወረዳ ክፍል ውስጥ 3-1 በመወዳደር ወይዘር የተወካዩ ውድድር ይወዳዳል። የዚህ ውድድር ወይዘር እንዳይወድም በዝምድናዊ ወንጌል በቅርብ ወንጌል የተነሳ ተመለከቱ።\n' +
        '\n' +
        'በዚህ ውድድር ወይዘር የተወካዩ የሚገኝ ተመለከቱ፣ በእንግሊዝ ባለው ወይዘር የተነሳ ይህ ውድድር የተወካዩ ይወዳዳል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No matches found for channel preferences
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 4314ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 3152ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:34:51.680Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:34:51.682Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:34:52.679Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:34:52.683Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753940095304',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753940095358',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 101ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:34:54.489Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 34,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753940093675',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 104ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:34:54.476Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753940093661',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደመ እንደ ዓለም ወደ ወደ ስፔን በፈተና ወደ ማስታወሻ አድርገዋል እና የዋጋ ወደ 3-1 ወደ አድርገዋል። ይህ ውድድር በአስቀድሞ ወይም በምርጥ ወደ 1-1 ወይም...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለከተ የእንግሊዝ እና የአውሮፓ ውድድር ወቅት ወቅት ዋና ተገናኝ በሙሉ ወይዘረ ይሆን ወለይ።

ቁምፊ ተቀምጦ የእንግሊዝ ቡድን እንደ አንድ በአገር ውድድር ላይ ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753940107043.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1610807 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 338182ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 336718ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 337581ms
✅ Upload successful! Data: {
  path: 'football_image_1753940107043.png',
  id: '68de9102-37c4-44a7-b97b-48bd90b1737a',
  fullPath: 'generated-images/football_image_1753940107043.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753940107043.png
⚠️ URL test failed (might be temporary): TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at async AIImageGenerator.uploadToSupabase (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:83:38)
    at async AIImageGenerator.generateImage (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:170:45)
    at async AIImageGenerator.generateImageFromContent (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:410:28)
    at async TelegramDistributor.handleImageGeneration (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:181:40)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:67:28)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:165:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: Error: read ECONNRESET
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)
      at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753940107043.png
🧹 HTML validation complete. Clean text length: 366
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደመ እንደ ዓለም ወደ ወደ ስፔን በፈተና ወደ ማስታወሻ አድርገዋል እና የዋጋ ወደ 3-1 ወደ አድርገዋል። ይህ ውድድር በአስቀድሞ ወይም በምርጥ ወደ 1-1 ወይም
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደመ እንደ ዓለም ወደ ወደ ስፔን በፈተና ወደ ማስታወሻ አድርገዋል እና የዋጋ ወደ 3-1 ወደ አድርገዋል። ይህ ውድድር በአስቀድሞ ወይም በምርጥ ወደ 1-1 ወይም
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለከተ የእንግሊዝ እና የአውሮፓ ውድድር ወቅት ወቅት ዋና ተገናኝ በሙሉ ወይዘረ ይሆን ወለይ።

ቁምፊ ተቀምጦ የእንግሊዝ ቡድን እንደ አንድ በአገር ውድድር ላይ 
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለ...
🧹 After HTML cleaning: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለከተ የእንግሊዝ እና የአውሮፓ ውድድር ወቅት ወቅት ዋና ተገናኝ በሙሉ ወይዘረ ይሆን ወለይ። ቁምፊ ተቀምጦ የእንግሊዝ ቡድን እንደ አንድ በአገር ውድድር ላይ ወ
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
📊 Image downloaded successfully: 1610807 bytes
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940424653',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940424721',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940424806',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 228ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:40:23.045Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 23,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753940423041_v1ztar67d',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 227ms
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 150ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:40:23.059Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 29,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753940423059_sl0bpilnv',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:40:23.052Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753940423052_60h3df7hc',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ Message sent successfully to @africansportdata
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 601ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Successfully sent to AfircaSportCenter
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 1075ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 1330ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Message recorded successfully
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🗑️ Deleted football_image_1753940107043.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940427240',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 143ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:34:42.625Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁም እንደ ተወሰነ የውድድር ግንባር ይህ የተወሰነ የጊዜ ፈተና ነበር። ክሎይ ኬሊ በዩሮ 2025 ውድድር ውስጥ የተሸነፈውን የግብዣ ቴክኒክ አግለጥ አድርገዋል። ኬሊ እንደ ተቀዳዳ እና የሚያምር ታሪክ አድርጎ በወንድሞች ላይ እንደ አምባሳል ተወላጅ ሆኖ በስፔን በወቅቱ የሚወክለውን እና የውስጥ ሰዓት እንደ ተወሰኑ ወቅት 1-1 በመጨረሻ በተወሰኑ ገንዘብ 3-1 የተወሰነ ውድድር ወደ ግብዣ እንደ ተወዳዳሚ የተሸነፈ ግብዣ ወደ እንግሊዝ ወደ ታላቅ ድርጅት ይወዳድራል። ይህ የወንድሞች ሊያከሰኑት ደርሶ ወደ ጋብዝ ወደ ግብዣ ወደ ጋብዝ ይገባል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753940107043.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753940107043.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:40:33.471Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ በመሆን ወደ ውድድር ይወጣሉ።

ክሎይ ኬሊ በዚህ ቀን እንደ ተወላጅ አምባ ወደ ስፔን ወደ ተደላይ ግብ ወስደው የሚታወቅ ወደ 3-1 የሚያመለክት ወደ ወንድም ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ወደ ወንጌል ይደርሳል። ክሎይ በእንግሊዝ እና እንደ ወንጌል እንዲሆን በግምባር ወደ ስፌላ ይወዳድራል። 

እንግሊዝ ወንጌል ተመርጧል ከሰፊው ወደ ተፈታብ በወን...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖርት ወደ ውድድር ምርጥ ድምፅ ያደርግ እንደ ወደቀለ አሳየ። 

ኬሊ እንደ መሪ እና ተስፋ ማድረግ በማይታወቀው የፈተና ወደ አደረጉን ጎን ለማድረግ ይበለይ ወደ...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 349
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 434
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340683ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340790ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340738ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ በመሆን ወደ ውድድር ይወጣሉ።

ክሎይ ኬሊ በዚህ ቀን እንደ ተወላጅ አምባ ወደ ስፔን ወደ ተደላይ ግብ ወስደው የሚታወቅ ወደ 3-1 የሚያመለክት ወደ ወንድም 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ በመሆን ወደ ውድድር ይወጣሉ። ክሎይ ኬሊ በዚህ ቀን እንደ ተወላጅ አምባ ወደ ስፔን ወደ ተደላይ ግብ ወስደው የሚታወቅ ወደ 3-1 የሚያመለክት ወደ ወንድም ወ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ወደ ወንጌል ይደርሳል። ክሎይ በእንግሊዝ እና እንደ ወንጌል እንዲሆን በግምባር ወደ ስፌላ ይወዳድራል። 

እንግሊዝ ወንጌል ተመርጧል ከሰፊው ወደ ተፈታብ በወን
🧹 Cleaning HTML for Telegram: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ...
✅ HTML cleaned for Telegram: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ...
🧹 After HTML cleaning: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ወደ ወንጌል ይደርሳል። ክሎይ በእንግሊዝ እና እንደ ወንጌል እንዲሆን በግምባር ወደ ስፌላ ይወዳድራል። እንግሊዝ ወንጌል ተመርጧል ከሰፊው ወደ ተፈታብ በወንጌል
🧹 Cleaning HTML for Telegram: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ...
✅ HTML cleaned for Telegram: ⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖርት ወደ ውድድር ምርጥ ድምፅ ያደርግ እንደ ወደቀለ አሳየ። 

ኬሊ እንደ መሪ እና ተስፋ ማድረግ በማይታወቀው የፈተና ወደ አደረጉን ጎን ለማድረግ ይበለይ ወደ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖ...
🧹 After HTML cleaning: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖርት ወደ ውድድር ምርጥ ድምፅ ያደርግ እንደ ወደቀለ አሳየ። ኬሊ እንደ መሪ እና ተስፋ ማድረግ በማይታወቀው የፈተና ወደ አደረጉን ጎን ለማድረግ ይበለይ ወደ ስ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940767471',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 384ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:46:05.913Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 25,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753940765912_vnyfaz1gv',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940767905',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753940767986',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 218ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:40:23.025Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 26,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የተለመዱ የፈተና ዘዴዋን አስቀድሞ አግለጹ፣ እንግማንድ እንደ አውሮፓ ወደ ወደ 2025 እንደ ወደ ተወዳዳሪ ወንጌል ማስረጃ አድርጋለች። ኬሊ ቀደመ እንደ ዓለም ወደ ወደ ስፔን በፈተና ወደ ማስታወሻ አድርገዋል እና የዋጋ ወደ 3-1 ወደ አድርገዋል። ይህ ውድድር በአስቀድሞ ወይም በምርጥ ወደ 1-1 ወይም ወደ አስቀድሞ ወደ ጊዜ በዚህ ውስጥ ተመልሷል። \n' +
        '\n' +
        'ኬሊ የዚህ የፈተና ዘዴ ዋነኛ መረጃ ማስታወሻ እንደ ወደ ወደ ነበር፣ በሌላ መልኩ አድርገዋል። ሁለት አስቀድሞ በማስታወሻ ወደ ወደ ወደ ምንጭ ይገኛል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 145ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:40:22.988Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 16,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁምፊ በእንግሊዝ እና የአውሮፓ ውድድር ላይ የእግር ኳስ አዳራሽ ተከታታይ እንደሆነ ልዩ የገዳይ ስርዓት ይገኛል። በኦክቶበር 2023 በገነዘብ ዙርያ የተመለከተ የእንግሊዝ እና የአውሮፓ ውድድር ወቅት ወቅት ዋና ተገናኝ በሙሉ ወይዘረ ይሆን ወለይ።\n' +
        '\n' +
        'ቁምፊ ተቀምጦ የእንግሊዝ ቡድን እንደ አንድ በአገር ውድድር ላይ ወርድ እየተሰጠ በየአካባቢው የተወቀው ይህ የሚያውቅ ይሆን እንዲሁም የወራት ስርዓት እንደ ምርጥ ይገኛል።\n' +
        '\n' +
        'በክርክር የተወዳዳሪ ውድድር እና በተወሰኑ ሙዚቃ ላይ የተነሱ ዕይታዎች እንደ ገና አካባቢው ይሁን። በዚህ ውድድር ወግዘ የሚያውቅ ይሆን ይህ የወርድ ወቅት ውስጠ የመረጃ ወይዘር ይሆን ወይዘር ይህ የተወዳዳሪ ውድድር የሚኖር ይሆን።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
⚠️ No matches found for channel preferences
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 1539ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:46:14.757Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:46:14.786Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:46:15.751Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753940778392',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 102ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:46:17.552Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753940776749',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🤖 AI Result for am: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚስተዋይ ሊዮን አስተዳደር ላይ የሚያስቀይር ዋጋ ወደ ውስጣዊ እንዲሁም ወደ አውሮፕ እድል መውሰድ ተመለከተ። 

እርሷ የተገነባ ዋና የተቀመጠው በስፔን ይደርሳል...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753940791285.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1600881 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 406
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 457
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340043ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: Error: write EPIPE
      at WriteWrap.onWriteComplete [as oncomplete] (node:internal/stream_base_commons:95:16)
      at WriteWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -32,
    code: 'EPIPE',
    syscall: 'write'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753940791285.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753940791285.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753940791285.png
🧹 HTML validation complete. Clean text length: 391
📊 Image downloaded successfully: 1600881 bytes
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚስተዋይ ሊዮን አስተዳደር ላይ የሚያስቀይር ዋጋ ወደ ውስጣዊ እንዲሁም ወደ አውሮፕ እድል መውሰድ ተመለከተ። 

እርሷ የተገነባ ዋና የተቀመጠው በስፔን ይደርሳል
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚ...
🧹 After HTML cleaning: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚስተዋይ ሊዮን አስተዳደር ላይ የሚያስቀይር ዋጋ ወደ ውስጣዊ እንዲሁም ወደ አውሮፕ እድል መውሰድ ተመለከተ። እርሷ የተገነባ ዋና የተቀመጠው በስፔን ይደርሳል ስ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941110345',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Successfully sent to AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941110428',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 162ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:51:48.301Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753941108301_zzfaihv3a',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 127ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:51:48.134Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753941108133_245uwjlmy',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941110618',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941110693',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 134ms
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:46:05.837Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቻሎይ ኬሊ የእንግሊዝ እግር ኳስ ቡድን ወደ የአውሮፓ ውድድር ድምፅ የሚያደርገውን የተለየ ፈተና ቅንብር ይገልጻል። ኬሊ በዚህ ውድድር ላይ ወደ ወደቀለ ስፖርት ወደ ውድድር ምርጥ ድምፅ ያደርግ እንደ ወደቀለ አሳየ። \n' +
        '\n' +
        'ኬሊ እንደ መሪ እና ተስፋ ማድረግ በማይታወቀው የፈተና ወደ አደረጉን ጎን ለማድረግ ይበለይ ወደ ስፖርት ወስክ ነበር። በዚህ ውድድር የምርጥ ውድድር በሚያወዳድሩ ፈተናዎች ውስጥ የእንግሊዝ ቡድን ሴቶች እንደ ምርጥ ድምፅ ወደ ውድድር በመጨረሻ የተገኘ ውድድር በሰዓት ውስጥ መገኘት ተገኝታ ይሆናል።\n' +
        '\n' +
        'ይህ ውድድር 1-1 በማለት ወደ ተወዳዳሪ ወደ ማለት ወደ 3-1 የሚገኘውን ይወጣል። ኬሊ የተወካዩን ፈተና በተመለከተ ይህ የወደቀለ ወደ ዳሰስ ወደ ውድድር ይወዳዳር ይሆናል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 149ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:46:05.883Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በተለይ ክርክር በሚኖረው የግምባር ስርዓት እንደ ወይዘላ ግንዛቤ ተገለጸች። ክሎይ ከልሊ የእንግሊዝ እንደ ወንጌል ተነሳ እና ወደ እንደ ወቅታዊ ግዮች ሲል ወደ ወንጌል ይደርሳል። ክሎይ በእንግሊዝ እና እንደ ወንጌል እንዲሆን በግምባር ወደ ስፌላ ይወዳድራል። \n' +
        '\n' +
        'እንግሊዝ ወንጌል ተመርጧል ከሰፊው ወደ ተፈታብ በወንጌል ፈታታ የምርጥ ወቅታዊ ተቀባይ ይወዳድራል። ይህ መረጃ የሚያገኝ እንደ ወንጌል ወደ ተረጋጋ መድረክ ይታወቃል። \n' +
        '\n' +
        'በአንደኛ ገጽ ላይ የሚኖረው የስፌላ ውርደት በወንጌል ላይ እንዳለ የሚወዳድር ወይኔ ይህንን ይወዳድራል። በሙሉ በሙሉ ግንዛቤ የሚኖረው የስፌላ ውርደት መለእክት ይወዳድራል። \n' +
        '\n' +
        'ምንጭ: #እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message recorded successfully
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
⚠️ No matches found for channel preferences
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 540ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 859ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🗑️ Deleted football_image_1753940791285.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753940791285.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941111830',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 153ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:46:05.897Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 32,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የወይን ግብ ቴክኒክ የሚያሳይ ምርጥ ምስጢር አጋር አወራረው ይነግራል። የእንግሊዝ እንደገና ወደ ውድድር ወደ አውሮፕ ማህበረሰብ አስቀድሞ ወምድድ በመሆን ወደ ውድድር ይወጣሉ።\n' +
        '\n' +
        'ክሎይ ኬሊ በዚህ ቀን እንደ ተወላጅ አምባ ወደ ስፔን ወደ ተደላይ ግብ ወስደው የሚታወቅ ወደ 3-1 የሚያመለክት ወደ ወንድም ወይዘት በመጨረሻ ተወይዘት ገንቦ አስቀድሞ በተዳዳሪ ጊዜ ላይ 1-1 ተወው የተወሰነ በመክተት ወደ ውድድር ይኖራል።\n' +
        '\n' +
        'ይህ ዕድል የእንግሊዝ ሴቶች የእድል ውድድር ወደ ውድድር የሚያመለክት ወደ እንደ ወይዘት እንደ ነበር በተደራሽ ወደ 3-1 የሚያመለክት የሚለወጥ ይሆናል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753940791285.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753940791285.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:51:57.656Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:51:57.980Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:51:58.150Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተነሱ የነበረችው ድርጅት እና ወቅታዊ ወደ ውስጥ ገብቷል።

ኬሊ እንደ ተወዳጅ አምባሳዊ በሆነች እና እንግሊዝ እንደ ሰፊ ወደ እኛ ያለው ወደ አውሮፓ ወደ ዱር ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ አትሌታቸው በላይ ወጥተው እንዲመለሱ የሚያሳይ የዋነኛ ጊዜ የሆነው ወጣብ ወቅታዊ እንደሆነ ማርገት አይቻልም። ክሎይ በአገሩ የወንዶች እግር ኳስ ቡድን ወጣብ ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753941133879.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1559555 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 419
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 341467ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: Error: write EPIPE
      at WriteWrap.onWriteComplete [as oncomplete] (node:internal/stream_base_commons:95:16)
      at WriteWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -32,
    code: 'EPIPE',
    syscall: 'write'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753941133879.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753941133879.png
✅ News generation completed in 341952ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ አትሌታቸው በላይ ወጥተው እንዲመለሱ የሚያሳይ የዋነኛ ጊዜ የሆነው ወጣብ ወቅታዊ እንደሆነ ማርገት አይቻልም። ክሎይ በአገሩ የወንዶች እግር ኳስ ቡድን ወጣብ 
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ...
🧹 After HTML cleaning: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ አትሌታቸው በላይ ወጥተው እንዲመለሱ የሚያሳይ የዋነኛ ጊዜ የሆነው ወጣብ ወቅታዊ እንደሆነ ማርገት አይቻልም። ክሎይ በአገሩ የወንዶች እግር ኳስ ቡድን ወጣብ 
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተነሱ የነበረችው ድርጅት እና ወቅታዊ ወደ ውስጥ ገብቷል።

ኬሊ እንደ ተወዳጅ አምባሳዊ በሆነች እና እንግሊዝ እንደ ሰፊ ወደ እኛ ያለው ወደ አውሮፓ ወደ ዱር 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተነሱ የነበረችው ድርጅት እና ወቅታዊ ወደ ውስጥ ገብቷል። ኬሊ እንደ ተወዳጅ አምባሳዊ በሆነች እና እንግሊዝ እንደ ሰፊ ወደ እኛ ያለው ወደ አውሮፓ ወደ ዱር ወ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተ...
📷 Found existing image in content item: http://localhost:3000/generated-images/football_image_1753941133879.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: true,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753941133879.png
🧹 HTML validation complete. Clean text length: 455
📊 Image downloaded successfully: 1559555 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941454228',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 136ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:51:48.114Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 44,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ከሊ የሚለው የውስጥ እና የሚያስደነግጥ የገንዘብ ዕድል በእሱ ላይ የተሰጠውን እና ወደ አውሮፕ ውድድር ለመውሰድ ያስችለውን ዘዴ አጋለጠ። ክሊኒር ከሚስተዋይ ሊዮን አስተዳደር ላይ የሚያስቀይር ዋጋ ወደ ውስጣዊ እንዲሁም ወደ አውሮፕ እድል መውሰድ ተመለከተ። \n' +
        '\n' +
        'እርሷ የተገነባ ዋና የተቀመጠው በስፔን ይደርሳል ስለሆነም በእርሷ የሚታወቀው ይዘው ገንዘብ እንደዚህ ወደ 3-1 ወደ ውዝዝይ ውስጥ ተገንዘብ አስታውሻዋል። \n' +
        '\n' +
        'ክሊኒር የኢንግላንድ የሴቶች ክለብ በዚህ ዕድል በማቅረብ ትልቅ ድምፅ እንዳለም በስፔን በማንኛውም ዕድል ውስጥ ገንዘብ ይኖረዋል። \n' +
        '\n' +
        'ምንም ነገር እንኳን እንደ ክሊኒር ወደ ላይ በምርጥ ዕድል ይወርዱ ይቀርባሉ። #እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message sent successfully to @africansportdata
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941454717',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 111ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:57:32.683Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 33,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለአውሮፓ በደረጃ ውድድር የተለመደ ግብይት ስለሆነው ምን እንደሆነ አስታውቃለች። ከዚህ በፊት እንግሊዝ ወደ አውሮፓ ወደ ጨዋታ ተመለሰች እንደ ተነሱ የነበረችው ድርጅት እና ወቅታዊ ወደ ውስጥ ገብቷል።\n' +
        '\n' +
        'ኬሊ እንደ ተወዳጅ አምባሳዊ በሆነች እና እንግሊዝ እንደ ሰፊ ወደ እኛ ያለው ወደ አውሮፓ ወደ ዱር ወደ ማህበረሰብ ይደርሳል። የታላቅ ድርጅት ሊያደርጉ ይችላል። የምርጥ ግብይት በመስክ 3-1 ተሳትፎ እና ድርጅቷ በማስታወቂያ 1-1 ወይም ወቅታዊ ወደ ውስጥ ተጻፍ ተወስዷል።\n' +
        '\n' +
        'ይህ የተወሰነው በየአካል ወደ ምርጥ ውድድር እንደ ተወዳጅ ይታወቃል። የክርስቲና መላ ወደ ውስጥ ተጋዥ ሲሆን እና የተወሰነው ድርጅት የወቅታዊ ወደ አውሮፓ ወደ ጉዳይ ምርጥ ወደ ውስጥ ወይም በውስጥ ወደ ምርጥ ይታወቃል።\n' +
        '\n' +
        '#እግር',
      language: 'am',
      imageUrl: 'http://localhost:3000/generated-images/football_image_1753941133879.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
⚠️ No matches found for channel preferences
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:57:42.019Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T05:57:42.160Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 6418ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 448
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 337060ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 337542ms
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 231701 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941796186',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
📺 Found 2 active channels with bots
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 140ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T05:57:32.230Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 41,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁምፊ ይህ የእንግሊዝ እግር ኳስ ቡድን በአውሮፓ ውድድር ጨዋታ በግልጽ ድምፅ እንደወደደ ተገኝቷል። ክሎይ ከሌሊ ወጥተው በስፔን ላይ የሚወርዱትን ድምጽ ይዞ አትሌታቸው በላይ ወጥተው እንዲመለሱ የሚያሳይ የዋነኛ ጊዜ የሆነው ወጣብ ወቅታዊ እንደሆነ ማርገት አይቻልም። ክሎይ በአገሩ የወንዶች እግር ኳስ ቡድን ወጣብ ወርዳት ማሸነፍ ላይ ነበር። ለዚህ በላይ በሚከተለው በግልጽ ሂደት የተፈጥሮ ዘይቤ የሆነ የማዕከል በእንግሊዝ ላይ በሚወርዱት ወይም በሚያደርጉት ሆኖ ይታወቃል። ይህ የዚህ ዓለም የምርጥ ወይም ሴቶች የዋል ወዲያ ይወዳዳል።\n' +
        '\n' +
        'ከዚህ በፊት በውድድሩ የተሳተፉት በውድድር አቀፍ ወጥተው እንዳይነሱ የሚወጡት ጊዜ የህይወት የእንግሊዝ ወልደ ወጣብ በእንግሊዝ የሚወጣና እንደነሱ አቅም ይህ አይቻልም።',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 1750ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:03:22.826Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ አውሮፓ ውድድር ይወዳዳል፣ ይኸውም የእንግላንድ ወንድማማት እንደገና ወደ ውድድሩ ወደእንደ አስቀድሞ ይሄዳል። 

ክሎይ ወደ ዚህ ውድድር የሚገኙት ይኽን እንደ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753941809738.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1309633 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753941809738.png',
  id: '3d42fbaa-12ab-415e-809c-7800fd856c54',
  fullPath: 'generated-images/football_image_1753941809738.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753941809738.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753941809738.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753941812973',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 133ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:03:32.041Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 30,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753941812041_2zj4fjfrb',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753941809738.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 225 news items in 0ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753941818831.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1602426 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 261438ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 244691ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Upload successful! Data: {
  path: 'football_image_1753941818831.png',
  id: '63586360-811b-4549-b05b-fa457b2ea48a',
  fullPath: 'generated-images/football_image_1753941818831.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753941818831.png
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753941818831.png
🧹 HTML validation complete. Clean text length: 388
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ አውሮፓ ውድድር ይወዳዳል፣ ይኸውም የእንግላንድ ወንድማማት እንደገና ወደ ውድድሩ ወደእንደ አስቀድሞ ይሄዳል። 

ክሎይ ወደ ዚህ ውድድር የሚገኙት ይኽን እንደ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ አውሮፓ ውድድር ይወዳዳል፣ ይኸውም የእንግላንድ ወንድማማት እንደገና ወደ ውድድሩ ወደእንደ አስቀድሞ ይሄዳል። ክሎይ ወደ ዚህ ውድድር የሚገኙት ይኽን እንደ ም
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📊 Image downloaded successfully: 1602426 bytes
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 225 news items in 0ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Message sent successfully to @africansportdata
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
🗑️ Deleted football_image_1753941818831.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753942061424',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 358ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:03:14.567Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753941818831.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753941818831.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:07:48.678Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 456
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 388
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 323730ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 324675ms
 POST /api/automation/auto-scheduler 200 in 588353ms
❌ Error fetching channels: {
  message: 'TypeError: fetch failed',
  details: 'TypeError: fetch failed\n' +
    '    at node:internal/deps/undici/undici:12502:13\n' +
    '    at async TelegramDistributor.getChannelsForDistribution (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:126:62)\n' +
    '    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:29:30)\n' +
    '    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:165:40)\n' +
    '    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)\n' +
    '    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)\n' +
    '    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)\n' +
    '    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)\n' +
    '    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038\n' +
    '    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)\n' +
    '    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)\n' +
    '    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)\n' +
    '    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)\n' +
    '    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)\n' +
    '    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)\n' +
    '    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)\n' +
    '    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)\n' +
    '    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)\n' +
    '    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)',
  hint: '',
  code: ''
}
📭 No channels found for language: am
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:13:04.088Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 41,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: {
    success: false,
    channels: 0,
    results: [],
    error: 'No active channels available for language: am'
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ Failed to fetch upcoming matches from league 4335: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at async UnifiedFootballService.fetchFromTheSportsDB (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:1241:42)
    at async UnifiedFootballService.getSmartMatches (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:592:44)
    at async UnifiedFootballService.getSmartMatchesWithScoring (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:84:30)
    at async UnifiedFootballService.getMatchesForContentType (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:376:30)
    at async UnifiedFootballService.getBestMatchForContent (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:629:25)
    at async MatchAnalysisGenerator.getBestMatchForAnalysis (webpack-internal:///(rsc)/./src/lib/content/match-analysis-generator.ts:85:20)
    at async MatchAnalysisGenerator.generateMatchAnalysis (webpack-internal:///(rsc)/./src/lib/content/match-analysis-generator.ts:35:31)
    at async ContentRouter.generateAnalysisContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:289:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:47:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: Error: read ECONNRESET
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)
      at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ Failed to fetch upcoming matches from league 4351: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at async UnifiedFootballService.fetchFromTheSportsDB (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:1241:42)
    at async UnifiedFootballService.getSmartMatches (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:592:44)
    at async UnifiedFootballService.getSmartMatchesWithScoring (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:84:30)
    at async UnifiedFootballService.getMatchesForContentType (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:376:30)
    at async UnifiedFootballService.getBestMatchForContent (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:629:25)
    at async MatchAnalysisGenerator.getBestMatchForAnalysis (webpack-internal:///(rsc)/./src/lib/content/match-analysis-generator.ts:85:20)
    at async MatchAnalysisGenerator.generateMatchAnalysis (webpack-internal:///(rsc)/./src/lib/content/match-analysis-generator.ts:35:31)
    at async ContentRouter.generateAnalysisContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:289:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:47:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: Error: read ECONNRESET
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)
      at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:13:05.168Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
⚠️ No matches found for channel preferences
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ Message sent successfully to @africansportdata
✅ BBC Sport Football: 88 items
✅ BBC Sport Football: 88 items
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753942386114',
  channel_ids: 1
}
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753942386230',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 142ms
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 150ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:07:37.965Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 30,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለኢንግላንድ በአውሮፓ ውድድር ምርጥ የተወዳዳሪ የቆሎ ቴክኒክ ዝርዝር አጋር አድርገዋል። ክሎይ ኬሊ የወደዳቸውን የቆሎ ቴክኒክ ዝርዝር አጋር ወደ አውሮፓ ውድድር ይወዳዳል፣ ይኸውም የእንግላንድ ወንድማማት እንደገና ወደ ውድድሩ ወደእንደ አስቀድሞ ይሄዳል። \n' +
        '\n' +
        'ክሎይ ወደ ዚህ ውድድር የሚገኙት ይኽን እንደ ምርጥ ከሆኑ ጊዜ አስቀድሞ ወደ ዚህ ውድድር ምርጥ ውሳኔ እንደዚሁ ወደ ዚህ ውድድር ወደ ውድድር ወደ ምርጥ ወደ ውድድር ወደ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ ውድድር ወደ ዚህ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:07:37.993Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 17,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 2988ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 237, Unique: 225
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 225 news items
✅ Fetched 225 news items in 3413ms
🏆 Scoring 225 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message sent successfully to @africansportdata
⚠️ No matches found for channel preferences
✅ Successfully sent to AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753942390987',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 113ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:13:09.980Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 43,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753942389189',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:13:14.521Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:13:14.887Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:13:14.957Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:13:15.514Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:13:15.871Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Message sent successfully to @africansportdata
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message sent successfully to @africansportdata
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Successfully sent to AfircaSportCenter
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753942398708',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 111ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:13:17.886Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 17,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753942396787',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753942398920',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 117ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:13:18.298Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 39,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753942396855',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🤖 AI Result for am: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚኖሩት የኦርቶዶክስ መዋቅር ይታወቃል። ቁልፍ ካሬ ጋር የተያያዘ፣ በክርስቶስ ጊዜ የተደረገው ነበር። 

ከዚያ ቁልፍ በከፈታ ወቅት እንግሊዝ ወቅታዊ መልእክት ለ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት ከተነሳበት በኋላ ክርክር አድርጎ በሚኩበት ውድድር ይህ በዚህ በስም ላይ ያለው ባለቤት ተመለከተ የወቅቱ የማሳሰቢያ ሥርዓት ተነሳ። 

በዚህ ወቅት የእንግሊዝ...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340813ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340870ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 341786ms
 POST /api/automation/auto-scheduler 200 in 341803ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት ከተነሳበት በኋላ ክርክር አድርጎ በሚኩበት ውድድር ይህ በዚህ በስም ላይ ያለው ባለቤት ተመለከተ የወቅቱ የማሳሰቢያ ሥርዓት ተነሳ። 

በዚህ ወቅት የእንግሊዝ
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት...
🧹 After HTML cleaning: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት ከተነሳበት በኋላ ክርክር አድርጎ በሚኩበት ውድድር ይህ በዚህ በስም ላይ ያለው ባለቤት ተመለከተ የወቅቱ የማሳሰቢያ ሥርዓት ተነሳ። በዚህ ወቅት የእንግሊዝ አ
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚኖሩት የኦርቶዶክስ መዋቅር ይታወቃል። ቁልፍ ካሬ ጋር የተያያዘ፣ በክርስቶስ ጊዜ የተደረገው ነበር። 

ከዚያ ቁልፍ በከፈታ ወቅት እንግሊዝ ወቅታዊ መልእክት ለ
🧹 Cleaning HTML for Telegram: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚ...
✅ HTML cleaned for Telegram: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚ...
🧹 After HTML cleaning: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚኖሩት የኦርቶዶክስ መዋቅር ይታወቃል። ቁልፍ ካሬ ጋር የተያያዘ፣ በክርስቶስ ጊዜ የተደረገው ነበር። ከዚያ ቁልፍ በከፈታ ወቅት እንግሊዝ ወቅታዊ መልእክት ለማቅ
🧹 Cleaning HTML for Telegram: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚ...
✅ HTML cleaned for Telegram: ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 90 items
✅ BBC Sport Football: 90 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 90 items
✅ BBC Sport Football: 90 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 239, Unique: 227
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 227 news items
✅ Fetched 227 news items in 1462ms
🏆 Scoring 227 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 239, Unique: 227
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 227 news items
✅ Fetched 227 news items in 2104ms
🏆 Scoring 227 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነው። 

ኬሊ የሚለው በዚህ ውድድር በስፔን በከፍተኛ እንደ ገና የአውሮፓ ውድድር ላይ ድል ማለት በዚህ ግጥም የሚኖረውን የዋጋ ገበያ በማድረግ ተለዋዋጭ ውድድር...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው መንግስቱን የተቀበላቸው ዕድል ለማድረግ አስቀድሞ ይቻላል።

ኬሊ የጋሻ ሠርግ ወደ እንግሊዝ አባልነት አድርጎ ወደ ጊዜ ሂደት ወይዘው ድምፅ እንደ ማህበረሰቡ የ...
✅ Using AI result for am
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 446
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 401
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340280ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 340328ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 341511ms
 POST /api/automation/auto-scheduler 200 in 341531ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነው። 

ኬሊ የሚለው በዚህ ውድድር በስፔን በከፍተኛ እንደ ገና የአውሮፓ ውድድር ላይ ድል ማለት በዚህ ግጥም የሚኖረውን የዋጋ ገበያ በማድረግ ተለዋዋጭ ውድድር
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነው። ኬሊ የሚለው በዚህ ውድድር በስፔን በከፍተኛ እንደ ገና የአውሮፓ ውድድር ላይ ድል ማለት በዚህ ግጥም የሚኖረውን የዋጋ ገበያ በማድረግ ተለዋዋጭ ውድድር ወ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው መንግስቱን የተቀበላቸው ዕድል ለማድረግ አስቀድሞ ይቻላል።

ኬሊ የጋሻ ሠርግ ወደ እንግሊዝ አባልነት አድርጎ ወደ ጊዜ ሂደት ወይዘው ድምፅ እንደ ማህበረሰቡ የ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው ...
🧹 After HTML cleaning: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው መንግስቱን የተቀበላቸው ዕድል ለማድረግ አስቀድሞ ይቻላል። ኬሊ የጋሻ ሠርግ ወደ እንግሊዝ አባልነት አድርጎ ወደ ጊዜ ሂደት ወይዘው ድምፅ እንደ ማህበረሰቡ የእ
🧹 Cleaning HTML for Telegram: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው ...
✅ HTML cleaned for Telegram: ⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
📺 Found 2 active channels with bots
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
🔄 Direct fetch failed, trying proxy services for TalkSport
🔄 Trying proxy 1/3 for TalkSport
🔄 Direct fetch failed, trying proxy services for TalkSport
🔄 Trying proxy 1/3 for TalkSport
❌ Image send failed: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:24:32)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:165:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: ConnectTimeoutError: Connect Timeout Error
      at onConnectTimeout (node:internal/deps/undici/undici:6635:28)
      at node:internal/deps/undici/undici:6587:50
      at Immediate._onImmediate (node:internal/deps/undici/undici:6619:13)
      at process.processImmediate (node:internal/timers:478:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17) {
    code: 'UND_ERR_CONNECT_TIMEOUT'
  }
}
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 401
📤 Sending text message to: @africansportdata
📝 Message preview: 📰 ⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት...
❌ Image send failed: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:24:32)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:165:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: ConnectTimeoutError: Connect Timeout Error
      at onConnectTimeout (node:internal/deps/undici/undici:6635:28)
      at node:internal/deps/undici/undici:6587:50
      at Immediate._onImmediate (node:internal/deps/undici/undici:6619:13)
      at process.processImmediate (node:internal/timers:478:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17) {
    code: 'UND_ERR_CONNECT_TIMEOUT'
  }
}
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 446
📤 Sending text message to: @africansportdata
📝 Message preview: 📰 ⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመ...
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943082955',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943083027',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 164ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:18:46.279Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁልፍ ተከታታይ የተባለው የእንግሊዝ እና እስፔን መዋቅር በወቅታዊ ወቅት 1-1 ወይም እንደገና ተመላለስ በመጨረሻ እስከ 3-1 ድምፅ በእንግሊዝ ድርጅት የሚኖሩት የኦርቶዶክስ መዋቅር ይታወቃል። ቁልፍ ካሬ ጋር የተያያዘ፣ በክርስቶስ ጊዜ የተደረገው ነበር። \n' +
        '\n' +
        'ከዚያ ቁልፍ በከፈታ ወቅት እንግሊዝ ወቅታዊ መልእክት ለማቅረብ ይችላል። ከዚያ በዚያ ወቅት የሚመነጭ የተመለከተው የወቅታዊ ጉዞ ይታወቃል። እንግሊዝ መዋቅር ጋር ይቆሞ የሚኖሩት ይታወቃል።\n' +
        '\n' +
        'ከዚያ በአንድ በር ወቅት በመጨረሻ ወቅታዊ ወቅታዊ ወይም ወቅታዊ ስለሚኖሩት ይታወቃል። ይህ ሁሉም የሚገኙት በመንግስት ወቅታዊ ወቅታዊ ወቅታዊ ይታወቃል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 112ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:18:46.313Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በእንግሊዝ እግር ኳስ ቡድን ወደ አውሮፓ ውድድር ውስጥ በሚሳተፍ ወቅት በተመለከተ በተለይ የሚነገር የተመለከተ የከፍተኛ የእግር ኳስ ዝግጅት ውስጥ በመውጣት ከተነሳበት በኋላ ክርክር አድርጎ በሚኩበት ውድድር ይህ በዚህ በስም ላይ ያለው ባለቤት ተመለከተ የወቅቱ የማሳሰቢያ ሥርዓት ተነሳ። \n' +
        '\n' +
        'በዚህ ወቅት የእንግሊዝ አንቀጽ የተመለከተ የእግር ኳስ ቡድን በጣም ውድ ውድድር እንዲሆን የፈተና ውድድር በሚቀጥለው ወቅት አስቀድሞ በአምላክ በኩል ተወዳዳሪ አሳሰባት። \n' +
        '\n' +
        'በዚህ ዙርያ ያለው በጊዜ ውስጥ በአንድ ዝርዝር የስፖርት ውድድር እንዳይቀርበት በማረናው ወቅት በሚያስተምር የተመለከተ በእንግሊዝ ድርጅት የእርግጥ ውድድር አሳሰባት። \n' +
        '\n' +
        'ይህ እንዲሄድ የተለያዩ ውድድር ዝርዝር ለማስተዋል ይህ የወቅቱ አካል የመዋ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
❌ Proxy 1 failed for TalkSport: DOMException [AbortError]: This operation was aborted
    at node:internal/deps/undici/undici:12502:13
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async RSSNewsFetcher.fetchViaProxy (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:151:39)
    at async RSSNewsFetcher.fetchSingleFeed (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:88:30)
    at async eval (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:44:31)
    at async Promise.allSettled (index 2)
    at async RSSNewsFetcher.fetchAllFeeds (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:52:25)
    at async OptimizedNewsContentGenerator.fetchWithRetry (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:146:32)
    at async OptimizedNewsContentGenerator.fetchRSSNewsOptimized (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:103:30)
    at async OptimizedNewsContentGenerator.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:34:29)
    at async ContentRouter.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:172:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:43:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
❌ Proxy 1 failed for TalkSport: DOMException [AbortError]: This operation was aborted
    at node:internal/deps/undici/undici:12502:13
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async RSSNewsFetcher.fetchViaProxy (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:151:39)
    at async RSSNewsFetcher.fetchSingleFeed (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:88:30)
    at async eval (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:44:31)
    at async Promise.allSettled (index 2)
    at async RSSNewsFetcher.fetchAllFeeds (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:52:25)
    at async OptimizedNewsContentGenerator.fetchWithRetry (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:146:32)
    at async OptimizedNewsContentGenerator.fetchRSSNewsOptimized (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:103:30)
    at async OptimizedNewsContentGenerator.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:34:29)
    at async ContentRouter.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:172:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:43:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔄 Trying proxy 2/3 for TalkSport
🔄 Trying proxy 2/3 for TalkSport
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ Proxy 2 failed for TalkSport: Error: Proxy HTTP 403: Forbidden
    at RSSNewsFetcher.fetchViaProxy (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:156:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async RSSNewsFetcher.fetchSingleFeed (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:88:30)
    at async eval (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:44:31)
    at async Promise.allSettled (index 2)
    at async RSSNewsFetcher.fetchAllFeeds (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:52:25)
    at async OptimizedNewsContentGenerator.fetchWithRetry (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:146:32)
    at async OptimizedNewsContentGenerator.fetchRSSNewsOptimized (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:103:30)
    at async OptimizedNewsContentGenerator.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:34:29)
    at async ContentRouter.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:172:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:43:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:24:49.237Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:24:49.269Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ Proxy 2 failed for TalkSport: Error: Proxy HTTP 403: Forbidden
    at RSSNewsFetcher.fetchViaProxy (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:156:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async RSSNewsFetcher.fetchSingleFeed (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:88:30)
    at async eval (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:44:31)
    at async Promise.allSettled (index 2)
    at async RSSNewsFetcher.fetchAllFeeds (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:52:25)
    at async OptimizedNewsContentGenerator.fetchWithRetry (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:146:32)
    at async OptimizedNewsContentGenerator.fetchRSSNewsOptimized (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:103:30)
    at async OptimizedNewsContentGenerator.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:34:29)
    at async ContentRouter.generateNewsContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:172:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:43:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🔄 Trying proxy 3/3 for TalkSport
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🔄 Trying proxy 3/3 for TalkSport
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:24:52.394Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:24:52.476Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753943092499.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1725712 bytes
🔍 Checking bucket access...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Proxy 3 successful for TalkSport
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 240, Unique: 228
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 228 news items
✅ Fetched 228 news items in 23796ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching RSS news: Error: RSS fetch timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:101:83)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
📰 Using expired cached RSS feeds as fallback
✅ Fetched 228 news items in 339241ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Proxy 3 failed for TalkSport: DOMException [AbortError]: This operation was aborted
    at node:internal/deps/undici/undici:12502:13
    at runNextTicks (node:internal/process/task_queues:60:5)
    at process.processTimers (node:internal/timers:511:9)
    at async RSSNewsFetcher.fetchViaProxy (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:151:39)
    at async RSSNewsFetcher.fetchSingleFeed (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:88:30)
    at async eval (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:44:31)
    at async Promise.allSettled (index 2)
    at async RSSNewsFetcher.fetchAllFeeds (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:52:25)
    at async OptimizedNewsContentGenerator.fetchWithRetry (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:146:32)
❌ Error fetching RSS feed https://talksport.com/football/feed/: DOMException [AbortError]: This operation was aborted
    at node:internal/deps/undici/undici:12502:13
    at runNextTicks (node:internal/process/task_queues:60:5)
    at process.processTimers (node:internal/timers:511:9)
    at async RSSNewsFetcher.fetchViaProxy (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:151:39)
    at async RSSNewsFetcher.fetchSingleFeed (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:88:30)
    at async eval (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:44:31)
    at async Promise.allSettled (index 2)
    at async RSSNewsFetcher.fetchAllFeeds (webpack-internal:///(rsc)/./src/lib/content/rss-news-fetcher.ts:52:25)
    at async OptimizedNewsContentGenerator.fetchWithRetry (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:146:32)
✅ TalkSport: 0 items
📰 Total items: 140, Unique: 130
✅ RSS fetch successful on attempt 1
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 448
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ No image generated for daily summary
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
 POST /api/automation/auto-scheduler 200 in 340954ms
 POST /api/automation/auto-scheduler 200 in 341102ms
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: Error: write EPIPE
      at WriteWrap.onWriteComplete [as oncomplete] (node:internal/stream_base_commons:95:16)
      at WriteWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -32,
    code: 'EPIPE',
    syscall: 'write'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753943092499.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753943092499.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753943092499.png
🧹 HTML validation complete. Clean text length: 386
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ Failed to fetch upcoming matches from league 4328: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at async UnifiedFootballService.fetchFromTheSportsDB (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:1241:42)
    at async UnifiedFootballService.getSmartMatches (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:592:44)
    at async UnifiedFootballService.getSmartMatchesWithScoring (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:84:30)
    at async UnifiedFootballService.getMatchesForContentType (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:376:30)
    at async UnifiedFootballService.getBestMatchForContent (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:629:25)
    at async LiveUpdatesGenerator.getCurrentLiveMatch (webpack-internal:///(rsc)/./src/lib/content/live-updates-generator.ts:513:29)
    at async LiveUpdatesGenerator.generateLiveUpdate (webpack-internal:///(rsc)/./src/lib/content/live-updates-generator.ts:1159:31)
    at async LiveUpdatesGenerator.getActiveLiveUpdates (webpack-internal:///(rsc)/./src/lib/content/live-updates-generator.ts:1247:32)
    at async ContentRouter.generateLiveContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:67:29)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:39:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: Error: read ECONNRESET
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)
      at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
📊 Image downloaded successfully: 1725712 bytes
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
📊 Image downloaded successfully: 231701 bytes
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
⚠️ Failed to fetch upcoming matches from league 4335: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at async UnifiedFootballService.fetchFromTheSportsDB (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:1241:42)
    at async UnifiedFootballService.getSmartMatches (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:592:44)
    at async UnifiedFootballService.getSmartMatchesWithScoring (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:84:30)
    at async UnifiedFootballService.getMatchesForContentType (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:376:30)
    at async UnifiedFootballService.getBestMatchForContent (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:629:25)
    at async LiveUpdatesGenerator.getCurrentLiveMatch (webpack-internal:///(rsc)/./src/lib/content/live-updates-generator.ts:513:29)
    at async LiveUpdatesGenerator.generateLiveUpdate (webpack-internal:///(rsc)/./src/lib/content/live-updates-generator.ts:1159:31)
    at async LiveUpdatesGenerator.getActiveLiveUpdates (webpack-internal:///(rsc)/./src/lib/content/live-updates-generator.ts:1247:32)
    at async ContentRouter.generateLiveContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:67:29)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:39:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: Error: read ECONNRESET
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)
      at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Message sent successfully to @africansportdata
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
✅ Successfully sent to AfircaSportCenter
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943410201',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Message sent successfully to @africansportdata
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943410270',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 156ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:09.017Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 19,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753943409016_a2x4r9mxd',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 129ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:09.027Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 44,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753943409026_vd55nbv10',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943410588',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message sent successfully to @africansportdata
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ Successfully sent to AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 368ms
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:24:27.709Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቻሎይ ኬሊ የወንድሞች ውድድር በሚያስተዋይ የአደጋ ስርዓት የወይን ስምምነት ዝማኔ ላይ ምን አለች የተለየ መረጃ አጋር ነበር። ኬሊ በላይና በሳፕ ሚታወቀው መንግስቱን የተቀበላቸው ዕድል ለማድረግ አስቀድሞ ይቻላል።\n' +
        '\n' +
        'ኬሊ የጋሻ ሠርግ ወደ እንግሊዝ አባልነት አድርጎ ወደ ጊዜ ሂደት ወይዘው ድምፅ እንደ ማህበረሰቡ የእንግሊዝ አዉደት ውድድር በሳፕ ላይ ከሚደረገው ውድድር ጋር የተያያዘ ነው።\n' +
        '\n' +
        'የእንግሊዝ ክለብ የሴቶች ቡድን በስፔን እና በመዋዕል አድርገው የተወሰነውን የትምህርት ስርዓት ይወዳድር ማለት ነው እና ይህ ወደ አስተዋይ ውድድር ሂደት ይህ በዜግነት ይኖረዋል።\n' +
        '\n' +
        'ኬሊ በሚያስተዋይ በሚውል ወይዘው ምን ይህ ያለው ጉዳይ ይወስዳል ብለው ይህ ወይዘው ከእንግሊዝ የሴቶች ውድድር ይቀዳል። \n' +
        '\n' +
        'መረጃ ከአንደኛ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ Message recorded successfully
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 240, Unique: 228
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 228 news items
✅ Fetched 228 news items in 757ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 240, Unique: 228
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 228 news items
✅ Fetched 228 news items in 1035ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Message sent successfully to @africansportdata
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🗑️ Deleted football_image_1753943092499.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753943092499.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
⚠️ No matches found for channel preferences
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943411877',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Successfully sent to AfircaSportCenter
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 115ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:24:27.684Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ በአዲስ የማንኛውም የፈረንሳይ ስርዓት ላይ የወደደውን አስተያየት አጋርዋል፡፡ እርሷ እንግሊዝ እንደገና ወደ የአውሮፓ ውድድር ድል እንደተመለሰ ነው። \n' +
        '\n' +
        'ኬሊ የሚለው በዚህ ውድድር በስፔን በከፍተኛ እንደ ገና የአውሮፓ ውድድር ላይ ድል ማለት በዚህ ግጥም የሚኖረውን የዋጋ ገበያ በማድረግ ተለዋዋጭ ውድድር ወደ 3-1 ተወስዷል። ይህ ውድድር በተመለከተ ወደ 1-1 የተጠናቀቀ ነው እና በተጨማሪ ደቂቀ መንግስት ይመለከታል። \n' +
        '\n' +
        'ክሎይ ኬሊ ይህ የወደደው በዚህ የማንኛውም የፈረንሳይ ሥርዓት መረጃ በታላቅ ደጋፊ ላይ ተገኝታል። ይህ የውድድር ውድድር እንደ ምስክር ይገኛል፡፡ \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753943092499.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753943092499.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753943412149',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 115ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:10.768Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753943409793',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753943415553',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 108ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:11.870Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753943410110',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:30:18.031Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:30:18.129Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:30:19.052Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:30:19.133Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
❌ API-Football v3 fixtures by date error: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async APIFootballAPI.makeRequest (webpack-internal:///(rsc)/./src/lib/content/football-intelligence/api/api-football-api.ts:34:26)
    at async APIFootballAPI.getFixturesByDate (webpack-internal:///(rsc)/./src/lib/content/football-intelligence/api/api-football-api.ts:355:26)
    at async FootballAPIManager.getFixturesByDate (webpack-internal:///(rsc)/./src/lib/content/football-intelligence/api/football-api-manager.ts:193:33)
    at async UnifiedFootballService.getMatchesByDate (webpack-internal:///(rsc)/./src/lib/content/unified-football-service.ts:1361:30)
    at async DailyWeeklySummaryGenerator.getTodaysMatches (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:692:33)
    at async DailyWeeklySummaryGenerator.generateDailySummary (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:48:31)
    at async DailyWeeklySummaryGenerator.generateSummary (webpack-internal:///(rsc)/./src/lib/content/daily-weekly-summary-generator.ts:34:24)
    at async ContentRouter.generateDailySummaryContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:418:28)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:53:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: ConnectTimeoutError: Connect Timeout Error
      at onConnectTimeout (node:internal/deps/undici/undici:6635:28)
      at node:internal/deps/undici/undici:6587:50
      at Immediate._onImmediate (node:internal/deps/undici/undici:6619:13)
      at process.processImmediate (node:internal/timers:478:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17) {
    code: 'UND_ERR_CONNECT_TIMEOUT'
  }
}
❌ No fixtures found for date 2025-07-30
📅 No matches found for 2025-07-30
📅 No matches found for 2025-07-30
❌ No matches found for daily summary
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ⚠️ No daily_summary content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:30:22.436Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No daily_summary content could be generated at this time.',
  processing_info: {
    data_source: 'Daily Summary Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 228 news items in 0ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Message sent successfully to @africansportdata
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753943423389',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 122ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:20.925Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 23,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753943420069',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Message sent successfully to @africansportdata
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753943423860',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 103ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:23.179Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 22,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753943420166',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🤖 AI Result for am: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ ምርጥ ወንድ ወገን ተመልሷል። 

ኬሊ ወደ መርኩታቸው በቆሮብ ወይዘር ወገን ታዋቂ ተሰርቷል። እንግሊዝ እንደ መዝገበ ምርጥ ቆሮብ በማዕከላዊ ወገን ወረዳው ወ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753943425683.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1188712 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወደ ወደ የአውሮፕ ድምቀት ወደ ወደ አዳዲስ የዕድል ዝግጅት ወደ ማለት ይወዳድሩ። 

ክሎይ ካርይ የሚለው የሚያውቅ የዘመን እንዴት ይዘው የእንግሊዝ ቡድን ወደ ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን በጉዞ ወደ ውስጥ ተየው ተንስአ ለማንኛውም ወደ ዋዜማ ወይም ወደ ምንዛሬ ይሂዱ ይችላሉ።

ክሎይ ኬሊ ይህን የውድድር ጠባይ ለመጀመር አቀርባለች፣ ይህም ወንበ...
✅ Using AI result for am
✅ Upload successful! Data: {
  path: 'football_image_1753943425683.png',
  id: 'aeb402f6-77be-4560-a860-4623ee226b7b',
  fullPath: 'generated-images/football_image_1753943425683.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943425683.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943425683.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753943427616',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 121ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:30:26.851Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753943426850_7gt2hzwuh',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943425683.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 228 news items in 0ms
🏆 Scoring 228 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳል።

ኬሊ እንደ ታላቅ ተወዳዳሪ በሆነ ሁኔታ ስፔንን በአውሮፓ የሴቶች እግር ኳስ ውድድር ውስጥ በደረጃ 1-1 በማቅረብ በመጨረሻ ማሳያ አድርጎ 3-1 የሚል ው...
✅ Using AI result for am
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 680060ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 680271ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 338785ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 338832ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 326821ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 321539ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ ምርጥ ወንድ ወገን ተመልሷል። 

ኬሊ ወደ መርኩታቸው በቆሮብ ወይዘር ወገን ታዋቂ ተሰርቷል። እንግሊዝ እንደ መዝገበ ምርጥ ቆሮብ በማዕከላዊ ወገን ወረዳው ወ
🧹 Cleaning HTML for Telegram: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ...
✅ HTML cleaned for Telegram: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ...
🧹 After HTML cleaning: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ ምርጥ ወንድ ወገን ተመልሷል። ኬሊ ወደ መርኩታቸው በቆሮብ ወይዘር ወገን ታዋቂ ተሰርቷል። እንግሊዝ እንደ መዝገበ ምርጥ ቆሮብ በማዕከላዊ ወገን ወረዳው ወይዘ
🧹 Cleaning HTML for Telegram: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ...
✅ HTML cleaned for Telegram: ⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን በጉዞ ወደ ውስጥ ተየው ተንስአ ለማንኛውም ወደ ዋዜማ ወይም ወደ ምንዛሬ ይሂዱ ይችላሉ።

ክሎይ ኬሊ ይህን የውድድር ጠባይ ለመጀመር አቀርባለች፣ ይህም ወንበ
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን...
🧹 After HTML cleaning: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን በጉዞ ወደ ውስጥ ተየው ተንስአ ለማንኛውም ወደ ዋዜማ ወይም ወደ ምንዛሬ ይሂዱ ይችላሉ። ክሎይ ኬሊ ይህን የውድድር ጠባይ ለመጀመር አቀርባለች፣ ይህም ወንበር
🧹 Cleaning HTML for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን...
✅ HTML cleaned for Telegram: ⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳል።

ኬሊ እንደ ታላቅ ተወዳዳሪ በሆነ ሁኔታ ስፔንን በአውሮፓ የሴቶች እግር ኳስ ውድድር ውስጥ በደረጃ 1-1 በማቅረብ በመጨረሻ ማሳያ አድርጎ 3-1 የሚል ው
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳል። ኬሊ እንደ ታላቅ ተወዳዳሪ በሆነ ሁኔታ ስፔንን በአውሮፓ የሴቶች እግር ኳስ ውድድር ውስጥ በደረጃ 1-1 በማቅረብ በመጨረሻ ማሳያ አድርጎ 3-1 የሚል ውጤ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወደ ወደ የአውሮፕ ድምቀት ወደ ወደ አዳዲስ የዕድል ዝግጅት ወደ ማለት ይወዳድሩ። 

ክሎይ ካርይ የሚለው የሚያውቅ የዘመን እንዴት ይዘው የእንግሊዝ ቡድን ወደ 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወደ ወደ የአውሮፕ ድምቀት ወደ ወደ አዳዲስ የዕድል ዝግጅት ወደ ማለት ይወዳድሩ። ክሎይ ካርይ የሚለው የሚያውቅ የዘመን እንዴት ይዘው የእንግሊዝ ቡድን ወደ እን
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወ...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753943774113.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1695136 bytes
🔍 Checking bucket access...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753943774241.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1663604 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753943774522.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1578074 bytes
🔍 Checking bucket access...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753943774559.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1547145 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753943774113.png',
  id: '6fd8c307-3d74-4ed9-aa58-12785cefc9b8',
  fullPath: 'generated-images/football_image_1753943774113.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774113.png
✅ Upload successful! Data: {
  path: 'football_image_1753943774241.png',
  id: '1d48280b-f779-4965-bdcd-6da47c379810',
  fullPath: 'generated-images/football_image_1753943774241.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774241.png
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774113.png
🧹 HTML validation complete. Clean text length: 388
❌ Error in sendPhoto: DOMException [AbortError]: This operation was aborted
    at node:internal/deps/undici/undici:12502:13
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runNextTicks (node:internal/process/task_queues:64:3)
    at process.processTimers (node:internal/timers:511:9)
    at async TelegramSender.sendPhoto (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:97:35)
    at async TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:24:32)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:165:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
⏰ Image download/send timeout - skipping URL fallback
❌ Image send failed: DOMException [AbortError]: This operation was aborted
    at node:internal/deps/undici/undici:12502:13
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runNextTicks (node:internal/process/task_queues:64:3)
    at process.processTimers (node:internal/timers:511:9)
    at async TelegramSender.sendPhoto (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:97:35)
    at async TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:24:32)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:165:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 388
📤 Sending text message to: @africansportdata
📝 Message preview: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 417
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
⚠️ Image generation failed - no URL returned
📷 Using fallback image
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
🧹 HTML validation complete. Clean text length: 453
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774241.png
🧹 HTML validation complete. Clean text length: 388
❌ Critical error in uploadToSupabase: TypeError: fetch failed
    at node:internal/deps/undici/undici:12502:13 {
  [cause]: HeadersTimeoutError: Headers Timeout Error
      at Timeout.onParserTimeout [as callback] (node:internal/deps/undici/undici:7569:32)
      at Timeout.onTimeout [as _onTimeout] (node:internal/deps/undici/undici:6659:17)
      at listOnTimeout (node:internal/timers:573:17)
      at process.processTimers (node:internal/timers:514:7) {
    code: 'UND_ERR_HEADERS_TIMEOUT'
  }
}
📂 Fallback: Image saved locally: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753943774559.png
🌐 Generated full URL for Telegram: http://localhost:3000/generated-images/football_image_1753943774559.png
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: http://localhost:3000/generated-images/football_image_1753943774559.png
🧹 HTML validation complete. Clean text length: 423
✅ Upload successful! Data: {
  path: 'football_image_1753943774522.png',
  id: '35acb3fa-19b2-4195-84b7-a84d96378f09',
  fullPath: 'generated-images/football_image_1753943774522.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774522.png
📊 Image downloaded successfully: 1547145 bytes
✅ Message sent successfully to @africansportdata
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774522.png
🧹 HTML validation complete. Clean text length: 454
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📊 Image downloaded successfully: 231701 bytes
📊 Image downloaded successfully: 231701 bytes
🗑️ Deleted football_image_1753943774113.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944095963',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
📊 Image downloaded successfully: 1578074 bytes
📊 Image downloaded successfully: 1663604 bytes
✅ Message sent successfully to @africansportdata
✅ Message sent successfully to @africansportdata
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 241ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:35:49.429Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 17,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774113.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753943774113.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
✅ Message sent successfully to @africansportdata
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message recorded successfully
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ No matches found for channel preferences
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944096498',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🗑️ Deleted football_image_1753943774559.png from Supabase Storage
🗑️ Deleted local file: /Users/idosegev/Downloads/TriRoars/telegrambotsport/public/generated-images/football_image_1753943774559.png
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944096549',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 128ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:35:49.392Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የተለየ የፈርጅ ቅንጅት መለያየት የውድድሩን ዋነኛ መረጃ አጋራ እንደ ምን እንደሚያሳይ ተነግሯል። ክሎይ ኬሊ በእንግሊዝ ቡድን ወቅታዊ ውድድር ወደ ወደ የአውሮፕ ድምቀት ወደ ወደ አዳዲስ የዕድል ዝግጅት ወደ ማለት ይወዳድሩ። \n' +
        '\n' +
        'ክሎይ ካርይ የሚለው የሚያውቅ የዘመን እንዴት ይዘው የእንግሊዝ ቡድን ወደ እንደ ዚህ ግንዛቤ ተቀባ እንደ አዘን በራስ ዋነኛ የሆነ ድርጅት ወደ ሩጫ ወደ ካሳ ኢትዮጵያ ውድድር እንደሆነ ወደ አስተያየት እንደ ዚህ ይገናኝ። \n' +
        '\n' +
        'እንግሊዝ ቡድን የሚገናኝ በእንግሊዝ ቡድን ወደ ይንድ በአውሮፕ ዋነኛ ውድድር አድርገዋል። ክሎይ ኬሊ እንዴት አሳይ እንዴት እንደሚያውቅ ወደ ወደ ኢትዮጵያ ወደ ይንድ ወደ ቅዳሜ አፈር በእንግሊዝ ወደ ይንድ እንደ ዓለም በማለት ይህ ወደ ሩጫ የሆነ የውድ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944096600',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 128ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:35:49.365Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 17,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ከአይነቱ የማስታወቂያ ንዑስ መዋቅር ዕይታዋን አግኝታለች፣ ይህም እንግሊዝ ወደ ውድድሩ ወደ አውሮፓዊ ምርጥ ግጥም ወደ ማህበረሰብ ትርጉም ይደርሳል።\n' +
        '\n' +
        'ኬሊ እንደ ታላቅ ተወዳዳሪ በሆነ ሁኔታ ስፔንን በአውሮፓ የሴቶች እግር ኳስ ውድድር ውስጥ በደረጃ 1-1 በማቅረብ በመጨረሻ ማሳያ አድርጎ 3-1 የሚል ውጤት ለመወሰን ወንጌል ወደ ጎራ በግማሽ አገኙ።\n' +
        '\n' +
        'የወጣቶች ወይዘሮች በማቅረብ የወቅታዊ አድርጎ የተለያዩ ዝግጅቶች በኩል የሚሰጣቸው ክሎይ ኬሊ በሚካየው የንዑስ መዳረሻ የወቅታዊ እና የአንደኛ ድምፅ ይወዳድራል። \n' +
        '\n' +
        'ይህ ድርጊት ወደ ውስጥ ወደ ታላቅ ክብር ይወዳዳል ማለት ይቻላል ከግብርናው እንደ ዕቅፍ ወደ ውስጥ ይወዳዳል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'http://localhost:3000/generated-images/football_image_1753943774559.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753943774559.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 197ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:35:49.179Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁልዋ ኬሊ ለእንግሊዝ ከአውሮፓ ዋነኛ እንደተወሰነ የዋጋ መንገድ ተገለፃ። እሷ ወደ ምርጥ የዋጋ መንገድ ተደርጎ ወንድሜ እንግሊዝ ለአውሮፓን እንደገና እንደ ምርጥ ወንድ ወገን ተመልሷል። \n' +
        '\n' +
        'ኬሊ ወደ መርኩታቸው በቆሮብ ወይዘር ወገን ታዋቂ ተሰርቷል። እንግሊዝ እንደ መዝገበ ምርጥ ቆሮብ በማዕከላዊ ወገን ወረዳው ወይዘር ወዲያው ተወስነዋል። ወዲያው የማዕከላዊ የዋጋ መንገድ በሳይት ማሸነፍ ተደርጎ 3-1 ውድድር ወደ ወይዘር። \n' +
        '\n' +
        'ከዚያ በወንድ ወንድሜ ወተንሣላ ወረዳው ወይዘር ወዲያው የማዕከላዊ የዋጋ መንገድ ተወስነዋል። ቁልዋ ኬሊ ወደ ዚህ ዋጋ መንገድ ወንድ ወንድሜ ወንድሜ ወንድሜ ወ዆ን ተወስነዋል። \n' +
        '\n' +
        'ምንጭ: Talksport #እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Message sent successfully to @africansportdata
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Successfully sent to AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ Message recorded successfully
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🗑️ Deleted football_image_1753943774522.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944098099',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 140ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:35:49.351Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 25,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በእንግሊዝ እግር ኳስ ቡድን ለአደጋ በማቅረብ የሚያስከትለውን ወጣት ተመዘገበ በተለይ የወቅታዊ ዝመና አደረጋለች። በዚህ የተነሳ የእንግሊዝ እግር ኳስ ቡድን በጉዞ ወደ ውስጥ ተየው ተንስአ ለማንኛውም ወደ ዋዜማ ወይም ወደ ምንዛሬ ይሂዱ ይችላሉ።\n' +
        '\n' +
        'ክሎይ ኬሊ ይህን የውድድር ጠባይ ለመጀመር አቀርባለች፣ ይህም ወንበር በጉዞ ወደ ምንዛሬ ይሂዱ በመለያየት ላይ የወጣች የወቅታዊ ዝማኔ ይሆናል። ግን በዚህ የውድድር ሙሉ ግቦች ውስጥ ከሆነ ወጣት ወንበር ንባብ እንዲህ ያለው እንደ ተለያዩ አንድ ይሆናል።\n' +
        '\n' +
        'በአርኪ ሂደት ከነ ወደ እንግሊዝ እግር ኳስ ቡድን ይህ ወጣት ወደ ውስጥ እንዲሆን ይህ ወድ ይቀድማል። ወደ እንግሊዝ ታላቅ ማህበረሰብ አይሆን፣ ይህ ወደ ውስጥ ይሂዱ በምንዛሬ ይገኛል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774522.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753943774522.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message sent successfully to @africansportdata
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ No matches found for channel preferences
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Message recorded successfully
⚠️ No matches found for channel preferences
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🗑️ Deleted football_image_1753943774241.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944101071',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 137ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:35:49.461Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 44,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753943774241.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753943774241.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ No matches found for channel preferences
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:42.780Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:43.366Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:43.537Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:43.810Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:44.464Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating analysis content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:44.811Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:45.483Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🎯 Content Router: Generating live content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:41:47.154Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
✅ Message sent successfully to @africansportdata
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Successfully sent to AfircaSportCenter
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
✅ Content sending allowed: live for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: @africansportdata
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753944107540',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 123ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:41:46.683Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 19,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753944105865',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: live to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'live_updates',
  content_id: 'content_1753944108303',
  channel_ids: 1
}
🎫 Evaluating smart coupon for live_update in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 115ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:41:47.316Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753944106494',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating daily_summary content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944455444.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1159775 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753944455444.png',
  id: 'cd5058fb-d8b4-4284-b149-c94cfc64b4d7',
  fullPath: 'generated-images/football_image_1753944455444.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944455444.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944455444.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944457570',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 178ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:47:36.657Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753944456656_2lokp8wp8',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944455444.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 240, Unique: 229
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 229 news items
✅ Fetched 229 news items in 661ms
🏆 Scoring 229 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
❌ AI editing failed for am, error: AI_TIMEOUT_30_SECONDS
🔍 Error details: Error: AI_TIMEOUT_30_SECONDS
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/news-content-generator.ts:406:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
❌ GPT-Image-1 generation failed: Error: Image generation timeout
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/lib/content/ai-image-generator.ts:156:64)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)
⚠️ Image generation failed - GPT-Image-1 only mode
✅ News generation completed in 244171ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ

⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡

Chloe Kelly has shared the secret behind ...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🧹 After HTML cleaning: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was t
🧹 Cleaning HTML for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
✅ HTML cleaned for Telegram: 📰 የእግር ኳስ ዜና እና ዝማኔ ⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡ Chloe Kelly has shared the secret behind he...
🎨 No existing image found, generating new one...
🎨 Generating image for news content...
🎯 Final image prompt: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating image with GPT-Image-1 model: Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, ce...
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944730244.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1738631 bytes
🔍 Checking bucket access...
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753944730244.png',
  id: '6f4103a4-6535-4ba2-af7d-f51b22b70646',
  fullPath: 'generated-images/football_image_1753944730244.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944730244.png
🌐 URL accessibility test: 200 OK
✅ Image generated successfully
🎨 AI Image generated successfully
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944730244.png
🧹 HTML validation complete. Clean text length: 388
📊 Image downloaded successfully: 1738631 bytes
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
🗑️ Deleted football_image_1753944730244.png from Supabase Storage
🗑️ Image cleanup completed after successful telegram send
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944735508',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 188ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:51:42.118Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '📰 የእግር ኳስ ዜና እና ዝማኔ\n' +
        '\n' +
        '⚽ ከአለም አቀፍ እግር ኳስ ዓለም የደረሰ ወቅታዊ ዜና፡\n' +
        '\n' +
        'Chloe Kelly has shared the secret behind her winning penalty (ቅጣት ምት) technique, after firing England to European glory once again. Kelly was the hero again as the Lionesses beat Spain on penalties, burying the decisive spot-kick to seal a 3-1 result in......\n' +
        '\n' +
        'ለሙሉ ዝርዝር ምንጹን ይመልከቱ።\n' +
        '\n' +
        '🔗 ምንጭ፡ TalkSport\n' +
        '📅 31/7/2025\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  _generatedImage: {
    url: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944730244.png',
    prompt: 'Generate prompts for breaking news photography - action shots, press conferences, stadium scenes, celebration moments, Football Match match, penalty kick, photorealistic, professional sports photography, high resolution, detailed, Ethiopian football culture, African stadium atmosphere, professional sports media quality, looks like real sports news photo',
    filename: 'football_image_1753944730244.png'
  },
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at listOnTimeout (node:internal/timers:540:9)
    at process.processTimers (node:internal/timers:514:7)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:52:21.908Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944745700.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1220457 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944746378.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1132061 bytes
🔍 Checking bucket access...
✅ Upload successful! Data: {
  path: 'football_image_1753944745700.png',
  id: '4c0f3820-964b-4930-bb5e-f0751ee37568',
  fullPath: 'generated-images/football_image_1753944745700.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944745700.png
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944745700.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Upload successful! Data: {
  path: 'football_image_1753944746378.png',
  id: '006aef03-ddaf-4d0e-81ea-70096eb3aeba',
  fullPath: 'generated-images/football_image_1753944746378.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944746378.png
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944746378.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944747628',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944747828.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1287544 bytes
🔍 Checking bucket access...
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 200ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:26.661Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753944746661_vy4hqosol',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944745700.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 229 news items in 0ms
🏆 Scoring 229 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Message sent successfully to @africansportdata
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944748616',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 113ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:27.633Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753944747633_nw6t1x6q0',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944746378.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 229 news items in 0ms
🏆 Scoring 229 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
✅ Upload successful! Data: {
  path: 'football_image_1753944747828.png',
  id: '7927f0df-8a5f-49c1-9172-69bee79255e2',
  fullPath: 'generated-images/football_image_1753944747828.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944747828.png
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944747828.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944749931',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 111ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:29.272Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 37,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753944749272_dedp8knlv',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944747828.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 229 news items in 0ms
🏆 Scoring 229 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944761770.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1199057 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753944761770.png',
  id: '1a387baf-3199-4c71-8b68-667146634148',
  fullPath: 'generated-images/football_image_1753944761770.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944761770.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944761770.png
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: daily_summary for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: AfircaSportCenter
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: @africansportdata
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: daily_summary to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944763843',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 172ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:42.805Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 33,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753944762804_yinh16hy5',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944761770.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating news content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 240, Unique: 229
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 229 news items
✅ Fetched 229 news items in 1465ms
🏆 Scoring 229 news items for channel: AfircaSportCenter
🎯 Channel preferences: 0 teams, 20 leagues
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🎯 Boosted score (+15) for preferred league content
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይችላሉ።

ኬሊ በላዮነሶች የእንግሊዝ ቡድን በስፔን የሚካሄድ የተወዳዳሪ ጨዋታ አስቀድሞ ሁለት ግቦች ወደ ምርጥ የገባ ሲሆን ወደ 3-1 ያለ ውስጥ አመልካች ላይ ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። 

ኬሊ የእንግሊዝ ፈጣሪ እና የሴቶች ቡድን አስቀድሞ ገደማ የተለየ የመርምር ዘዴ በማዕከል እንደዚህ ተወዳጅ ይሆናል የሚል የሚገኝ ይፋ ነው። እሱ በእንግሊዝ ጉዞ ገና እምቅብ የተወለደ የተ...
✅ Using AI result for am
🤖 AI Result for am: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። 

ኬሊ የአይን ምንጭ እንደመሆን እንደገና እንግሊዝን ወደ አውሮፓ ውድድር ወደ ማህበረሰብ ወደ አንደኛ ቦታ ማስገንዘብ እና በዩሩ 2025 የሚካሄድ ውድድር ድል አድርጎታል...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944774730.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1534293 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944775057.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1650672 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753944774730.png',
  id: '6398d48c-20e1-4fc5-b1c1-7fb55ab25930',
  fullPath: 'generated-images/football_image_1753944774730.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944774730.png
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944776258.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1699455 bytes
🔍 Checking bucket access...
🌐 URL accessibility test: 200 OK
✅ News generation completed in 26150ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753944775057.png',
  id: '55afee91-288a-4231-b1c6-b6404c7be1a9',
  fullPath: 'generated-images/football_image_1753944775057.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944775057.png
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይችላሉ።

ኬሊ በላዮነሶች የእንግሊዝ ቡድን በስፔን የሚካሄድ የተወዳዳሪ ጨዋታ አስቀድሞ ሁለት ግቦች ወደ ምርጥ የገባ ሲሆን ወደ 3-1 ያለ ውስጥ አመልካች ላይ 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይች...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይች...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይችላሉ። ኬሊ በላዮነሶች የእንግሊዝ ቡድን በስፔን የሚካሄድ የተወዳዳሪ ጨዋታ አስቀድሞ ሁለት ግቦች ወደ ምርጥ የገባ ሲሆን ወደ 3-1 ያለ ውስጥ አመልካች ላይ ተ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይች...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይች...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944774730.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944774730.png
🧹 HTML validation complete. Clean text length: 362
🌐 URL accessibility test: 200 OK
✅ News generation completed in 27845ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። 

ኬሊ የእንግሊዝ ፈጣሪ እና የሴቶች ቡድን አስቀድሞ ገደማ የተለየ የመርምር ዘዴ በማዕከል እንደዚህ ተወዳጅ ይሆናል የሚል የሚገኝ ይፋ ነው። እሱ በእንግሊዝ ጉዞ ገና እምቅብ የተወለደ የተ
🧹 Cleaning HTML for Telegram: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። 

ኬሊ የእንግሊዝ ፈጣሪ እና ...
✅ HTML cleaned for Telegram: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። ኬሊ የእንግሊዝ ፈጣሪ እና የሴ...
🧹 After HTML cleaning: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። ኬሊ የእንግሊዝ ፈጣሪ እና የሴቶች ቡድን አስቀድሞ ገደማ የተለየ የመርምር ዘዴ በማዕከል እንደዚህ ተወዳጅ ይሆናል የሚል የሚገኝ ይፋ ነው። እሱ በእንግሊዝ ጉዞ ገና እምቅብ የተወለደ የተለይ
🧹 Cleaning HTML for Telegram: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። ኬሊ የእንግሊዝ ፈጣሪ እና የሴ...
✅ HTML cleaned for Telegram: ⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። ኬሊ የእንግሊዝ ፈጣሪ እና የሴ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944775057.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944775057.png
🧹 HTML validation complete. Clean text length: 424
📊 Image downloaded successfully: 1534293 bytes
✅ Upload successful! Data: {
  path: 'football_image_1753944776258.png',
  id: '19f8df72-8dd2-4664-a5ca-283b81c48265',
  fullPath: 'generated-images/football_image_1753944776258.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944776258.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 29608ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። 

ኬሊ የአይን ምንጭ እንደመሆን እንደገና እንግሊዝን ወደ አውሮፓ ውድድር ወደ ማህበረሰብ ወደ አንደኛ ቦታ ማስገንዘብ እና በዩሩ 2025 የሚካሄድ ውድድር ድል አድርጎታል
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። 

ኬሊ የአ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። ኬሊ የአይን...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። ኬሊ የአይን ምንጭ እንደመሆን እንደገና እንግሊዝን ወደ አውሮፓ ውድድር ወደ ማህበረሰብ ወደ አንደኛ ቦታ ማስገንዘብ እና በዩሩ 2025 የሚካሄድ ውድድር ድል አድርጎታል። 
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። ኬሊ የአይን...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። ኬሊ የአይን...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944776258.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944776258.png
🧹 HTML validation complete. Clean text length: 455
📊 Image downloaded successfully: 1650672 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944778690',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 135ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:56.370Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 27,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለአውሮፓ ግሪን የወይን ፍርድ ዘዴዋን አግለጹ፣ ይህም ወንጌል በአሜሪካ የሚኖር ወቅት እንደ አስተዳደር ወደ አውሮፓ እንደገና ድምቁ እንድማር ይችላሉ።\n' +
        '\n' +
        'ኬሊ በላዮነሶች የእንግሊዝ ቡድን በስፔን የሚካሄድ የተወዳዳሪ ጨዋታ አስቀድሞ ሁለት ግቦች ወደ ምርጥ የገባ ሲሆን ወደ 3-1 ያለ ውስጥ አመልካች ላይ ተወስዳለች። የዚህ ውድድር ጨዋታ ወንድማማች 1-1 ሆኖ በመጨረሻ ወይን በመደበኛ ጊዜ ወይን በተጨማሪ ጊዜ ተጠናቀቀ።\n' +
        '\n' +
        'ይህ ድምቁ የእንግሊዝ ቡድን እንደገና ወቅት እንድዋላል የተከናወነ እንደ አስተዳደር እንደገና ይወዳድራል።\n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944774730.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
📊 Image downloaded successfully: 1699455 bytes
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Message sent successfully to @africansportdata
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
✅ Successfully sent to AfircaSportCenter
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944779554',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
✅ Message sent successfully to @africansportdata
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 118ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:56.754Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 39,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁም ቁም ክላዊ ኬሊ ለእንግሊዝ እንደ ውዝዝ ግብ ማዕከል የአውሮፓ ውድድር ድል እንደዚህ እንዳለው ዝርዝር አጋር አድርጋለች። \n' +
        '\n' +
        'ኬሊ የእንግሊዝ ፈጣሪ እና የሴቶች ቡድን አስቀድሞ ገደማ የተለየ የመርምር ዘዴ በማዕከል እንደዚህ ተወዳጅ ይሆናል የሚል የሚገኝ ይፋ ነው። እሱ በእንግሊዝ ጉዞ ገና እምቅብ የተወለደ የተለይ ድምፅ ማለት የተለየ የተለየ የተለየ ይገኝ። \n' +
        '\n' +
        'ኬሊ ይህ የወቅታዊ ግዜ በሙሉ የተሳሳተ ውድድር ሂደት ውስጥ በማለት ያለው የሴቶች ቡድን የወቅታዊ ዕቅድ እና በወቅታዊ ውድድር ትርጉም ያለው ውድድር ያለውን ይገኝ። \n' +
        '\n' +
        'በዚህ እንዲሁ የሴቶች ቡድን አውሮፓ ውድድር መርምር እንዳለው ውስጥ የተለየ ውድድር አንድ ውድድር ይወዳድር። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944775057.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
✅ Successfully sent to AfircaSportCenter
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944779885',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
⚠️ No matches found for channel preferences
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 125ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:52:57.624Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ የተለየ መንገድ የተቀባ የግብይት ስርዓት ለማቅረብ አስተያየት ሰጠች። እርሷ እንግሊዝ እንደገና ወደ አውሮፓ ውድድር ድል አድርጎታል። \n' +
        '\n' +
        'ኬሊ የአይን ምንጭ እንደመሆን እንደገና እንግሊዝን ወደ አውሮፓ ውድድር ወደ ማህበረሰብ ወደ አንደኛ ቦታ ማስገንዘብ እና በዩሩ 2025 የሚካሄድ ውድድር ድል አድርጎታል። \n' +
        '\n' +
        'በመዋቅር እና በቀጣይ ጊዜ 1-1 ወዲያ የተወዳድረው ውድድር በሳቢይ ላይ ወይዘር 3-1 እንደነበር በመሆኑ በዚህ ውድድር ይህ የተወዳድረው ውድድር እና ምንጭ ይሁን የተለይተ የተወዳድረው ውድድር ነው። \n' +
        '\n' +
        'ይህ ግን ኬሊ በዚህ ውድድር የተወዳድረው ውድድር የአስተያየት ምንጭ አስተያየት እንደሆነ ማለት እንዲህ ብለዋል። የኬሊ የግብይት ስርዓት የሚሰጥ እንደዚህ እና ይህ የተወዳድረው ውድድር እንደሆነ ይህ ወ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944776258.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ No matches found for channel preferences
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
🤖 AI Result for am: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ምርጥ የተወሰነ አድናቆት ግዳይ ይወዳደር ይችላል፡፡ 

ቁምፊ ክርክር በገንዘብ ዕለቱ የፈጠረ ገጸ ከወደ እንግሊዝ የወርደ ወይዘር ጋር ይቅርታ ይታወቃል፡፡ በተወ...
✅ Using AI result for am
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:53:04.956Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:53:05.739Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:53:06.326Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753944796577.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1586234 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753944796577.png',
  id: 'bb5b98c6-999f-4deb-a197-1c6a863c47bc',
  fullPath: 'generated-images/football_image_1753944796577.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944796577.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 33572ms
📤 Starting Telegram distribution...
🎯 Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
🔓 Decoded base64 token for channel: AfircaSportCenter
📊 Found 1 active channels for language am:
  - AfircaSportCenter (am)
✅ Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ምርጥ የተወሰነ አድናቆት ግዳይ ይወዳደር ይችላል፡፡ 

ቁምፊ ክርክር በገንዘብ ዕለቱ የፈጠረ ገጸ ከወደ እንግሊዝ የወርደ ወይዘር ጋር ይቅርታ ይታወቃል፡፡ በተወ
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ም...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ም...
🧹 After HTML cleaning: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ምርጥ የተወሰነ አድናቆት ግዳይ ይወዳደር ይችላል፡፡ ቁምፊ ክርክር በገንዘብ ዕለቱ የፈጠረ ገጸ ከወደ እንግሊዝ የወርደ ወይዘር ጋር ይቅርታ ይታወቃል፡፡ በተወሰነ
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ም...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ም...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944796577.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: AfircaSportCenter
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944796577.png
🧹 HTML validation complete. Clean text length: 410
📊 Image downloaded successfully: 1586234 bytes
✅ Message sent successfully to @africansportdata
✅ Successfully sent to AfircaSportCenter
✅ Distribution completed: 1/1 channels
📊 Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
✅ Message recorded successfully
📝 Skipping content save to database (RLS policy needs update)
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753944800423',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 125ms
🎫 Smart coupon system triggered: No suitable coupon found for current context
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T06:53:17.775Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁምፊ ክርክር ቆሮማር የእንግሊዝ የእግር ኳስ ቡድን ወደ አውሮፕ ውድድር ዋነኛ እንደገና ወደ ምርጥ ደረጃ እንደገና ይወርዳል፡፡ ቁምፊ ቆሮማር በሚከተለው ምርጥ የተወሰነ አድናቆት ግዳይ ይወዳደር ይችላል፡፡ \n' +
        '\n' +
        'ቁምፊ ክርክር በገንዘብ ዕለቱ የፈጠረ ገጸ ከወደ እንግሊዝ የወርደ ወይዘር ጋር ይቅርታ ይታወቃል፡፡ በተወሰነ የምርጥ ወይዘር አንድ ተረጋጊ የወይዘር አስተዳደር ይወዳደር ይችላል፡፡ ቁምፊ በተድላ ይታወቃል፡፡  \n' +
        '\n' +
        'በዚህ ውድድር ወደ ምርጥ የደረሰው ወይዘር ወደ ምርጥ ድርጅት በሚታወቅ ዝርዝር ይታወቋል፡፡ የአውሮፕ ውድድር የወይዘር ድርጅት በአንድ ወይዘር ወደ ወዲያ ይወዳደር ይችላል፡፡ \n' +
        '\n' +
        'ምንጭ: Talksport  #እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753944796577.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: true, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: '@africansportdata,testingfde',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: '@africansportdata,testingfde',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - AfircaSportCenter (am)
  - testing (am)
🎯 Using primary channel: AfircaSportCenter
🎯 Content Router: Generating betting content for am (Channel: AfircaSportCenter)
📋 Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 1 failed, trying again...
🎯 Betting attempt 2/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 2 failed, trying again...
🎯 Betting attempt 3/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: AfircaSportCenter
🎯 Filtering by channel preferences: 20 leagues, 0 teams
🔍 Searching for matches based on channel preferences...
⚠️ No matches found for channel preferences
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for betting_tip content
🎯 MAIN WORKFLOW: Getting smart matches for betting_tip in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for betting_tip in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for betting tips
⚠️ Attempt 3 failed, trying again...
❌ All betting attempts failed
❌ Error generating betting content: Error: Betting content generation failed after 3 attempts
    at ContentRouter.generateBettingContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:150:19)
    at async ContentRouter.generateContent (webpack-internal:///(rsc)/./src/lib/content/api-modules/content-router.ts:41:24)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:115:31)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ⚠️ No betting content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T06:53:27.495Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No betting content could be generated at this time.',
  processing_info: {
    data_source: 'Betting Generator Failed',
    ai_processing: false,
    image_generation: false,
    fallback_used: false,
    error: 'Betting content generation failed after 3 attempts'
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: false
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
 ✓ Compiled in 20ms
 ✓ Compiled in 1117ms (390 modules)
 ✓ Compiled in 823ms (390 modules)
 ✓ Compiled /api/automation/auto-scheduler in 390ms (364 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating news content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 240, Unique: 229
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 229 news items
✅ Fetched 229 news items in 1227ms
🏆 Scoring 229 news items for channel: testing
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 140)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እንግሊዝ ወንድሞችን ወደ አውሮፓ ስንዴ ድል እንደገና ወደ መምጣት አድርገዋል።

በላይኖ የምታደርጉት ድንጋይ በግምት 3-1 የወገን ተከታታይ ውድድር ውስጥ ተወስዷ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945267015.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1513472 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945267015.png',
  id: '2d4518ac-bb0c-43b4-b6ea-182d411d8b88',
  fullPath: 'generated-images/football_image_1753945267015.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945267015.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 27858ms
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: news for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እንግሊዝ ወንድሞችን ወደ አውሮፓ ስንዴ ድል እንደገና ወደ መምጣት አድርገዋል።

በላይኖ የምታደርጉት ድንጋይ በግምት 3-1 የወገን ተከታታይ ውድድር ውስጥ ተወስዷ
🧹 Cleaning HTML for Telegram: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እን...
✅ HTML cleaned for Telegram: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እን...
🧹 After HTML cleaning: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እንግሊዝ ወንድሞችን ወደ አውሮፓ ስንዴ ድል እንደገና ወደ መምጣት አድርገዋል። በላይኖ የምታደርጉት ድንጋይ በግምት 3-1 የወገን ተከታታይ ውድድር ውስጥ ተወስዷል
🧹 Cleaning HTML for Telegram: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እን...
✅ HTML cleaned for Telegram: ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እን...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945267015.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945267015.png
🧹 HTML validation complete. Clean text length: 417
📊 Image downloaded successfully: 1513472 bytes
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/cache/webpack/client-development/0.pack.gz_' -> '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/cache/webpack/client-development/0.pack.gz'
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 417
📤 Sending text message to: testingfde
📝 Message preview: 📰 ⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:01:08.656Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 40,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በአውሮፓ 2025 ውድድር ድል የወቅታዊ ፍትሃዊ አስተያየት ያቀረበችው ክሎይ ኬሊ የዚህ ድል መሠረት ያለውን የእርሷን የዕድል ዘዴ ገለጸች። ኬሊ በላይኖ እንግሊዝ ወንድሞችን ወደ አውሮፓ ስንዴ ድል እንደገና ወደ መምጣት አድርገዋል።\n' +
        '\n' +
        'በላይኖ የምታደርጉት ድንጋይ በግምት 3-1 የወገን ተከታታይ ውድድር ውስጥ ተወስዷል። የዚህ ውድድር ውድድር 1-1 ከተወዳዳሪዎች ወይም በተጨማሪ ጊዜ ይደረግ ተገኝቷል። \n' +
        '\n' +
        'አቶ ኬሊ ይህን የማስታወቂያ ዘዴ የሚሰጥ ድርጅት የሚያሳይ የእርሷ የድርጅት ዕድል ዘዴ መልእክት ተሰጥቷል። እንደ ተገናኝ ወይም የሁሉም ተሳትፎ ዝርዝር ወይም ዝርዝር አመለካከት የተቀየረ ማለት ነው። \n' +
        '\n' +
        'ምንጭ: TalkSport  #እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945267015.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating betting content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: testing
🔍 Searching for matches based on channel preferences...
✅ Found targeted match: Arsenal vs Tottenham (Score: 31)
✅ Using targeted match for channel: Arsenal vs Tottenham
✅ Selected match: Arsenal vs Tottenham
📊 Performing betting analysis for Arsenal vs Tottenham
✅ Using team IDs: Home 42, Away 47
🔍 Getting team analysis using ID: Arsenal (42)
📊 Getting 10 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 10 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=10
🔮 Getting 5 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=5
🔍 Getting team analysis using ID: Tottenham (47)
📊 Getting 10 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 10 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=10
🔮 Getting 5 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=5
🔍 Getting detailed info using IDs: Arsenal (42) vs Tottenham (47)
📊 Getting 5 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=5
📊 Getting 5 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=5
🔄 Getting H2H data: Arsenal vs Tottenham
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
🔮 Getting 3 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 3 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=3
🔮 Getting 3 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 3 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=3
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
🔮 Generated 4 predictions for Arsenal vs Tottenham
📊 Match assessment: 77% confidence, HIGH predictability
🎨 Generating image with GPT-Image-1 model: Stadium atmosphere photo for Arsenal vs Tottenham football match: passionate fans in team colors, st...
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 1268ms (1049 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 POST /api/automation/auto-scheduler 404 in 1609ms
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating news content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ TalkSport: 100 items
✅ TalkSport: 100 items
✅ BBC Sport Football: 91 items
✅ BBC Sport Football: 91 items
✅ The Guardian Football: 49 items
✅ The Guardian Football: 49 items
📰 Total items: 240, Unique: 229
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 229 news items
✅ Fetched 229 news items in 325ms
🏆 Scoring 229 news items for channel: testing
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 140)
🎨 Generating AI image
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
✅ Using OpenAI key from environment (fallback)
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ አዳዲስ ተወዳድር ወዲያ ያለ አለም አለም ወደ ውድድር ማውጣት የነበረው ክብር ወይም ይህን በሚያስተናግድ የአንድ ጊዜ እንደ ወገን የተገኘው ወይም ወይም ወይም ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945327970.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1535803 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945329080.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1920342 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
✅ Upload successful! Data: {
  path: 'football_image_1753945327970.png',
  id: 'dbba5066-ec6f-4e63-9402-fe98a24f8842',
  fullPath: 'generated-images/football_image_1753945327970.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945327970.png
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
🌐 URL accessibility test: 200 OK
✅ News generation completed in 27810ms
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: news for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ አዳዲስ ተወዳድር ወዲያ ያለ አለም አለም ወደ ውድድር ማውጣት የነበረው ክብር ወይም ይህን በሚያስተናግድ የአንድ ጊዜ እንደ ወገን የተገኘው ወይም ወይም ወይም 
🧹 Cleaning HTML for Telegram: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ ...
✅ HTML cleaned for Telegram: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ ...
🧹 After HTML cleaning: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ አዳዲስ ተወዳድር ወዲያ ያለ አለም አለም ወደ ውድድር ማውጣት የነበረው ክብር ወይም ይህን በሚያስተናግድ የአንድ ጊዜ እንደ ወገን የተገኘው ወይም ወይም ወይም 
🧹 Cleaning HTML for Telegram: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ ...
✅ HTML cleaned for Telegram: ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945327970.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945327970.png
🧹 HTML validation complete. Clean text length: 454
✅ Upload successful! Data: {
  path: 'football_image_1753945329080.png',
  id: '6a6d5a9f-87ac-4a90-a7f7-575c7eb07c7a',
  fullPath: 'generated-images/football_image_1753945329080.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945329080.png
🌐 URL accessibility test: 200 OK
🎯 GenerateBaseContent Debug: am, Predictions count: 4
🔍 Predictions data: [
  {
    type: 'match_result',
    prediction: 'HOME WIN',
    confidence: 106,
    reasoning: 'Home advantage (12.0%) and better form',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  },
  {
    type: 'both_teams_score',
    prediction: 'BOTH TEAMS TO SCORE: YES',
    confidence: 62,
    reasoning: 'Both teams average good scoring rates (Home: 3.0, Away: 2.0 goals/game)',
    odds_estimate: '1.50-2.00',
    expectedOdds: '1.50-2.00',
    valueRating: 'LOW',
    risk_level: 'MEDIUM'
  },
  {
    type: 'over_under',
    prediction: 'OVER 2.5 GOALS',
    confidence: 76,
    reasoning: 'Expected 3.6 goals based on team averages and H2H',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  }
]
📝 Base content generated (am): "🎯 የውርርድ ምክሮች: Arsenal በተቃ Tottenham

💰 ተመራጭ ውርርድ ምክሮች:

🏆 ምክር 1: የቤት ቡድን ያሸንፋል
💰 ዕድል: 1.20-1.50 | እምነት: 106%
📝 የቤት ጥቅም (12.0%) and ተሻለ ሁኔታ

⭐ ምክር..."
📏 Base content length: 531 characters
🤖 AI editing betting content for language: am (Channel: testing)
📊 Image downloaded successfully: 1535803 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 454
📤 Sending text message to: testingfde
📝 Message preview: 📰 ⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:02:09.568Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 15,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ በተመለከተው የኢንግላንድ እግር ኳስ ከተለመደ ቀንድ መንገድ ዕድል የወደደችው እና የአይን መንክ የሚያስቀርብ አበባ እና የወንዶች እግር ኳስ ውድድር እንደ አዳዲስ ተወዳድር ወዲያ ያለ አለም አለም ወደ ውድድር ማውጣት የነበረው ክብር ወይም ይህን በሚያስተናግድ የአንድ ጊዜ እንደ ወገን የተገኘው ወይም ወይም ወይም ለማይቀር አይደለም። \n' +
        '\n' +
        'በዚህ ወቅት ከእንግላንድ ወደ አውሮፓ የወይን ገብስ እና እንደ ወይን ወይም ወይን ወይን ወይን እንደ ወይን ወይን ወይን እንደ ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይን ወይ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945327970.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating betting content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: testing
🔍 Searching for matches based on channel preferences...
✅ Found targeted match: Arsenal vs Tottenham (Score: 31)
✅ Using targeted match for channel: Arsenal vs Tottenham
✅ Selected match: Arsenal vs Tottenham
📊 Performing betting analysis for Arsenal vs Tottenham
✅ Using team IDs: Home 42, Away 47
🔍 Getting team analysis using ID: Arsenal (42)
📊 Getting 10 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 10 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=10
🔮 Getting 5 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=5
🔍 Getting team analysis using ID: Tottenham (47)
📊 Getting 10 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 10 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=10
🔮 Getting 5 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=5
🔍 Getting detailed info using IDs: Arsenal (42) vs Tottenham (47)
📊 Getting 5 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=5
📊 Getting 5 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=5
🔄 Getting H2H data: Arsenal vs Tottenham
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
🔮 Getting 3 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 3 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=3
🔮 Getting 3 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 3 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=3
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
🔮 Generated 4 predictions for Arsenal vs Tottenham
📊 Match assessment: 75% confidence, HIGH predictability
🎨 Generating image with GPT-Image-1 model: Stadium atmosphere photo for Arsenal vs Tottenham football match: passionate fans in team colors, st...
✅ AI enhanced betting content in am: "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት ..."
📏 Enhanced content length: 274 characters
🤖 AI edited content (am): "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት እና ዋጋ እርምጃ: ከፍተኛ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00..."
📏 AI edited content length: 274 characters
❌ Error marking betting content as used: {}
🎯 FINAL RESULT for am:
   Title: Arsenal vs Tottenham
   Final content length: 274 characters
   Using AI edited: true
   Content preview: "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት እና ዋጋ እርምጃ: ከፍተኛ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 62% | ሁለቱም ቡድኖች ጥሩ የጎል ደብዳቤ አላቸው (አርሰናል: 3..."
✅ Successfully generated betting content
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: betting for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት እና ዋጋ እርምጃ: ከፍተኛ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 62% | ሁለቱም ቡድኖች ጥሩ የጎል ደብዳቤ አላቸው (አርሰናል: 3
🧹 Cleaning HTML for Telegram: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት ...
✅ HTML cleaned for Telegram: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት ...
🧹 After HTML cleaning: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት እና ዋጋ እርምጃ: ከፍተኛ ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 62% | ሁለቱም ቡድኖች ጥሩ የጎል ደብዳቤ አላቸው (አርሰናል: 3.
🧹 Cleaning HTML for Telegram: 🎯 ከ2.5 ጎ

⚠️ 18+ በኃላፊነት ይዋረዱ...
✅ HTML cleaned for Telegram: 🎯 ከ2.5 ጎ ⚠️ 18+ በኃላፊነት ይዋረዱ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945329080.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: false,
  enableShareButton: true,
  enableWebApp: true,
  priority: 'high',
  spoilerImage: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945329080.png
🧹 HTML validation complete. Clean text length: 28
📊 Image downloaded successfully: 1920342 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 28
📤 Sending text message to: testingfde
📝 Message preview: 🎯 ከ2.5 ጎ ⚠️ 18+ በኃላፊነት ይዋረዱ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ✅ Generated 1 betting content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:02:18.859Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 30,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Betting Tips Generator (Attempt 1)',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'betting_1753945338859_z3hm3ibt5',
      type: 'betting',
      title: '🎯 Arsenal vs Tottenham - Betting Tips',
      content: '🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 106% | በየቤት ውጤት እና በተሻለ አቅም የተጠበቀ ድል | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | 📈 የእምነት እና ዋጋ እርምጃ: ከፍተኛ\n' +
        '\n' +
        '⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 62% | ሁለቱም ቡድኖች ጥሩ የጎል ደብዳቤ አላቸው (አርሰናል: 3.0, ቶተንሃም: 2.0 ጎሎች/ጨዋታ) | ⚠️ የአደጋ ደረጃ: መካከለኛ | 📉 ዋጋ እርምጃ: ዝቅተኛ\n' +
        '\n' +
        '🎯 ከ2.5 ጎ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945329080.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 betting content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating analysis content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T07:02:22.461Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating live content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: live for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: testing
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: testingfde
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:02:24.386Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 29,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753945343499',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating daily_summary content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 229 fixtures for 2025-08-01 from API-Football v3
📅 Found 229 matches for 2025-08-01
🔮 Found 229 fixtures for tomorrow
 POST /api/automation/auto-scheduler 404 in 54ms
 POST /api/automation/auto-scheduler 404 in 40ms
 POST /api/automation/auto-scheduler 404 in 35ms
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945385740.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1224466 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945385740.png',
  id: '4bed0c1c-3962-4e33-a948-cbe205864150',
  fullPath: 'generated-images/football_image_1753945385740.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945385740.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945385740.png
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: daily_summary for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: testing
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: testingfde
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
 ✓ Compiled in 1716ms (1049 modules)
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:03:06.901Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 36,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753945386901_ea5n4dkix',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945385740.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating news content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 229 news items in 0ms
🏆 Scoring 229 news items for channel: testing
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 140)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945394709.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1787130 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945394709.png',
  id: '552a6dad-e21e-4be7-a0bd-c737b21eaba3',
  fullPath: 'generated-images/football_image_1753945394709.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945394709.png
🌐 URL accessibility test: 200 OK
🎯 GenerateBaseContent Debug: am, Predictions count: 4
🔍 Predictions data: [
  {
    type: 'match_result',
    prediction: 'HOME WIN',
    confidence: 102,
    reasoning: 'Home advantage (12.0%) and better form',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  },
  {
    type: 'both_teams_score',
    prediction: 'BOTH TEAMS TO SCORE: YES',
    confidence: 64,
    reasoning: 'Both teams average good scoring rates (Home: 3.0, Away: 2.0 goals/game)',
    odds_estimate: '1.50-2.00',
    expectedOdds: '1.50-2.00',
    valueRating: 'LOW',
    risk_level: 'MEDIUM'
  },
  {
    type: 'over_under',
    prediction: 'OVER 2.5 GOALS',
    confidence: 71,
    reasoning: 'Expected 3.2 goals based on team averages and H2H',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  }
]
📝 Base content generated (am): "🎯 የውርርድ ምክሮች: Arsenal በተቃ Tottenham

💰 ተመራጭ ውርርድ ምክሮች:

🏆 ምክር 1: የቤት ቡድን ያሸንፋል
💰 ዕድል: 1.20-1.50 | እምነት: 102%
📝 የቤት ጥቅም (12.0%) and ተሻለ ሁኔታ

⭐ ምክር..."
📏 Base content length: 531 characters
🤖 AI editing betting content for language: am (Channel: testing)
🤖 AI Result for am: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስተዋወቅ ፣ ቁምፊ በተለያዩ የማዕዘኖች የማይለወጥ የግድ ተውፋይ ይዤዋ ይታወቃል። እንግሊዝ ከስፔን ጋር በመሆኑ 3-1 የሚለው መድረክ ይላዋሉ።

ምንጭ: #እግር...
✅ Using AI result for am
✅ AI enhanced betting content in am: "1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | ..."
📏 Enhanced content length: 276 characters
🤖 AI edited content (am): "1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | 💰 ከፍተኛ ዋጋ እድል

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.0..."
📏 AI edited content length: 276 characters
❌ Error marking betting content as used: {}
🎯 FINAL RESULT for am:
   Title: Arsenal vs Tottenham
   Final content length: 276 characters
   Using AI edited: true
   Content preview: "1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | 💰 ከፍተኛ ዋጋ እድል

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 64% | ማንኛውም ቡድን በመካከለኛ የግብ መመዝገብ እንደሚችል ተ..."
✅ Successfully generated betting content
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: betting for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | 💰 ከፍተኛ ዋጋ እድል

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 64% | ማንኛውም ቡድን በመካከለኛ የግብ መመዝገብ እንደሚችል ተ
🧹 Cleaning HTML for Telegram: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | ...
✅ HTML cleaned for Telegram: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | ...
🧹 After HTML cleaning: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | 💰 ከፍተኛ ዋጋ እድል 2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 64% | ማንኛውም ቡድን በመካከለኛ የግብ መመዝገብ እንደሚችል ተገ
🧹 Cleaning HTML for Telegram: 🎯 ከ2.5 ጎሎች

⚠️ 18+ በኃላፊነት ይዋረዱ...
✅ HTML cleaned for Telegram: 🎯 ከ2.5 ጎሎች ⚠️ 18+ በኃላፊነት ይዋረዱ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945394709.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: false,
  enableShareButton: true,
  enableWebApp: true,
  priority: 'high',
  spoilerImage: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945394709.png
🧹 HTML validation complete. Clean text length: 30
📊 Image downloaded successfully: 1787130 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 30
📤 Sending text message to: testingfde
📝 Message preview: 🎯 ከ2.5 ጎሎች ⚠️ 18+ በኃላፊነት ይዋረዱ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ✅ Generated 1 betting content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:03:24.575Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Betting Tips Generator (Attempt 1)',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'betting_1753945404575_kp1fwml2u',
      type: 'betting',
      title: '🎯 Arsenal vs Tottenham - Betting Tips',
      content: '1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 102% | በአርሰናል የቤት ጥሩ ቅርፀት እና 12% የቤት እግር ብቃት | ⚠️ ዝቅተኛ አደጋ ደረጃ | 💰 ከፍተኛ ዋጋ እድል\n' +
        '\n' +
        '2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 64% | ማንኛውም ቡድን በመካከለኛ የግብ መመዝገብ እንደሚችል ተገኝቷል (አርሰናል 3 ፣ ቶተንሃም 2) | ⚠️ መካከለኛ አደጋ ደረጃ | 💰 ዝቅተኛ ዋጋ እድል\n' +
        '\n' +
        '3. 🎯 ከ2.5 ጎሎች',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945394709.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 betting content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating analysis content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T07:03:28.098Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating live content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: live for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: testing
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: testingfde
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:03:29.952Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 24,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753945409105',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating daily_summary content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 228 fixtures for 2025-08-01 from API-Football v3
📅 Found 228 matches for 2025-08-01
🔮 Found 228 fixtures for tomorrow
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945415426.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1465177 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945415426.png',
  id: '2adce34f-c4d9-40c1-bbd8-3aea2eee9209',
  fullPath: 'generated-images/football_image_1753945415426.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945415426.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 27945ms
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: news for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስተዋወቅ ፣ ቁምፊ በተለያዩ የማዕዘኖች የማይለወጥ የግድ ተውፋይ ይዤዋ ይታወቃል። እንግሊዝ ከስፔን ጋር በመሆኑ 3-1 የሚለው መድረክ ይላዋሉ።

ምንጭ: #እግር
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስ...
🧹 After HTML cleaning: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስተዋወቅ ፣ ቁምፊ በተለያዩ የማዕዘኖች የማይለወጥ የግድ ተውፋይ ይዤዋ ይታወቃል። እንግሊዝ ከስፔን ጋር በመሆኑ 3-1 የሚለው መድረክ ይላዋሉ። ምንጭ: #እግርኳ
🧹 Cleaning HTML for Telegram: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስ...
✅ HTML cleaned for Telegram: ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945415426.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945415426.png
🧹 HTML validation complete. Clean text length: 217
📊 Image downloaded successfully: 1465177 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 217
📤 Sending text message to: testingfde
📝 Message preview: 📰 ⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:03:36.268Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 44,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ቁምፊ በእንግሊዝ እና በስፔን ውስጥ የተካሄደውን በግጥም ውድድር የተነሳ መስል ወደ ውስጥ ይገኙ በአውሮፓ የሚገኙትን ውድድር ወደ ውዝዬው እንዲህ እንደምታስተዋወቅ ፣ ቁምፊ በተለያዩ የማዕዘኖች የማይለወጥ የግድ ተውፋይ ይዤዋ ይታወቃል። እንግሊዝ ከስፔን ጋር በመሆኑ 3-1 የሚለው መድረክ ይላዋሉ።\n' +
        '\n' +
        'ምንጭ: #እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945415426.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating betting content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: testing
🔍 Searching for matches based on channel preferences...
✅ Found targeted match: Arsenal vs Tottenham (Score: 31)
✅ Using targeted match for channel: Arsenal vs Tottenham
✅ Selected match: Arsenal vs Tottenham
📊 Performing betting analysis for Arsenal vs Tottenham
✅ Using team IDs: Home 42, Away 47
🔍 Getting team analysis using ID: Arsenal (42)
📊 Getting 10 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 10 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=10
🔮 Getting 5 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=5
🔍 Getting team analysis using ID: Tottenham (47)
📊 Getting 10 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 10 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=10
🔮 Getting 5 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=5
🔍 Getting detailed info using IDs: Arsenal (42) vs Tottenham (47)
📊 Getting 5 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=5
📊 Getting 5 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=5
🔄 Getting H2H data: Arsenal vs Tottenham
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
🔮 Getting 3 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 3 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=3
🔮 Getting 3 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 3 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=3
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
🔮 Generated 4 predictions for Arsenal vs Tottenham
📊 Match assessment: 78% confidence, HIGH predictability
🎨 Generating image with GPT-Image-1 model: Stadium atmosphere photo for Arsenal vs Tottenham football match: passionate fans in team colors, st...
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945448746.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1220480 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945448746.png',
  id: '705f4ce8-f01c-4a33-afc5-f264d119180a',
  fullPath: 'generated-images/football_image_1753945448746.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945448746.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945448746.png
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: daily_summary for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: testing
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: testingfde
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:04:10.595Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 28,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753945450595_fag407esn',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945448746.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating news content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 229 news items in 0ms
🏆 Scoring 229 news items for channel: testing
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 140)
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
🤖 AI Result for am: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆኖ ለእንግሊዝ ግንባር የሚሰጥ የፈረሱ መንገድ ይችላል። 

በተወሰነ ወቅት ክሎይ በዩሮ 2025 ጨዋታ ውስጥ ወደ ሴቶች የእግር ኳስ ዓለም ውድድር አሸነፈ ነበር...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945475032.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 2042630 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945475188.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1533045 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945475188.png',
  id: '7ac32b8b-aa99-49fd-bb08-d5c803e4fbd9',
  fullPath: 'generated-images/football_image_1753945475188.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475188.png
✅ Upload successful! Data: {
  path: 'football_image_1753945475032.png',
  id: 'e0a13ef7-9de8-4a8e-96b6-11697c73ef3c',
  fullPath: 'generated-images/football_image_1753945475032.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475032.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 24753ms
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
🌐 URL accessibility test: 200 OK
🎯 GenerateBaseContent Debug: am, Predictions count: 4
🔍 Predictions data: [
  {
    type: 'match_result',
    prediction: 'HOME WIN',
    confidence: 104,
    reasoning: 'Home advantage (12.0%) and better form',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  },
  {
    type: 'both_teams_score',
    prediction: 'BOTH TEAMS TO SCORE: YES',
    confidence: 68,
    reasoning: 'Both teams average good scoring rates (Home: 3.0, Away: 2.0 goals/game)',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'MEDIUM',
    risk_level: 'MEDIUM'
  },
  {
    type: 'over_under',
    prediction: 'OVER 2.5 GOALS',
    confidence: 79,
    reasoning: 'Expected 3.8 goals based on team averages and H2H',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  }
]
📝 Base content generated (am): "🎯 የውርርድ ምክሮች: Arsenal በተቃ Tottenham

💰 ተመራጭ ውርርድ ምክሮች:

🏆 ምክር 1: የቤት ቡድን ያሸንፋል
💰 ዕድል: 1.20-1.50 | እምነት: 104%
📝 የቤት ጥቅም (12.0%) and ተሻለ ሁኔታ

⭐ ምክር..."
📏 Base content length: 531 characters
🤖 AI editing betting content for language: am (Channel: testing)
✅ Content sending allowed: news for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆኖ ለእንግሊዝ ግንባር የሚሰጥ የፈረሱ መንገድ ይችላል። 

በተወሰነ ወቅት ክሎይ በዩሮ 2025 ጨዋታ ውስጥ ወደ ሴቶች የእግር ኳስ ዓለም ውድድር አሸነፈ ነበር
🧹 Cleaning HTML for Telegram: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆ...
✅ HTML cleaned for Telegram: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆ...
🧹 After HTML cleaning: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆኖ ለእንግሊዝ ግንባር የሚሰጥ የፈረሱ መንገድ ይችላል። በተወሰነ ወቅት ክሎይ በዩሮ 2025 ጨዋታ ውስጥ ወደ ሴቶች የእግር ኳስ ዓለም ውድድር አሸነፈ ነበር። 
🧹 Cleaning HTML for Telegram: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆ...
✅ HTML cleaned for Telegram: ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475188.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475188.png
🧹 HTML validation complete. Clean text length: 412
📊 Image downloaded successfully: 1533045 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 412
📤 Sending text message to: testingfde
📝 Message preview: 📰 ⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:04:36.521Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ትንቢት እና ዝማኔ የተነሱ ትርጉሞች እንደተወሰነ ዋጋ እንደሚያወቅ በእንግሊዝ እግር ኳስ የሚኖር እንደ አስፈላጊ ተገቢ ይቆይ። ክሎይ ከሌሊይ በጣም ወዳጅ ሆኖ ለእንግሊዝ ግንባር የሚሰጥ የፈረሱ መንገድ ይችላል። \n' +
        '\n' +
        'በተወሰነ ወቅት ክሎይ በዩሮ 2025 ጨዋታ ውስጥ ወደ ሴቶች የእግር ኳስ ዓለም ውድድር አሸነፈ ነበር። በተለይም ወደ ስፔን በሚገኝ የወቅታዊ ውድድር በመጨረሻ የተገኘው በኪያ ላይ ወቅታዊ ባለሙያ ነበር። እንግሊዝ በተወሰነ ውድድር 1-1 ወይም አንድ ወቅት አሸነፈ ግን በተወሰነ ውድድር 3-1 ተነሳ እንደገና ይታወቃል። \n' +
        '\n' +
        'በዚህ ወቅት የእግር ኳስ ዓለም ውድድር መንገድ በዚህ መንገድ ወደ ፍላጎት ይሂደአል። \n' +
        '\n' +
        '#እግርኳስዜና #ስፖርት #ዝማኔ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475188.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating betting content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: testing
🔍 Searching for matches based on channel preferences...
✅ Found targeted match: Arsenal vs Tottenham (Score: 31)
✅ Using targeted match for channel: Arsenal vs Tottenham
✅ Selected match: Arsenal vs Tottenham
📊 Performing betting analysis for Arsenal vs Tottenham
✅ Using team IDs: Home 42, Away 47
🔍 Getting team analysis using ID: Arsenal (42)
📊 Getting 10 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 10 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=10
🔮 Getting 5 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=5
🔍 Getting team analysis using ID: Tottenham (47)
📊 Getting 10 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 10 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=10
🔮 Getting 5 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=5
🔍 Getting detailed info using IDs: Arsenal (42) vs Tottenham (47)
📊 Getting 5 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=5
📊 Getting 5 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=5
🔄 Getting H2H data: Arsenal vs Tottenham
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
🔮 Getting 3 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 3 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=3
🔮 Getting 3 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 3 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=3
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
🔮 Generated 4 predictions for Arsenal vs Tottenham
📊 Match assessment: 77% confidence, HIGH predictability
🎨 Generating image with GPT-Image-1 model: Stadium atmosphere photo for Arsenal vs Tottenham football match: passionate fans in team colors, st...
✅ AI enhanced betting content in am: "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ

⚽ ሁለ..."
📏 Enhanced content length: 274 characters
🤖 AI edited content (am): "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.20-1.50 | እምነት 68% | ሁለቱም ቡድኖ..."
📏 AI edited content length: 274 characters
❌ Error marking betting content as used: {}
🎯 FINAL RESULT for am:
   Title: Arsenal vs Tottenham
   Final content length: 274 characters
   Using AI edited: true
   Content preview: "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.20-1.50 | እምነት 68% | ሁለቱም ቡድኖች ጥሩ የመስጠት እድል አላቸው (አርሰናል: 3, ቶተንሃም: 2 ጎሎች/ጨዋታ) |..."
✅ Successfully generated betting content
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: betting for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.20-1.50 | እምነት 68% | ሁለቱም ቡድኖች ጥሩ የመስጠት እድል አላቸው (አርሰናል: 3, ቶተንሃም: 2 ጎሎች/ጨዋታ) |
🧹 Cleaning HTML for Telegram: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ

⚽ ሁለ...
✅ HTML cleaned for Telegram: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ ⚽ ሁለቱ...
🧹 After HTML cleaning: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.20-1.50 | እምነት 68% | ሁለቱም ቡድኖች ጥሩ የመስጠት እድል አላቸው (አርሰናል: 3, ቶተንሃም: 2 ጎሎች/ጨዋታ) | 
🧹 Cleaning HTML for Telegram: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 79% | በቡድኖች አማካይ ፍላጎት

⚠️ 18+ በኃላፊነት ይዋረዱ...
✅ HTML cleaned for Telegram: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 79% | በቡድኖች አማካይ ፍላጎት ⚠️ 18+ በኃላፊነት ይዋረዱ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475032.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: false,
  enableShareButton: true,
  enableWebApp: true,
  priority: 'high',
  spoilerImage: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475032.png
🧹 HTML validation complete. Clean text length: 78
📊 Image downloaded successfully: 2042630 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 78
📤 Sending text message to: testingfde
📝 Message preview: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 79% | በቡድኖች አማካይ ፍላጎት ⚠️ 18+ በኃላፊነት ይዋረዱ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ✅ Generated 1 betting content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:04:44.786Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Betting Tips Generator (Attempt 1)',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'betting_1753945484786_h9kq0892k',
      type: 'betting',
      title: '🎯 Arsenal vs Tottenham - Betting Tips',
      content: '🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 104% | አርሰናል በቤት የሚሰጥ የተጨማሪ ኃይል እና የተሻለ ተግባር አላት | ⚠️ ዝቅተኛ አደጋ\n' +
        '\n' +
        '⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.20-1.50 | እምነት 68% | ሁለቱም ቡድኖች ጥሩ የመስጠት እድል አላቸው (አርሰናል: 3, ቶተንሃም: 2 ጎሎች/ጨዋታ) | ⚠️ መካከለኛ አደጋ\n' +
        '\n' +
        '🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 79% | በቡድኖች አማካይ ፍላጎት',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945475032.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 betting content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
 POST /api/automation/auto-scheduler 200 in 247684ms
 ✓ Compiled in 655ms (390 modules)
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753945530774.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1771813 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753945530774.png',
  id: '81ad3954-fba0-4a3e-b99e-c112f614c806',
  fullPath: 'generated-images/football_image_1753945530774.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945530774.png
🌐 URL accessibility test: 200 OK
🎯 GenerateBaseContent Debug: am, Predictions count: 4
🔍 Predictions data: [
  {
    type: 'match_result',
    prediction: 'HOME WIN',
    confidence: 103,
    reasoning: 'Home advantage (12.0%) and better form',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  },
  {
    type: 'both_teams_score',
    prediction: 'BOTH TEAMS TO SCORE: YES',
    confidence: 62,
    reasoning: 'Both teams average good scoring rates (Home: 3.0, Away: 2.0 goals/game)',
    odds_estimate: '1.50-2.00',
    expectedOdds: '1.50-2.00',
    valueRating: 'LOW',
    risk_level: 'MEDIUM'
  },
  {
    type: 'over_under',
    prediction: 'OVER 2.5 GOALS',
    confidence: 80,
    reasoning: 'Expected 4.1 goals based on team averages and H2H',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  }
]
📝 Base content generated (am): "🎯 የውርርድ ምክሮች: Arsenal በተቃ Tottenham

💰 ተመራጭ ውርርድ ምክሮች:

🏆 ምክር 1: የቤት ቡድን ያሸንፋል
💰 ዕድል: 1.20-1.50 | እምነት: 103%
📝 የቤት ጥቅም (12.0%) and ተሻለ ሁኔታ

⭐ ምክር..."
📏 Base content length: 531 characters
🤖 AI editing betting content for language: am (Channel: testing)
✅ AI enhanced betting content in am: "1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ ..."
📏 Enhanced content length: 281 characters
🤖 AI edited content (am): "1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ አደጋ

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.75 | እምነት 62% | ሁ..."
📏 AI edited content length: 281 characters
❌ Error marking betting content as used: {}
🎯 FINAL RESULT for am:
   Title: Arsenal vs Tottenham
   Final content length: 281 characters
   Using AI edited: true
   Content preview: "1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ አደጋ

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.75 | እምነት 62% | ሁለቱም ቡድኖች ከፍተኛ ግብ መስጠት ተመን (አርሰናል: 3 እና ቶተናም: 2 ግቦች..."
✅ Successfully generated betting content
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: betting for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ አደጋ

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.75 | እምነት 62% | ሁለቱም ቡድኖች ከፍተኛ ግብ መስጠት ተመን (አርሰናል: 3 እና ቶተናም: 2 ግቦች
🧹 Cleaning HTML for Telegram: 1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ ...
✅ HTML cleaned for Telegram: 1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ ...
🧹 After HTML cleaning: 1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ አደጋ 2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.75 | እምነት 62% | ሁለቱም ቡድኖች ከፍተኛ ግብ መስጠት ተመን (አርሰናል: 3 እና ቶተናም: 2 ግቦች/
🧹 Cleaning HTML for Telegram: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.35 | እምነት 80% | እ.ኤ.አ ደረጃ 4.1 ግቦች

⚠️ 18+ በኃላፊነት ይዋረዱ...
✅ HTML cleaned for Telegram: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.35 | እምነት 80% | እ.ኤ.አ ደረጃ 4.1 ግቦች ⚠️ 18+ በኃላፊነት ይዋረዱ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945530774.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: false,
  enableShareButton: true,
  enableWebApp: true,
  priority: 'high',
  spoilerImage: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945530774.png
🧹 HTML validation complete. Clean text length: 75
📊 Image downloaded successfully: 1771813 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 75
📤 Sending text message to: testingfde
📝 Message preview: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.35 | እምነት 80% | እ.ኤ.አ ደረጃ 4.1 ግቦች ⚠️ 18+ በኃላፊነት ይዋረዱ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ✅ Generated 1 betting content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:05:41.683Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 17,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Betting Tips Generator (Attempt 1)',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'betting_1753945541683_45xa62ovv',
      type: 'betting',
      title: '🎯 Arsenal vs Tottenham - Betting Tips',
      content: '1. 🏆 የቤት ድል: ዕድል 1.35 | እምነት 103% | በቤት አልኮል እና ጥሩ እንቅስቃሴ (12% ተጨማሪ መብት እና 100% ድል ድምቀት) | ⚠️ ዝቅተኛ አደጋ\n' +
        '\n' +
        '2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.75 | እምነት 62% | ሁለቱም ቡድኖች ከፍተኛ ግብ መስጠት ተመን (አርሰናል: 3 እና ቶተናም: 2 ግቦች/ጨዋታ) | ⚠️ መካከለኛ አደጋ\n' +
        '\n' +
        '3. 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.35 | እምነት 80% | እ.ኤ.አ ደረጃ 4.1 ግቦች',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753945530774.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 betting content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
 POST /api/automation/auto-scheduler 200 in 243236ms
 ✓ Compiled /api/smart-push/trigger in 465ms (324 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
🎯 Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753946590198',
  channel_ids: 1
}
🎫 Evaluating smart coupon for news in am
❌ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 1046ms
 ✓ Compiled in 138ms (324 modules)
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/cache/webpack/server-development/9.pack.gz_' -> '/Users/idosegev/Downloads/TriRoars/telegrambotsport/.next/cache/webpack/server-development/9.pack.gz'
 ✓ Compiled /api/automation/auto-scheduler in 183ms (364 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
⏱️ Rate Limiter initialized for 5 APIs
⚠️ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
🎯 Football API Manager initializing...
⚽ API-Football v3 initialized
✅ Football API Manager initialized with 1 APIs
🚀 UnifiedFootballService initialized with FootballAPIManager
✅ Full automation is enabled
🔧 Automation Engine Version: 2.0 - Production Logic Fixed
🚀 Starting automation cycle...
📺 Found 2 active channels with bots
📋 Found 9 active automation rules
⚙️ Processing rule: Test Morning News (news)
🎯 Found 2 matching channels for rule: Test Morning News
🔍 DEBUG: processAutomationRule - Rule: Test Morning News, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating news content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📰 Using news content generator for am
📰 Generating news content in am
📡 Fetching fresh RSS feeds
📡 RSS fetch attempt 1/2
📡 Fetching 3 RSS feeds
🔍 Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
🔍 Fetching RSS feed directly: https://www.theguardian.com/football/rss
🔍 Fetching RSS feed directly: https://talksport.com/football/feed/
✅ The Guardian Football: 50 items
✅ The Guardian Football: 50 items
✅ BBC Sport Football: 89 items
✅ BBC Sport Football: 89 items
✅ TalkSport: 100 items
✅ TalkSport: 100 items
📰 Total items: 239, Unique: 229
✅ RSS fetch successful on attempt 1
📰 Fetched and cached 229 news items
✅ Fetched 229 news items in 1590ms
🏆 Scoring 229 news items for channel: testing
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 140)
✅ CONTENT GENERATION ALLOWED: news for channel unified-content
✅ CONTENT GENERATION APPROVED: Proceeding with OpenAI call
🎨 Generating AI image
✅ Using OpenAI key from environment variables
🤖 AI editing news content for language: am
✅ Using OpenAI key from environment variables
✅ OpenAI client initialized
✅ OpenAI client initialized
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
Error logging OpenAI call: {}
🤖 AI Result for am: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድርጅት ወደብ ዋነኛ ድል ማዕከል የሚያወጣ ወይዘር ናት።

ኬሊ ገና ወደ የዚህ ድርጅት እንደ ወንጌል ምርጥ አለቃ በተለይ በስፖር ላይ ከሚገኙ ወሬዎች አንዱ እን...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753947076286.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1451814 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753947076286.png',
  id: '5dd9ddb2-62a3-497b-bbe0-9a7ae3336125',
  fullPath: 'generated-images/football_image_1753947076286.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947076286.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 29377ms
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: news for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድርጅት ወደብ ዋነኛ ድል ማዕከል የሚያወጣ ወይዘር ናት።

ኬሊ ገና ወደ የዚህ ድርጅት እንደ ወንጌል ምርጥ አለቃ በተለይ በስፖር ላይ ከሚገኙ ወሬዎች አንዱ እን
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድ...
🧹 After HTML cleaning: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድርጅት ወደብ ዋነኛ ድል ማዕከል የሚያወጣ ወይዘር ናት። ኬሊ ገና ወደ የዚህ ድርጅት እንደ ወንጌል ምርጥ አለቃ በተለይ በስፖር ላይ ከሚገኙ ወሬዎች አንዱ እንደ
🧹 Cleaning HTML for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድ...
✅ HTML cleaned for Telegram: ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947076286.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947076286.png
🧹 HTML validation complete. Clean text length: 456
📊 Image downloaded successfully: 1451814 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 456
📤 Sending text message to: testingfde
📝 Message preview: 📰 ⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:31:17.612Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 38,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ክሎይ ኬሊ ለዩሮ 2025 ድል የተወሰነ እንዴት የምን አቅም እንደሚያቀርብ ገለጻ ሰጣት። ኬሊ ወደ እንግሊዝ ወቅታዊ እንደ ምርጥ እንደሚያውቅ ወደ አውሮፓ ድርጅት ወደብ ዋነኛ ድል ማዕከል የሚያወጣ ወይዘር ናት።\n' +
        '\n' +
        'ኬሊ ገና ወደ የዚህ ድርጅት እንደ ወንጌል ምርጥ አለቃ በተለይ በስፖር ላይ ከሚገኙ ወሬዎች አንዱ እንደ አለኝታ ይወዳድር። ይህ የተወሰነው ድል በዚህ ውድድር ያለው ዕውቀት ላይ ያተኮር ሲሆን፣ ከምዕመናን ወንጌል ወደ አስፈላጊ ድምፅ ወይንም ወደ ድምፅ ውስጥ ወደ ውስጥ ይኖር።\n' +
        '\n' +
        'ኬሊ ወደ ወንጌል የተመለከተ የተወሰነ የምን አቅም ይሁን ይኖር ወይም ይታወቃል። ይህ የተወሰነው የምን የተወሰነው ከኪስ ጋር ይኖር ወይም ይጠብቃል ወይም ይገናኝ።\n' +
        '\n' +
        'ይህ የሚያሳይ ድምፅ ወደ ድምፅ ይኖር ወይም ይሁን ወይም ይሁን።',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947076286.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Morning News
⚙️ Processing rule: Pre-Match Betting Tips (betting)
🎯 Found 2 matching channels for rule: Pre-Match Betting Tips
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Betting Tips, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating betting content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: testing
🔍 Searching for matches based on channel preferences...
✅ Found targeted match: Arsenal vs Tottenham (Score: 31)
✅ Using targeted match for channel: Arsenal vs Tottenham
✅ Selected match: Arsenal vs Tottenham
📊 Performing betting analysis for Arsenal vs Tottenham
✅ Using team IDs: Home 42, Away 47
🔍 Getting team analysis using ID: Arsenal (42)
📊 Getting 10 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 10 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=10
🔮 Getting 5 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=5
🔍 Getting team analysis using ID: Tottenham (47)
📊 Getting 10 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 10 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=10
🔮 Getting 5 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=5
🔍 Getting detailed info using IDs: Arsenal (42) vs Tottenham (47)
📊 Getting 5 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=5
📊 Getting 5 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=5
🔄 Getting H2H data: Arsenal vs Tottenham
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
🔮 Getting 3 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 3 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=3
🔮 Getting 3 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 3 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=3
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
🔮 Generated 4 predictions for Arsenal vs Tottenham
📊 Match assessment: 78% confidence, HIGH predictability
🎨 Generating image with GPT-Image-1 model: Stadium atmosphere photo for Arsenal vs Tottenham football match: passionate fans in team colors, st...
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 2.9s (1049 modules)
🔍 Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
✅ Supabase client created successfully
 POST /api/automation/auto-scheduler 404 in 3122ms
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753947135370.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1781513 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753947135370.png',
  id: '9f2dd276-46c3-42be-b94d-08eebf908594',
  fullPath: 'generated-images/football_image_1753947135370.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947135370.png
🌐 URL accessibility test: 200 OK
🎯 GenerateBaseContent Debug: am, Predictions count: 4
🔍 Predictions data: [
  {
    type: 'match_result',
    prediction: 'HOME WIN',
    confidence: 111,
    reasoning: 'Home advantage (12.0%) and better form',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  },
  {
    type: 'both_teams_score',
    prediction: 'BOTH TEAMS TO SCORE: YES',
    confidence: 55,
    reasoning: 'Both teams average good scoring rates (Home: 3.0, Away: 2.0 goals/game)',
    odds_estimate: '1.50-2.00',
    expectedOdds: '1.50-2.00',
    valueRating: 'LOW',
    risk_level: 'HIGH'
  },
  {
    type: 'over_under',
    prediction: 'OVER 2.5 GOALS',
    confidence: 77,
    reasoning: 'Expected 3.6 goals based on team averages and H2H',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  }
]
📝 Base content generated (am): "🎯 የውርርድ ምክሮች: Arsenal በተቃ Tottenham

💰 ተመራጭ ውርርድ ምክሮች:

🏆 ምክር 1: የቤት ቡድን ያሸንፋል
💰 ዕድል: 1.20-1.50 | እምነት: 111%
📝 የቤት ጥቅም (12.0%) and ተሻለ ሁኔታ

⭐ ምክር..."
📏 Base content length: 531 characters
🤖 AI editing betting content for language: am (Channel: testing)
✅ AI enhanced betting content in am: "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍ..."
📏 Enhanced content length: 290 characters
🤖 AI edited content (am): "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍተኛ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 55% | ..."
📏 AI edited content length: 290 characters
❌ Error marking betting content as used: {}
🎯 FINAL RESULT for am:
   Title: Arsenal vs Tottenham
   Final content length: 290 characters
   Using AI edited: true
   Content preview: "🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍተኛ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 55% | የሁለቱም ቡድኖች መልካም እግር ግቦች አላቸው (አርሰናል: 3.0, ቶተንሃም: 2..."
✅ Successfully generated betting content
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: betting for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍተኛ

⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 55% | የሁለቱም ቡድኖች መልካም እግር ግቦች አላቸው (አርሰናል: 3.0, ቶተንሃም: 2
🧹 Cleaning HTML for Telegram: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍ...
✅ HTML cleaned for Telegram: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍ...
🧹 After HTML cleaning: 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍተኛ ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 55% | የሁለቱም ቡድኖች መልካም እግር ግቦች አላቸው (አርሰናል: 3.0, ቶተንሃም: 2.
🧹 Cleaning HTML for Telegram: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 77% | በቡድኖች

⚠️ 18+ በኃላፊነት ይዋረዱ...
✅ HTML cleaned for Telegram: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 77% | በቡድኖች ⚠️ 18+ በኃላፊነት ይዋረዱ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947135370.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: false,
  enableShareButton: true,
  enableWebApp: true,
  priority: 'high',
  spoilerImage: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947135370.png
🧹 HTML validation complete. Clean text length: 68
📊 Image downloaded successfully: 1781513 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 68
📤 Sending text message to: testingfde
📝 Message preview: 🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 77% | በቡድኖች ⚠️ 18+ በኃላፊነት ይዋረዱ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ✅ Generated 1 betting content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:32:29.396Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 21,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Betting Tips Generator (Attempt 1)',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'betting_1753947149396_fz423ba99',
      type: 'betting',
      title: '🎯 Arsenal vs Tottenham - Betting Tips',
      content: '🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 111% | አርሰናል በቤት ጥሩ ሁኔታ እና መልካም ቅርንጫፍ አላቸው | ⚠️ ዝቅተኛ አደጋ | Value: ከፍተኛ\n' +
        '\n' +
        '⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 55% | የሁለቱም ቡድኖች መልካም እግር ግቦች አላቸው (አርሰናል: 3.0, ቶተንሃም: 2.0 ጎሎች/ጨዋታ) | ⚠️ ከፍተኛ አደጋ | Value: ዝቅተኛ\n' +
        '\n' +
        '🎯 ከ2.5 ጎሎች በላይ: ዕድል 1.20-1.50 | እምነት 77% | በቡድኖች',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947135370.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 betting content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Betting Tips
⚙️ Processing rule: Pre-Match Analysis (analysis)
🎯 Found 2 matching channels for rule: Pre-Match Analysis
🔍 DEBUG: processAutomationRule - Rule: Pre-Match Analysis, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering analysis for 2 channels
📤 Triggering real content generation: analysis for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: analysis
🌍 Languages detected: [ 'am' ]
🎯 Generating analysis content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'analysis',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: analysis | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating analysis content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📈 Using match analysis generator for am
🔍 Generating comprehensive match analysis in am
🎯 Getting daily important match for analysis
⚠️ No daily matches found, falling back to unified service
🎯 Getting matches optimized for analysis content
🎯 MAIN WORKFLOW: Getting smart matches for analysis in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for analysis in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
❌ No suitable match found for analysis
🔍 DEBUG: API Response status: 200
✅ Successfully generated analysis content in am: ⚠️ No analysis content could be generated at this time.
🔍 DEBUG: API Response: {
  success: false,
  timestamp: '2025-07-31T07:32:32.801Z',
  content_type: 'analysis',
  language: 'am',
  mode: 'ai_enhanced',
  error: 'No content available',
  message: '⚠️ No analysis content could be generated at this time.',
  processing_info: {
    data_source: 'Analysis Generator - No Result',
    ai_processing: false,
    image_generation: false,
    fallback_used: true
  },
  statistics: {
    channels_processed: 0,
    total_content_sent: 0,
    images_generated: 0,
    fallback_used: true
  }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Pre-Match Analysis
⚙️ Processing rule: Live Updates (live)
🎯 Found 2 matching channels for rule: Live Updates
🔍 DEBUG: processAutomationRule - Rule: Live Updates, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering live for 2 channels
📤 Triggering real content generation: live for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: live
🌍 Languages detected: [ 'am' ]
🎯 Generating live content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'live',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: live | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating live content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🔴 Using enhanced live content generator with fallback for am
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
🔴 Generating live update for am
🔴 Getting current live match from daily important matches
⚠️ No daily live matches found, falling back to unified service
🎯 Getting matches optimized for live_update content
🎯 MAIN WORKFLOW: Getting smart matches for live_update in am
🎯 === DETAILED API DEBUG FOR SMART MATCHES ===
🎯 Getting smart matches for live_update in am
🔄 Refreshing available APIs...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
✅ Added api-football: https://v3.football.api-sports.io
✅ Added thesportsdb: https://www.thesportsdb.com/api/v1/json/123
🔑 Total working APIs: 2
🔍 WORKING APIS DEBUG:
  - Total APIs found: 2
  - Working APIs: 2
  - API 1: api-football (https://v3.football.api-sports.io)
  - API 2: thesportsdb (https://www.thesportsdb.com/api/v1/json/123)
🔑 Available APIs: api-football, thesportsdb

🔄 === TRYING API: api-football ===
⚠️ api-football has reached its limit, trying next API

🔄 === TRYING API: thesportsdb ===
⚠️ thesportsdb has reached its limit, trying next API

🆓 === LAST RESORT: TheSportsDB ===
🆓 Fetching from TheSportsDB with user key 123...
❌ No environment key for football-data-org
✅ Added api-football from environment (key length: 32)
❌ No environment key for apifootball
❌ No environment key for soccersapi
✅ Added free API: thesportsdb
🔑 Final API keys available: [ 'api-football', 'thesportsdb' ]
📊 Environment keys used: 2
📊 Database keys used: 0
🔑 Using TheSportsDB API key: 123
🔮 Fetching upcoming matches for future content...
🔮 Total matches found: 0
📊 TheSportsDB returned 0 matches
🚫 No real matches available - returning empty array (no fake matches!)
⚠️ No live match available, using fallback
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: live for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም

📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች

#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ

⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስ...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታ...
🧹 After HTML cleaning: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች
🏟️ በቀጥታ ከመጫወቻ ሜዳ
⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት
📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም 📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን
🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች #እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት
🧹 Cleaning HTML for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
✅ HTML cleaned for Telegram: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
🚫 Image generation disabled for content type: live
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: testing
🧹 HTML validation complete. Clean text length: 48
📤 Sending text message to: testingfde
📝 Message preview: 🔴 የቀጥታ የእግር ኳስ ዝማኔ ⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated live content in am: ✅ Generated 1 live content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:32:34.699Z',
  content_type: 'live',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 0,
    average_ai_score: 85,
    processing_time_seconds: 19,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Live Updates Generator',
    ai_processing: true,
    image_generation: false,
    fallback_used: false
  },
  content_items: [
    {
      id: 'live_fallback_1753947153838',
      type: 'live',
      title: '⚽ የቀጥታ የእግር ኳስ ዝማኔ',
      content: '🔴 የቀጥታ የእግር ኳስ ዝማኔ\n' +
        '\n' +
        '⚽ የአሁኑ የእግር ኳስ ውጤቶች እና ዝማኔዎች\n' +
        '🏟️ በቀጥታ ከመጫወቻ ሜዳ\n' +
        '⏰ አሁኑኑ ውጤቶች እና የጨዋታ ሂደት\n' +
        '📊 ቀጥታ ስታቲስቲክስ እና ተጫዋቾች አፈጻጸም\n' +
        '\n' +
        '📱 ለተጨማሪ ቀጥታ ዝማኔዎች ይከተሉን\n' +
        '🔔 ፈጣን ማሳወቂያ ለሁሉም ጨዋታዎች\n' +
        '\n' +
        '#እግርኳስ #ቀጥታዝማኔ #ውጤቶች #ስፖርት',
      language: 'am',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 live content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Live Updates
⚙️ Processing rule: Daily Summary (daily_summary)
🎯 Found 2 matching channels for rule: Daily Summary
🔍 DEBUG: processAutomationRule - Rule: Daily Summary, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering daily_summary content for 2 channels
📤 Triggering real content generation: daily_summary for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: daily_summary
🌍 Languages detected: [ 'am' ]
🎯 Generating daily_summary content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'daily_summary',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: daily_summary | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating daily_summary content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📋 Using daily summary generator for am
📅 Generating daily summary in am
📅 Generating daily summary for today
📅 Getting matches for daily summary
📅 Getting matches for date: 2025-07-30 (for daily summary)
📅 Getting matches for date: 2025-07-30
🎯 Getting fixtures for date: 2025-07-30
📅 API-Football v3: Getting fixtures for date 2025-07-30
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-07-30
✅ Found 201 fixtures for 2025-07-30 from API-Football v3
📅 Found 201 matches for 2025-07-30
📅 Found 201 real matches for 2025-07-30
🔍 Analyzing 201 matches for interest level (top 4)
🔮 Getting tomorrow's fixtures for today
📅 Getting matches for date: 2025-08-01
🎯 Getting fixtures for date: 2025-08-01
📅 API-Football v3: Getting fixtures for date 2025-08-01
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?date=2025-08-01
✅ Found 228 fixtures for 2025-08-01 from API-Football v3
📅 Found 228 matches for 2025-08-01
🔮 Found 228 fixtures for tomorrow
🎨 Generating daily summary image for 2025-07-31
🎨 Generating image with GPT-Image-1 model: Simple and clean football-themed infographic showing only the title "Daily Summary" in elegant text....
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753947202484.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1143394 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753947202484.png',
  id: '36df0787-d8e9-477e-a3d8-582340a6daf7',
  fullPath: 'generated-images/football_image_1753947202484.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947202484.png
🌐 URL accessibility test: 200 OK
✅ Daily summary image generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947202484.png
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: daily_summary for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት

2. Ferencvarosi TC 4-3 FC Noah
   🏟️ UEFA Champions League
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025

🏆 ዋና ዋና ውጤቶች

1. Anenii Noi 0-5 Swieqi Utd W
   🏟️ UEFA Champions...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🧹 After HTML cleaning: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት 2. Ferencvarosi TC 4-3 FC Noah 🏟️ UEFA Champions League | 7 ጎሎች 
🧹 Cleaning HTML for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
✅ HTML cleaned for Telegram: 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions Leag...
🚫 Image generation disabled for content type: daily_summary
📋 Using default Telegram settings
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'normal'
}
📤 Sending to channel: testing
🧹 HTML validation complete. Clean text length: 448
📤 Sending text message to: testingfde
📝 Message preview: 📋 📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025 🏆 ዋና ዋና ውጤቶች 1. Anenii Noi 0-5 Swieqi Utd W 🏟️ UEFA Champions L...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated daily_summary content in am: ✅ Generated 1 daily_summary content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:33:23.905Z',
  content_type: 'daily_summary',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 20,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Daily Summary Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'daily_summary_1753947203904_8tevdfc7g',
      type: 'daily_summary',
      title: '📅 Daily Football Roundup - 7/31/2025',
      content: '📅 የዕለት እግርኳስ ማጠቃለያ - 7/31/2025\n' +
        '\n' +
        '🏆 ዋና ዋና ውጤቶች\n' +
        '\n' +
        '1. Anenii Noi 0-5 Swieqi Utd W\n' +
        '   🏟️ UEFA Champions League Women | 5 ጎሎች ያሉት አስደሳች 0-5 ውጤት\n' +
        '\n' +
        '2. Ferencvarosi TC 4-3 FC Noah\n' +
        '   🏟️ UEFA Champions League | 7 ጎሎች ያሉት አስደሳች 4-3 ውጤት\n' +
        '\n' +
        '3. Racing W 5-3 AEK Athens W\n' +
        '   🏟️ UEFA Champions League Women | 8 ጎሎች ያሉት አስደሳች 5-3 ውጤት\n' +
        '\n' +
        '📊 ስታትስቲክስ\n' +
        '• 201 ጨዋታዎች\n' +
        '• 575 ጎሎች\n' +
        '\n' +
        '👀 የነገ ጨዋታዎች\n' +
        '• Juan Pablo II College vs Alianza Lima\n' +
        '• Aldosivi vs Argentinos JRS\n' +
        '• Flamengo vs Atletico-MG\n',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947202484.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 daily_summary content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Daily Summary
⚙️ Processing rule: Smart Coupons (smart_push)
🎯 Found 2 matching channels for rule: Smart Coupons
🔍 DEBUG: processAutomationRule - Rule: Smart Coupons, Type: context_aware
🔍 DEBUG: processContextAwareRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering smart_push for 2 channels
📤 Triggering real content generation: smart_push for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: smart_push
🌍 Languages detected: [ 'am' ]
🎯 Generating smart_push content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'smart_push',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🔍 DEBUG: API Response status: 400
❌ Failed to generate smart_push content in am: {"success":false,"error":"Unsupported content type: smart_push. Supported: live, betting, news, polls, analysis, coupons, memes, daily_summary, weekly_summary"}
🔍 DEBUG: triggerRealContentGeneration - Final result: false
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Smart Coupons
⚙️ Processing rule: Test News Auto (news)
🎯 Found 2 matching channels for rule: Test News Auto
🔍 DEBUG: processAutomationRule - Rule: Test News Auto, Type: scheduled
🔍 DEBUG: processScheduledRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering news content for 2 channels
📤 Triggering real content generation: news for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: news
🌍 Languages detected: [ 'am' ]
🎯 Generating news content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'news',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating news content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
📰 Using news content generator for am
📰 Generating news content in am
📰 Using cached RSS feeds
✅ Fetched 229 news items in 0ms
🏆 Scoring 229 news items for channel: testing
🔍 Finding best unused news for channel unified-content
❌ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
✅ Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
✅ Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 140)
✅ CONTENT GENERATION ALLOWED: news for channel unified-content
✅ CONTENT GENERATION APPROVED: Proceeding with OpenAI call
🎨 Generating AI image
🤖 AI editing news content for language: am
🎨 Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
Error logging OpenAI call: {}
🤖 AI Result for am: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና ወንድ ጣቢያ ውስጥ የሚያገኝ የገንዘብ መዋቅር ተገንዝቦ በአስቀድሞ ተደርጓል። 

በእንግላንድ ጋር የወይን ድምፅ ማለት ላይ እንደ ተለመደው የሚገኝ የአስቀድሞ...
✅ Using AI result for am
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753947239969.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1634383 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753947239969.png',
  id: '1c421b2a-f6a9-4cff-9e88-720e58abf0ca',
  fullPath: 'generated-images/football_image_1753947239969.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947239969.png
🌐 URL accessibility test: 200 OK
✅ News generation completed in 36449ms
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: news for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና ወንድ ጣቢያ ውስጥ የሚያገኝ የገንዘብ መዋቅር ተገንዝቦ በአስቀድሞ ተደርጓል። 

በእንግላንድ ጋር የወይን ድምፅ ማለት ላይ እንደ ተለመደው የሚገኝ የአስቀድሞ
🧹 Cleaning HTML for Telegram: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና...
✅ HTML cleaned for Telegram: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና...
🧹 After HTML cleaning: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና ወንድ ጣቢያ ውስጥ የሚያገኝ የገንዘብ መዋቅር ተገንዝቦ በአስቀድሞ ተደርጓል። በእንግላንድ ጋር የወይን ድምፅ ማለት ላይ እንደ ተለመደው የሚገኝ የአስቀድሞ ወ
🧹 Cleaning HTML for Telegram: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና...
✅ HTML cleaned for Telegram: ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947239969.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: true,
  enableShareButton: true,
  enableWebApp: false,
  priority: 'high',
  spoilerImage: false,
  disablePreview: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: true,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947239969.png
🧹 HTML validation complete. Clean text length: 449
📊 Image downloaded successfully: 1634383 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processScheduledRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:162:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:139:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 449
📤 Sending text message to: testingfde
📝 Message preview: 📰 ⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated news content in am: ✅ Generated 1 news content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:34:01.485Z',
  content_type: 'news',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 16,
    fallback_used: false
  },
  processing_info: {
    data_source: 'News Generator',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'Post 3418661 at talkSPORT',
      type: 'news',
      title: 'Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory',
      content: '⚽ ትምህርታቸው የሚያውቅ ክርክር በኢንግላንድ የአውሮፓ ጥሪ ውድድር ድል ፈጽሞ እንደ ገና ይወዳድራል። በንግስት ቡድን የሚገኝ ክሮይ ኬሊ የሚያወቅ የወንድ እና ወንድ ጣቢያ ውስጥ የሚያገኝ የገንዘብ መዋቅር ተገንዝቦ በአስቀድሞ ተደርጓል። \n' +
        '\n' +
        'በእንግላንድ ጋር የወይን ድምፅ ማለት ላይ እንደ ተለመደው የሚገኝ የአስቀድሞ ወይን ከማለት ጋር ይቀየራል። ኬሊ የሚንግስት ቡድን እንደተረጋገጠ ወይን ውድድር በምርጫ ለወይን መዋቅር ወደ እንግላንድ የተማረውን ወይን አምጣበት። በዚህ ውድድር ውስጥ እንግላንድ ወይን 3-1 በመጨረሻ ወይን አስቀድሞ ተደርጓል። \n' +
        '\n' +
        'የኬሊ ምርጥ የተገናኘ የአስቀድሞ ወይን ወደ ውድድር ወደ ወይን ወደ ወይን ወይን ወይን ወይን ወይን የመንግስት ወይን እና እንደ ተለዋዋጭ ወይን ይወዳድራል። በአስ',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947239969.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 news content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test News Auto
⚙️ Processing rule: Test Betting Auto (betting)
🎯 Found 2 matching channels for rule: Test Betting Auto
🔍 DEBUG: processAutomationRule - Rule: Test Betting Auto, Type: event_driven
🔍 DEBUG: processEventDrivenRule - NODE_ENV: development, VERCEL: false, isLocal: true, isProd: undefined
🎯 Local Development: triggering betting for 2 channels
📤 Triggering real content generation: betting for 2 channels
🔍 DEBUG: triggerRealContentGeneration - Starting for contentType: betting
🌍 Languages detected: [ 'am' ]
🎯 Generating betting content in am for 2 channels
🔍 DEBUG: Calling unified-content API directly (no HTTP)
🔍 DEBUG: Request body: {
  contentType: 'betting',
  language: 'am',
  target_channels: 'testingfde,@africansportdata',
  isAutomated: true
}
🚀 Unified Content API: send_now | Type: betting | Mode: ai_enhanced | Language: am
🔍 Request body structure: {
  target_channels: 'testingfde,@africansportdata',
  target_channels_type: 'string',
  target_channels_isArray: false,
  body_keys: [ 'contentType', 'language', 'target_channels', 'isAutomated' ]
}
✅ FINAL LANGUAGE DECISION: am (will be used for AI content generation)
🎯 NO TARGET CHANNELS: Finding active channels with bots
🔍 Finding channels for specified language: am
📍 Found 2 channels for language 'am':
  - testing (am)
  - AfircaSportCenter (am)
🎯 Using primary channel: testing
🎯 Content Router: Generating betting content for am (Channel: testing)
📋 Channel settings: Leagues: 0, Teams: 0, Affiliate: none
🎯 Using betting tips generator for am
🎯 Betting attempt 1/3
🎯 Generating betting tips in am
🎯 Getting match for betting tips for channel: testing
🔍 Searching for matches based on channel preferences...
✅ Found targeted match: Arsenal vs Tottenham (Score: 31)
✅ Using targeted match for channel: Arsenal vs Tottenham
✅ Selected match: Arsenal vs Tottenham
📊 Performing betting analysis for Arsenal vs Tottenham
✅ Using team IDs: Home 42, Away 47
🔍 Getting team analysis using ID: Arsenal (42)
📊 Getting 10 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 10 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=10
🔮 Getting 5 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=5
🔍 Getting team analysis using ID: Tottenham (47)
📊 Getting 10 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 10 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=10
🔮 Getting 5 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=5
🔍 Getting detailed info using IDs: Arsenal (42) vs Tottenham (47)
📊 Getting 5 matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting last 5 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&last=5
📊 Getting 5 matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting last 5 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&last=5
🔄 Getting H2H data: Arsenal vs Tottenham
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 2 matches from API-Football v3
✅ Got 2 matches from API-Football
✅ Found 1 matches from API-Football v3
✅ Got 1 matches from API-Football
🔮 Getting 3 upcoming matches for team Arsenal (ID: 42)
📊 API-Football v3: Getting upcoming 3 matches for team 42
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=42&season=2025&next=3
🔮 Getting 3 upcoming matches for team Tottenham (ID: 47)
📊 API-Football v3: Getting upcoming 3 matches for team 47
🔍 API-Football v3: https://v3.football.api-sports.io/fixtures?team=47&season=2025&next=3
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 5 upcoming matches from API-Football v3
✅ Got 5 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
✅ Found 3 upcoming matches from API-Football v3
✅ Got 3 upcoming matches from API-Football
🔮 Generated 4 predictions for Arsenal vs Tottenham
📊 Match assessment: 77% confidence, HIGH predictability
🎨 Generating image with GPT-Image-1 model: Stadium atmosphere photo for Arsenal vs Tottenham football match: passionate fans in team colors, st...
✅ GPT-Image-1 generated successfully
📤 Uploading football_image_1753947297193.png to Supabase Storage...
🔑 Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
🔐 Service role key available: true
📊 Image buffer size: 1888265 bytes
🔍 Checking bucket access...
🔌 Database connection test: FAILED
🔌 DB Error: relation "public.user_roles" does not exist
📂 Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
✅ Target bucket found: generated-images (public: true)
🚀 Starting upload...
✅ Upload successful! Data: {
  path: 'football_image_1753947297193.png',
  id: '9586496e-9411-4f01-97a3-725c311fa9e4',
  fullPath: 'generated-images/football_image_1753947297193.png'
}
✅ Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947297193.png
🌐 URL accessibility test: 200 OK
🎯 GenerateBaseContent Debug: am, Predictions count: 4
🔍 Predictions data: [
  {
    type: 'match_result',
    prediction: 'HOME WIN',
    confidence: 110,
    reasoning: 'Home advantage (12.0%) and better form',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  },
  {
    type: 'both_teams_score',
    prediction: 'BOTH TEAMS TO SCORE: YES',
    confidence: 53,
    reasoning: 'Both teams average good scoring rates (Home: 3.0, Away: 2.0 goals/game)',
    odds_estimate: '1.50-2.00',
    expectedOdds: '1.50-2.00',
    valueRating: 'LOW',
    risk_level: 'HIGH'
  },
  {
    type: 'over_under',
    prediction: 'OVER 2.5 GOALS',
    confidence: 80,
    reasoning: 'Expected 3.9 goals based on team averages and H2H',
    odds_estimate: '1.20-1.50',
    expectedOdds: '1.20-1.50',
    valueRating: 'HIGH',
    risk_level: 'LOW'
  }
]
📝 Base content generated (am): "🎯 የውርርድ ምክሮች: Arsenal በተቃ Tottenham

💰 ተመራጭ ውርርድ ምክሮች:

🏆 ምክር 1: የቤት ቡድን ያሸንፋል
💰 ዕድል: 1.20-1.50 | እምነት: 110%
📝 የቤት ጥቅም (12.0%) and ተሻለ ሁኔታ

⭐ ምክር..."
📏 Base content length: 531 characters
🤖 AI editing betting content for language: am (Channel: testing)
✅ AI enhanced betting content in am: "1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋ..."
📏 Enhanced content length: 275 characters
🤖 AI edited content (am): "1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋጋ እንደሚሞላ: ከፍተኛ

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.0..."
📏 AI edited content length: 275 characters
❌ Error marking betting content as used: {}
🎯 FINAL RESULT for am:
   Title: Arsenal vs Tottenham
   Final content length: 275 characters
   Using AI edited: true
   Content preview: "1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋጋ እንደሚሞላ: ከፍተኛ

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 53% | ሁለቱም ቡድኖች መነሻ ጎሎች የተደጋገሙ ነው (አርሰናል:..."
✅ Successfully generated betting content
📤 Starting Telegram distribution...
🎯 Using target channels: 4118ad01-22b8-4583-a161-d15c20bb3d04
🔓 Decoded base64 token for channel: testing
📊 Found 1 active channels for language am:
  - testing (am)
✅ Content sending allowed: betting for channel 4118ad01-22b8-4583-a161-d15c20bb3d04
✅ Spam check passed: 1/1 channels allowed
🔍 Before HTML cleaning: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋጋ እንደሚሞላ: ከፍተኛ

2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 53% | ሁለቱም ቡድኖች መነሻ ጎሎች የተደጋገሙ ነው (አርሰናል:
🧹 Cleaning HTML for Telegram: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋ...
✅ HTML cleaned for Telegram: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋ...
🧹 After HTML cleaning: 1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋጋ እንደሚሞላ: ከፍተኛ 2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 53% | ሁለቱም ቡድኖች መነሻ ጎሎች የተደጋገሙ ነው (አርሰናል: 
🧹 Cleaning HTML for Telegram: 🎯 ከ2.5

⚠️ 18+ በኃላፊነት ይዋረዱ...
✅ HTML cleaned for Telegram: 🎯 ከ2.5 ⚠️ 18+ በኃላፊነት ይዋረዱ...
📷 Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947297193.png
🎛️ Found enhanced Telegram metadata: {
  protectContent: false,
  enableShareButton: true,
  enableWebApp: true,
  priority: 'high',
  spoilerImage: false
}
⏰ Distribution - Enhanced settings: {
  disableNotification: false,
  protectContent: false,
  hasSpoiler: false,
  priority: 'high'
}
📤 Sending to channel: testing
📷 Attempting to send message with image
📷 Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947297193.png
🧹 HTML validation complete. Clean text length: 26
📊 Image downloaded successfully: 1888265 bytes
❌ Image send failed: Error: Photo send failed: 400 Bad Request
    at TelegramSender.sendMessage (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:26:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async TelegramSender.sendToMultipleChannels (webpack-internal:///(rsc)/./src/lib/content/telegram-sender.ts:256:28)
    at async TelegramDistributor.distributeToChannels (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:229:36)
    at async TelegramDistributor.sendContentToTelegram (webpack-internal:///(rsc)/./src/lib/content/api-modules/telegram-distributor.ts:72:40)
    at async POST (webpack-internal:///(rsc)/./src/app/api/unified-content/route.ts:166:40)
    at async triggerRealContentGeneration (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:385:34)
    at async processEventDrivenRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:221:25)
    at async processAutomationRule (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:142:22)
    at async POST (webpack-internal:///(rsc)/./src/app/api/automation/auto-scheduler/route.ts:85:37)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:55038
    at async ek.execute (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:45808)
    at async ek.handle (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56292)
    at async doRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1377:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1599:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1507:28)
    at async DevServer.renderPageComponent (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1931:24)
    at async DevServer.renderToResponseImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:1969:32)
    at async DevServer.pipeImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:920:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/base-server.js:816:17)
    at async /Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/Users/idosegev/Downloads/TriRoars/telegrambotsport/node_modules/next/dist/server/lib/start-server.js:141:13)
🔄 Falling back to text-only message...
🧹 HTML validation complete. Clean text length: 26
📤 Sending text message to: testingfde
📝 Message preview: 🎯 ከ2.5 ⚠️ 18+ በኃላፊነት ይዋረዱ...
❌ Failed to send message to testingfde: Body is unusable
❌ Failed to send to testing: Body is unusable
✅ Distribution completed: 0/1 channels
📝 Skipping content save to database (RLS policy needs update)
🔍 DEBUG: API Response status: 200
✅ Successfully generated betting content in am: ✅ Generated 1 betting content items in am!
🔍 DEBUG: API Response: {
  success: true,
  timestamp: '2025-07-31T07:35:07.827Z',
  content_type: 'betting',
  language: 'am',
  mode: 'ai_enhanced',
  statistics: {
    channels_processed: 1,
    total_content_sent: 1,
    images_generated: 1,
    average_ai_score: 85,
    processing_time_seconds: 31,
    fallback_used: false
  },
  processing_info: {
    data_source: 'Betting Tips Generator (Attempt 1)',
    ai_processing: true,
    image_generation: true,
    fallback_used: false
  },
  content_items: [
    {
      id: 'betting_1753947307826_bv0wesq1l',
      type: 'betting',
      title: '🎯 Arsenal vs Tottenham - Betting Tips',
      content: '1. 🏆 የቤት ድል: ዕድል 1.20-1.50 | እምነት 110% | በቤት ጥሩ ውጤት እና የቀድሞ ውጊያ አሸናፊነት ዋስትና | ⚠️ የአደጋ ደረጃ: ዝቅተኛ | ዋጋ እንደሚሞላ: ከፍተኛ\n' +
        '\n' +
        '2. ⚽ ሁለቱም ቡድኖች ያስገባሉ: ዕድል 1.50-2.00 | እምነት 53% | ሁለቱም ቡድኖች መነሻ ጎሎች የተደጋገሙ ነው (አርሰናል: 3.0, ቶተንሃም: 2.0 ጎሎች/ጨዋታ) | ⚠️ የአደጋ ደረጃ: ከፍተኛ | ዋጋ እንደሚሞላ: ዝቅተኛ\n' +
        '\n' +
        '3. 🎯 ከ2.5',
      language: 'am',
      imageUrl: 'https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753947297193.png',
      metadata: [Object]
    }
  ],
  message: '✅ Generated 1 betting content items in am!',
  telegram: { success: false, channels: 1, results: [ [Object] ] }
}
🔍 DEBUG: triggerRealContentGeneration - Final result: true
🔍 DEBUG: processAutomationRule result: SUCCESS
✅ Successfully processed: Test Betting Auto
⚙️ Processing rule: Test Live Auto (live)
🎯 Found 2 matching channels for rule: Test Live Auto
🔍 DEBUG: processAutomationRule - Rule: Test Live Auto, Type: continuous
🔍 DEBUG: Unknown automation_type: continuous
🔍 DEBUG: processAutomationRule result: NULL
⏭️ Skipped rule: Test Live Auto (conditions not met)
🎯 Automation cycle completed: 8 rules processed, 14 content generated
 POST /api/automation/auto-scheduler 200 in 262870ms
