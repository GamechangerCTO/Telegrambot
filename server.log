
> telegram-bot-management-system@1.0.0 dev
> next dev

  â–² Next.js 14.2.5
  - Local:        http://localhost:3000
  - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 2.2s
 â—‹ Compiling /api/unified-content ...
 âœ“ Compiled /api/unified-content in 1228ms (363 modules)
ğŸ” Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
âœ… Supabase client created successfully
â±ï¸ Rate Limiter initialized for 5 APIs
âš ï¸ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
ğŸ¯ Football API Manager initializing...
âš½ API-Football v3 initialized
âœ… Football API Manager initialized with 1 APIs
ğŸš€ UnifiedFootballService initialized with FootballAPIManager
ğŸš€ Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
ğŸ” Request body structure: {
  target_channels: undefined,
  target_channels_type: 'undefined',
  target_channels_isArray: false,
  body_keys: []
}
âœ… FINAL LANGUAGE DECISION: am (will be used for AI content generation)
ğŸ¯ NO TARGET CHANNELS: Finding active channels with bots
ğŸ” Finding channels for specified language: am
ğŸ“ Found 1 channels for language 'am':
  - AfircaSportCenter (am)
ğŸ¯ Using primary channel: AfircaSportCenter
ğŸ¯ Content Router: Generating news content for am (Channel: AfircaSportCenter)
ğŸ“‹ Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
ğŸ“° Using news content generator for am
ğŸ“° Generating news content in am
ğŸ“¡ Fetching fresh RSS feeds
ğŸ“¡ RSS fetch attempt 1/2
ğŸ“¡ Fetching 3 RSS feeds
ğŸ” Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
ğŸ” Fetching RSS feed directly: https://www.theguardian.com/football/rss
ğŸ” Fetching RSS feed directly: https://talksport.com/football/feed/
âœ… The Guardian Football: 51 items
âœ… The Guardian Football: 51 items
âœ… BBC Sport Football: 89 items
âœ… BBC Sport Football: 89 items
âœ… TalkSport: 100 items
âœ… TalkSport: 100 items
ğŸ“° Total items: 240, Unique: 228
âœ… RSS fetch successful on attempt 1
ğŸ“° Fetched and cached 228 news items
âœ… Fetched 228 news items in 3387ms
ğŸ† Scoring 228 news items for channel: AfircaSportCenter
ğŸ¯ Channel preferences: 0 teams, 20 leagues
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ” Finding best unused news for channel unified-content
âŒ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
âœ… Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
âœ… Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
ğŸ¨ Generating AI image
ğŸ¤– AI editing news content for language: am
âœ… Using OpenAI key from environment (fallback)
âœ… OpenAI client initialized
âœ… Using OpenAI key from environment (fallback)
âœ… OpenAI client initialized
ğŸ¨ Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
ğŸ¤– AI Result for am: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢

á‹­áˆ… á‹¨á‹ˆá‰…á‰± áˆá‰°áŠ“ á‹ˆá‹° á‹ˆá‰…á‰± á‹ˆá‹° á‹ˆá‰…á‰± áˆ›áˆˆá‰µ áŠá‹á¢ á‰áˆ­áŒ¥ á‹ˆá‹° áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹¨áˆšáŠ–áˆ¨á‹ á‹áˆ­á‹áˆ­ á‹­áˆ…áŠ•áŠ• á‹¨á‹ˆá‰…á‰± á‹¨áˆ¥áˆ­á‹“á‰µ áŠ­áˆ­áŠ­áˆ­ ...
âœ… Using AI result for am
âœ… GPT-Image-1 generated successfully
ğŸ“¤ Uploading football_image_1753895556396.png to Supabase Storage...
ğŸ”‘ Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
ğŸ” Service role key available: true
ğŸ“Š Image buffer size: 1548632 bytes
ğŸ” Checking bucket access...
ğŸ”Œ Database connection test: FAILED
ğŸ”Œ DB Error: relation "public.user_roles" does not exist
ğŸ“‚ Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
âœ… Target bucket found: generated-images (public: true)
ğŸš€ Starting upload...
âœ… Upload successful! Data: {
  path: 'football_image_1753895556396.png',
  id: 'b159e4b2-f652-4036-a3b0-c245528be5f9',
  fullPath: 'generated-images/football_image_1753895556396.png'
}
âœ… Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895556396.png
ğŸŒ URL accessibility test: 200 OK
âœ… News generation completed in 29955ms
ğŸ“¤ Starting Telegram distribution...
ğŸ¯ Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
ğŸ”“ Decoded base64 token for channel: AfircaSportCenter
ğŸ“Š Found 1 active channels for language am:
  - AfircaSportCenter (am)
âœ… Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
âœ… Spam check passed: 1/1 channels allowed
ğŸ” Before HTML cleaning: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢

á‹­áˆ… á‹¨á‹ˆá‰…á‰± áˆá‰°áŠ“ á‹ˆá‹° á‹ˆá‰…á‰± á‹ˆá‹° á‹ˆá‰…á‰± áˆ›áˆˆá‰µ áŠá‹á¢ á‰áˆ­áŒ¥ á‹ˆá‹° áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹¨áˆšáŠ–áˆ¨á‹ á‹áˆ­á‹áˆ­ á‹­áˆ…áŠ•áŠ• á‹¨á‹ˆá‰…á‰± á‹¨áˆ¥áˆ­á‹“á‰µ áŠ­áˆ­áŠ­áˆ­ 
ğŸ§¹ Cleaning HTML for Telegram: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢

á‹­áˆ… ...
âœ… HTML cleaned for Telegram: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢ á‹­áˆ… á‹¨...
ğŸ§¹ After HTML cleaning: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢ á‹­áˆ… á‹¨á‹ˆá‰…á‰± áˆá‰°áŠ“ á‹ˆá‹° á‹ˆá‰…á‰± á‹ˆá‹° á‹ˆá‰…á‰± áˆ›áˆˆá‰µ áŠá‹á¢ á‰áˆ­áŒ¥ á‹ˆá‹° áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹¨áˆšáŠ–áˆ¨á‹ á‹áˆ­á‹áˆ­ á‹­áˆ…áŠ•áŠ• á‹¨á‹ˆá‰…á‰± á‹¨áˆ¥áˆ­á‹“á‰µ áŠ­áˆ­áŠ­áˆ­ á‰ 
ğŸ§¹ Cleaning HTML for Telegram: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢ á‹­áˆ… á‹¨...
âœ… HTML cleaned for Telegram: áŠ áŠ•á‰€áŒ½: á‰áˆ­áŒ¥ áŠ¥áŠ“ áŠ á‹³á‹²áˆµ á‹¨á‹ˆá‰…á‰± á‰µáŠ•á‰ á‹« á‰ƒáˆˆ áˆáˆáŠ­á‰µ áŠ áˆˆá‰½á£ á‰ áˆá‹•áˆ«á‰¥ áŠ á‹áˆ®á“ á‹á‹µá‹µáˆ­ 2025 á‹áˆµáŒ¥ áŠ¥áŠ•áŒáˆŠá‹ á‹µáˆ áŠ¥áŠ•á‹²áˆ°áŒ¥ áŠ¥áŠ•á‹° á‰µáˆáˆ…áˆ­á‰µ áŠ áˆˆá‰½á¢ á‹­áˆ… á‹¨...
ğŸ“· Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895556396.png
ğŸ“¤ Sending to channel: AfircaSportCenter
ğŸ“· Attempting to send message with image
ğŸ“· Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895556396.png
ğŸ§¹ HTML validation complete. Clean text length: 289
ğŸ“Š Image downloaded successfully: 1548632 bytes
âœ… Message sent successfully to @africansportdata
âœ… Successfully sent to AfircaSportCenter
âœ… Distribution completed: 1/1 channels
ğŸ“Š Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
âœ… Message recorded successfully
ğŸ“ Skipping content save to database (RLS policy needs update)
 âœ“ Compiled /api/smart-push/trigger in 221ms (365 modules)
ğŸ” Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
âœ… Supabase client created successfully
ğŸ¯ Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753895561138',
  channel_ids: 1
}
ğŸ« Evaluating smart coupon for news in am
âŒ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 538ms
ğŸ« Smart coupon system triggered: No suitable coupon found for current context
 POST /api/unified-content?action=send_now&type=news&language=am 200 in 35430ms
â±ï¸ Rate Limiter initialized for 5 APIs
âš ï¸ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
ğŸ¯ Football API Manager initializing...
âš½ API-Football v3 initialized
âœ… Football API Manager initialized with 1 APIs
ğŸš€ UnifiedFootballService initialized with FootballAPIManager
ğŸš€ Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
ğŸ” Request body structure: {
  target_channels: undefined,
  target_channels_type: 'undefined',
  target_channels_isArray: false,
  body_keys: []
}
âœ… FINAL LANGUAGE DECISION: am (will be used for AI content generation)
ğŸ¯ NO TARGET CHANNELS: Finding active channels with bots
ğŸ” Finding channels for specified language: am
ğŸ“ Found 1 channels for language 'am':
  - AfircaSportCenter (am)
ğŸ¯ Using primary channel: AfircaSportCenter
ğŸ¯ Content Router: Generating news content for am (Channel: AfircaSportCenter)
ğŸ“‹ Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
ğŸ“° Using news content generator for am
ğŸ“° Generating news content in am
ğŸ“¡ Fetching fresh RSS feeds
ğŸ“¡ RSS fetch attempt 1/2
ğŸ“¡ Fetching 3 RSS feeds
ğŸ” Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
ğŸ” Fetching RSS feed directly: https://www.theguardian.com/football/rss
ğŸ” Fetching RSS feed directly: https://talksport.com/football/feed/
âœ… TalkSport: 100 items
âœ… TalkSport: 100 items
âœ… The Guardian Football: 51 items
âœ… The Guardian Football: 51 items
âœ… BBC Sport Football: 89 items
âœ… BBC Sport Football: 89 items
ğŸ“° Total items: 240, Unique: 228
âœ… RSS fetch successful on attempt 1
ğŸ“° Fetched and cached 228 news items
âœ… Fetched 228 news items in 317ms
ğŸ† Scoring 228 news items for channel: AfircaSportCenter
ğŸ¯ Channel preferences: 0 teams, 20 leagues
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ” Finding best unused news for channel unified-content
âŒ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
âœ… Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
âœ… Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
ğŸ¨ Generating AI image
ğŸ¤– AI editing news content for language: am
âœ… Using OpenAI key from environment (fallback)
âœ… OpenAI client initialized
âœ… Using OpenAI key from environment (fallback)
âœ… OpenAI client initialized
ğŸ¨ Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
ğŸ¤– AI Result for am: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ

á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨áˆšáˆ‰á‰µ áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‰ áŠ¥áŠ•áŒáˆŠá‹ á‹ˆá‰…á‰³á‹Š áŠ á‹áˆ®á“ áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆ‹á‹­ áŒˆáŠ•á‹˜á‰¥ áŠ¥áŠ•á‹²áˆ á‰°áŠ“áŒˆáˆ¨á¢

áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹³áŒáˆ˜ á‹¨áŒ áˆ‹á‰µ á‰¡á‹µáŠ• áˆµá”áŠ•áŠ• á‰ áˆá‰°áŠ“ áŠ áˆ¸áŠ“áŠ áˆ›á‹µáˆ¨...
âœ… Using AI result for am
âœ… GPT-Image-1 generated successfully
ğŸ“¤ Uploading football_image_1753895610436.png to Supabase Storage...
ğŸ”‘ Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
ğŸ” Service role key available: true
ğŸ“Š Image buffer size: 1591608 bytes
ğŸ” Checking bucket access...
ğŸ”Œ Database connection test: FAILED
ğŸ”Œ DB Error: relation "public.user_roles" does not exist
ğŸ“‚ Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
âœ… Target bucket found: generated-images (public: true)
ğŸš€ Starting upload...
âœ… Upload successful! Data: {
  path: 'football_image_1753895610436.png',
  id: '20d0bd1b-3f8c-4a84-8107-a8155628c57f',
  fullPath: 'generated-images/football_image_1753895610436.png'
}
âœ… Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895610436.png
ğŸŒ URL accessibility test: 200 OK
âœ… News generation completed in 24811ms
ğŸ“¤ Starting Telegram distribution...
ğŸ¯ Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
ğŸ”“ Decoded base64 token for channel: AfircaSportCenter
ğŸ“Š Found 1 active channels for language am:
  - AfircaSportCenter (am)
âœ… Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
âœ… Spam check passed: 1/1 channels allowed
ğŸ” Before HTML cleaning: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ

á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨áˆšáˆ‰á‰µ áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‰ áŠ¥áŠ•áŒáˆŠá‹ á‹ˆá‰…á‰³á‹Š áŠ á‹áˆ®á“ áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆ‹á‹­ áŒˆáŠ•á‹˜á‰¥ áŠ¥áŠ•á‹²áˆ á‰°áŠ“áŒˆáˆ¨á¢

áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹³áŒáˆ˜ á‹¨áŒ áˆ‹á‰µ á‰¡á‹µáŠ• áˆµá”áŠ•áŠ• á‰ áˆá‰°áŠ“ áŠ áˆ¸áŠ“áŠ áˆ›á‹µáˆ¨
ğŸ§¹ Cleaning HTML for Telegram: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ

á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨...
âœ… HTML cleaned for Telegram: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨áˆš...
ğŸ§¹ After HTML cleaning: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨áˆšáˆ‰á‰µ áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‰ áŠ¥áŠ•áŒáˆŠá‹ á‹ˆá‰…á‰³á‹Š áŠ á‹áˆ®á“ áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆ‹á‹­ áŒˆáŠ•á‹˜á‰¥ áŠ¥áŠ•á‹²áˆ á‰°áŠ“áŒˆáˆ¨á¢ áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹³áŒáˆ˜ á‹¨áŒ áˆ‹á‰µ á‰¡á‹µáŠ• áˆµá”áŠ•áŠ• á‰ áˆá‰°áŠ“ áŠ áˆ¸áŠ“áŠ áˆ›á‹µáˆ¨áŒ 
ğŸ§¹ Cleaning HTML for Telegram: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨áˆš...
âœ… HTML cleaned for Telegram: áˆ­á‹•áˆ° áŒ‰á‹³á‹­: áŠ­áˆá‹­ áŠ¨áˆŒáˆŠ á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áŠ á‹­áŠá‰µ áˆ˜áŠáˆ» á‰°áˆ˜áˆáŠ­á‰·áˆ á‹¨áŠ á‹áˆ®á“ 2025 áŠ áˆ¸áŠ“áŠáŠá‰µ á‹áˆ­á‹áˆ­ áˆˆáˆ˜áŒáŠ˜á‰µ á‹­áˆ…áŠ• á‹¨á‰°áˆˆá‹¨ á‹¨áˆá‰°áŠ“ áˆµáˆ­á‹“á‰µ á‹­áŠ–áˆ­á‰ á‰³áˆ á‹¨áˆš...
ğŸ“· Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895610436.png
ğŸ“¤ Sending to channel: AfircaSportCenter
ğŸ“· Attempting to send message with image
ğŸ“· Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895610436.png
ğŸ§¹ HTML validation complete. Clean text length: 286
ğŸ“Š Image downloaded successfully: 1591608 bytes
âœ… Message sent successfully to @africansportdata
âœ… Successfully sent to AfircaSportCenter
âœ… Distribution completed: 1/1 channels
ğŸ“Š Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
âœ… Message recorded successfully
ğŸ“ Skipping content save to database (RLS policy needs update)
ğŸ¯ Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753895614697',
  channel_ids: 1
}
ğŸ« Evaluating smart coupon for news in am
âŒ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 112ms
ğŸ« Smart coupon system triggered: No suitable coupon found for current context
 POST /api/unified-content?action=send_now&type=news&language=am 200 in 27877ms
 âœ“ Compiled in 546ms (365 modules)
 âœ“ Compiled in 222ms (365 modules)
ğŸ” Supabase client initializing with URL: https://ythsmnqclosoxiccchhh.supabase.co
âœ… Supabase client created successfully
â±ï¸ Rate Limiter initialized for 5 APIs
âš ï¸ FOOTBALL_DATA_API_KEY not found - Football-Data.org API disabled
ğŸ¯ Football API Manager initializing...
âš½ API-Football v3 initialized
âœ… Football API Manager initialized with 1 APIs
ğŸš€ UnifiedFootballService initialized with FootballAPIManager
ğŸš€ Unified Content API: send_now | Type: news | Mode: ai_enhanced | Language: am
ğŸ” Request body structure: {
  target_channels: undefined,
  target_channels_type: 'undefined',
  target_channels_isArray: false,
  body_keys: []
}
âœ… FINAL LANGUAGE DECISION: am (will be used for AI content generation)
ğŸ¯ NO TARGET CHANNELS: Finding active channels with bots
ğŸ” Finding channels for specified language: am
ğŸ“ Found 1 channels for language 'am':
  - AfircaSportCenter (am)
ğŸ¯ Using primary channel: AfircaSportCenter
ğŸ¯ Content Router: Generating news content for am (Channel: AfircaSportCenter)
ğŸ“‹ Channel settings: Leagues: 20, Teams: 0, Affiliate: TESTING
ğŸ“° Using news content generator for am
ğŸ“° Generating news content in am
ğŸ“¡ Fetching fresh RSS feeds
ğŸ“¡ RSS fetch attempt 1/2
ğŸ“¡ Fetching 3 RSS feeds
ğŸ” Fetching RSS feed directly: https://feeds.bbci.co.uk/sport/football/rss.xml
ğŸ” Fetching RSS feed directly: https://www.theguardian.com/football/rss
ğŸ” Fetching RSS feed directly: https://talksport.com/football/feed/
âœ… The Guardian Football: 51 items
âœ… The Guardian Football: 51 items
âœ… BBC Sport Football: 89 items
âœ… BBC Sport Football: 89 items
âœ… TalkSport: 100 items
âœ… TalkSport: 100 items
ğŸ“° Total items: 240, Unique: 228
âœ… RSS fetch successful on attempt 1
ğŸ“° Fetched and cached 228 news items
âœ… Fetched 228 news items in 2732ms
ğŸ† Scoring 228 news items for channel: AfircaSportCenter
ğŸ¯ Channel preferences: 0 teams, 20 leagues
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ¯ Boosted score (+15) for preferred league content
ğŸ” Finding best unused news for channel unified-content
âŒ Error fetching used content: {
  code: '42P01',
  details: null,
  hint: null,
  message: 'relation "public.content_uniqueness" does not exist'
}
âœ… Found unused news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory"
âœ… Selected news: "Chloe Kelly gives explanation for unusual penalty style that sealed Euro 2025 glory" (Score: 155)
ğŸ¨ Generating AI image
ğŸ¤– AI editing news content for language: am
âœ… Using OpenAI key from environment (fallback)
âœ… OpenAI client initialized
âœ… Using OpenAI key from environment (fallback)
âœ… OpenAI client initialized
ğŸ¨ Generating image with GPT-Image-1 model: Real football news photo: penalty kick, authentic stadium scene, professional sports journalism phot...
ğŸ¤– AI Result for am: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆá‹ áŒˆáˆˆáŒ¸á¢

áŠ¬áˆŠ áŠá‹ á‰ áˆŠá‹®áŠáˆµ á‹¨áˆšá‰³á‹ˆá‰€á‹ á‰°áŠ•áˆ³á‹áŠ á‹¨áŒˆáŠ•á‹˜á‰¥ áˆ˜áˆª á‹¨á‰†áˆá‰µ áŠ¨áˆ†áŠ áŠ¥áŠ“ á‹ˆá‹° áˆµá”áŠ• á‰ áˆá‰°áŠ“ áˆ›á‰…áˆ¨á‰¥ áˆ³á‹­áˆ¨á‹³ áˆ‹á‹­ áŠ¥áŠ•á‹° á‹ˆá‹²á‹«á‹ áˆ‚á‹°á‰µ á‰¥áˆˆá‹ á‹¨áˆšáˆˆá‹...
âœ… Using AI result for am
âœ… GPT-Image-1 generated successfully
ğŸ“¤ Uploading football_image_1753895688255.png to Supabase Storage...
ğŸ”‘ Supabase URL: https://ythsmnqclosoxiccchhh.supabase.co
ğŸ” Service role key available: true
ğŸ“Š Image buffer size: 1587469 bytes
ğŸ” Checking bucket access...
ğŸ”Œ Database connection test: FAILED
ğŸ”Œ DB Error: relation "public.user_roles" does not exist
ğŸ“‚ Available buckets: [ 'generated-images (public: true)', 'content-images (public: true)' ]
âœ… Target bucket found: generated-images (public: true)
ğŸš€ Starting upload...
âœ… Upload successful! Data: {
  path: 'football_image_1753895688255.png',
  id: '1fc5146b-0aee-4741-a3e6-7f67a51b25d6',
  fullPath: 'generated-images/football_image_1753895688255.png'
}
âœ… Public URL generated: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895688255.png
ğŸŒ URL accessibility test: 200 OK
âœ… News generation completed in 26703ms
ğŸ“¤ Starting Telegram distribution...
ğŸ¯ Using target channels: 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
ğŸ”“ Decoded base64 token for channel: AfircaSportCenter
ğŸ“Š Found 1 active channels for language am:
  - AfircaSportCenter (am)
âœ… Content sending allowed: news for channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
âœ… Spam check passed: 1/1 channels allowed
ğŸ” Before HTML cleaning: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆá‹ áŒˆáˆˆáŒ¸á¢

áŠ¬áˆŠ áŠá‹ á‰ áˆŠá‹®áŠáˆµ á‹¨áˆšá‰³á‹ˆá‰€á‹ á‰°áŠ•áˆ³á‹áŠ á‹¨áŒˆáŠ•á‹˜á‰¥ áˆ˜áˆª á‹¨á‰†áˆá‰µ áŠ¨áˆ†áŠ áŠ¥áŠ“ á‹ˆá‹° áˆµá”áŠ• á‰ áˆá‰°áŠ“ áˆ›á‰…áˆ¨á‰¥ áˆ³á‹­áˆ¨á‹³ áˆ‹á‹­ áŠ¥áŠ•á‹° á‹ˆá‹²á‹«á‹ áˆ‚á‹°á‰µ á‰¥áˆˆá‹ á‹¨áˆšáˆˆá‹
ğŸ§¹ Cleaning HTML for Telegram: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆ...
âœ… HTML cleaned for Telegram: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆ...
ğŸ§¹ After HTML cleaning: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆá‹ áŒˆáˆˆáŒ¸á¢ áŠ¬áˆŠ áŠá‹ á‰ áˆŠá‹®áŠáˆµ á‹¨áˆšá‰³á‹ˆá‰€á‹ á‰°áŠ•áˆ³á‹áŠ á‹¨áŒˆáŠ•á‹˜á‰¥ áˆ˜áˆª á‹¨á‰†áˆá‰µ áŠ¨áˆ†áŠ áŠ¥áŠ“ á‹ˆá‹° áˆµá”áŠ• á‰ áˆá‰°áŠ“ áˆ›á‰…áˆ¨á‰¥ áˆ³á‹­áˆ¨á‹³ áˆ‹á‹­ áŠ¥áŠ•á‹° á‹ˆá‹²á‹«á‹ áˆ‚á‹°á‰µ á‰¥áˆˆá‹ á‹¨áˆšáˆˆá‹ 
ğŸ§¹ Cleaning HTML for Telegram: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆ...
âœ… HTML cleaned for Telegram: âš½ áŠ­áˆá‹­ áŠ¬áˆŠ áˆˆáŠ á‹²áˆµ á‹¨á‰°áˆˆá‹¨ áˆá‰°áŠ“ á‹˜á‹´á‹‹ áˆ˜áˆ¨áŒƒ áŠ áŒ‹áˆ«á‰½ á‹¨áˆ†áŠá‹áŠ• á‹ˆá‹° á‹©áˆ® 2025 á‹µáˆ áŒˆá‰¥áˆµ áŠ áˆµá‰€á‹µáˆ áŠ¥áŠ•á‹° áˆšá‹«áˆµá‰³á‹áˆµ áŠ¥áŠ•á‹° á‹á‹µá‹µáˆ­ áˆ˜áˆ áˆ¨á‰± á‹­á‰€áŒ¥áˆ áŠ¥áŠ•á‹³áˆˆ...
ğŸ“· Found existing image in content item: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895688255.png
ğŸ“¤ Sending to channel: AfircaSportCenter
ğŸ“· Attempting to send message with image
ğŸ“· Attempting to send photo via Telegram: https://ythsmnqclosoxiccchhh.supabase.co/storage/v1/object/public/generated-images/football_image_1753895688255.png
ğŸ§¹ HTML validation complete. Clean text length: 420
ğŸ“Š Image downloaded successfully: 1587469 bytes
âœ… Message sent successfully to @africansportdata
âœ… Successfully sent to AfircaSportCenter
âœ… Distribution completed: 1/1 channels
ğŸ“Š Recording sent message: news to channel 3f41f4a4-ec2a-4e95-a99d-c713b2718d22
âœ… Message recorded successfully
ğŸ“ Skipping content save to database (RLS policy needs update)
ğŸ¯ Smart Push Trigger received: {
  trigger_type: 'after_content',
  content_type: 'news',
  content_id: 'content_1753895692299',
  channel_ids: 1
}
ğŸ« Evaluating smart coupon for news in am
âŒ No suitable coupon for this context: No active coupons available
 POST /api/smart-push/trigger 200 in 130ms
ğŸ« Smart coupon system triggered: No suitable coupon found for current context
 POST /api/unified-content?action=send_now&type=news&language=am 200 in 30061ms
 âœ“ Compiled in 243ms (324 modules)
 âœ“ Compiled in 2.5s (201 modules)
 âœ“ Compiled in 302ms (201 modules)
